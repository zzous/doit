{"remainingRequest":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js!/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/calendar/calendar.js","dependencies":[{"path":"/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/calendar/calendar.js","mtime":1610263603568},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/cache-loader/dist/cjs.js","mtime":1582363961748},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js","mtime":1585275399303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Cgp2YXIgX3dhdGNoOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgppbXBvcnQgeyBWdWUgfSBmcm9tICcuLi8uLi92dWUnOwppbXBvcnQgeyBOQU1FX0NBTEVOREFSIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2NvbXBvbmVudHMnOwppbXBvcnQgeyBDQUxFTkRBUl9HUkVHT1JZLCBDQUxFTkRBUl9MT05HLCBDQUxFTkRBUl9OQVJST1csIENBTEVOREFSX1NIT1JULCBEQVRFX0ZPUk1BVF8yX0RJR0lULCBEQVRFX0ZPUk1BVF9OVU1FUklDIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2RhdGUnOwppbXBvcnQgeyBFVkVOVF9OQU1FX0NPTlRFWFQsIEVWRU5UX05BTUVfU0VMRUNURUQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvZXZlbnRzJzsKaW1wb3J0IHsgQ09ERV9ET1dOLCBDT0RFX0VORCwgQ09ERV9FTlRFUiwgQ09ERV9IT01FLCBDT0RFX0xFRlQsIENPREVfUEFHRURPV04sIENPREVfUEFHRVVQLCBDT0RFX1JJR0hULCBDT0RFX1NQQUNFLCBDT0RFX1VQIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2tleS1jb2Rlcyc7CmltcG9ydCB7IFBST1BfVFlQRV9BUlJBWV9TVFJJTkcsIFBST1BfVFlQRV9CT09MRUFOLCBQUk9QX1RZUEVfREFURV9TVFJJTkcsIFBST1BfVFlQRV9GVU5DVElPTiwgUFJPUF9UWVBFX05VTUJFUl9TVFJJTkcsIFBST1BfVFlQRV9PQkpFQ1QsIFBST1BfVFlQRV9TVFJJTkcgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvcHJvcHMnOwppbXBvcnQgeyBTTE9UX05BTUVfTkFWX05FWFRfREVDQURFLCBTTE9UX05BTUVfTkFWX05FWFRfTU9OVEgsIFNMT1RfTkFNRV9OQVZfTkVYVF9ZRUFSLCBTTE9UX05BTUVfTkFWX1BFVl9ERUNBREUsIFNMT1RfTkFNRV9OQVZfUEVWX01PTlRILCBTTE9UX05BTUVfTkFWX1BFVl9ZRUFSLCBTTE9UX05BTUVfTkFWX1RISVNfTU9OVEggfSBmcm9tICcuLi8uLi9jb25zdGFudHMvc2xvdHMnOwppbXBvcnQgeyBhcnJheUluY2x1ZGVzLCBjb25jYXQgfSBmcm9tICcuLi8uLi91dGlscy9hcnJheSc7CmltcG9ydCB7IGNyZWF0ZURhdGUsIGNyZWF0ZURhdGVGb3JtYXR0ZXIsIGNvbnN0cmFpbkRhdGUgYXMgX2NvbnN0cmFpbkRhdGUsIGRhdGVzRXF1YWwsIGZpcnN0RGF0ZU9mTW9udGgsIGZvcm1hdFlNRCwgbGFzdERhdGVPZk1vbnRoLCBvbmVNb250aEFnbywgb25lTW9udGhBaGVhZCwgb25lWWVhckFnbywgb25lWWVhckFoZWFkLCBvbmVEZWNhZGVBZ28sIG9uZURlY2FkZUFoZWFkLCBwYXJzZVlNRCwgcmVzb2x2ZUxvY2FsZSB9IGZyb20gJy4uLy4uL3V0aWxzL2RhdGUnOwppbXBvcnQgeyBhdHRlbXB0Qmx1ciwgYXR0ZW1wdEZvY3VzLCByZXF1ZXN0QUYgfSBmcm9tICcuLi8uLi91dGlscy9kb20nOwppbXBvcnQgeyBzdG9wRXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudHMnOwppbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4uLy4uL3V0aWxzL2lkZW50aXR5JzsKaW1wb3J0IHsgaXNBcnJheSwgaXNQbGFpbk9iamVjdCwgaXNTdHJpbmcgfSBmcm9tICcuLi8uLi91dGlscy9pbnNwZWN0JzsKaW1wb3J0IHsgaXNMb2NhbGVSVEwgfSBmcm9tICcuLi8uLi91dGlscy9sb2NhbGUnOwppbXBvcnQgeyBsb29zZUVxdWFsIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9vc2UtZXF1YWwnOwppbXBvcnQgeyBtYXRoTWF4IH0gZnJvbSAnLi4vLi4vdXRpbHMvbWF0aCc7CmltcG9ydCB7IG1ha2VNb2RlbE1peGluIH0gZnJvbSAnLi4vLi4vdXRpbHMvbW9kZWwnOwppbXBvcnQgeyB0b0ludGVnZXIgfSBmcm9tICcuLi8uLi91dGlscy9udW1iZXInOwppbXBvcnQgeyBzb3J0S2V5cyB9IGZyb20gJy4uLy4uL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGhhc1Byb3BGdW5jdGlvbiwgbWFrZVByb3AsIG1ha2VQcm9wc0NvbmZpZ3VyYWJsZSB9IGZyb20gJy4uLy4uL3V0aWxzL3Byb3BzJzsKaW1wb3J0IHsgdG9TdHJpbmcgfSBmcm9tICcuLi8uLi91dGlscy9zdHJpbmcnOwppbXBvcnQgeyBhdHRyc01peGluIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2F0dHJzJzsKaW1wb3J0IHsgaWRNaXhpbiwgcHJvcHMgYXMgaWRQcm9wcyB9IGZyb20gJy4uLy4uL21peGlucy9pZCc7CmltcG9ydCB7IG5vcm1hbGl6ZVNsb3RNaXhpbiB9IGZyb20gJy4uLy4uL21peGlucy9ub3JtYWxpemUtc2xvdCc7CmltcG9ydCB7IEJJY29uQ2hldnJvbkxlZnQsIEJJY29uQ2hldnJvbkRvdWJsZUxlZnQsIEJJY29uQ2hldnJvbkJhckxlZnQsIEJJY29uQ2lyY2xlRmlsbCB9IGZyb20gJy4uLy4uL2ljb25zL2ljb25zJzsgLy8gLS0tIENvbnN0YW50cyAtLS0KCnZhciBfbWFrZU1vZGVsTWl4aW4gPSBtYWtlTW9kZWxNaXhpbigndmFsdWUnLCB7CiAgdHlwZTogUFJPUF9UWVBFX0RBVEVfU1RSSU5HCn0pLAogICAgbW9kZWxNaXhpbiA9IF9tYWtlTW9kZWxNaXhpbi5taXhpbiwKICAgIG1vZGVsUHJvcHMgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcHMsCiAgICBNT0RFTF9QUk9QX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcCwKICAgIE1PREVMX0VWRU5UX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4uZXZlbnQ7IC8vIC0tLSBQcm9wcyAtLS0KCgpleHBvcnQgdmFyIHByb3BzID0gbWFrZVByb3BzQ29uZmlndXJhYmxlKHNvcnRLZXlzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpZFByb3BzKSwgbW9kZWxQcm9wcyksIHt9LCB7CiAgYXJpYUNvbnRyb2xzOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKSwKICAvLyBNYWtlcyBjYWxlbmRhciB0aGUgZnVsbCB3aWR0aCBvZiBpdHMgcGFyZW50IGNvbnRhaW5lcgogIGJsb2NrOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIGRhdGVEaXNhYmxlZEZuOiBtYWtlUHJvcChQUk9QX1RZUEVfRlVOQ1RJT04pLAogIC8vIGBJbnRsLkRhdGVUaW1lRm9ybWF0YCBvYmplY3QKICBkYXRlRm9ybWF0T3B0aW9uczogbWFrZVByb3AoUFJPUF9UWVBFX09CSkVDVCwgewogICAgeWVhcjogREFURV9GT1JNQVRfTlVNRVJJQywKICAgIG1vbnRoOiBDQUxFTkRBUl9MT05HLAogICAgZGF5OiBEQVRFX0ZPUk1BVF9OVU1FUklDLAogICAgd2Vla2RheTogQ0FMRU5EQVJfTE9ORwogIH0pLAogIC8vIEZ1bmN0aW9uIHRvIHNldCBhIGNsYXNzIG9mIChjbGFzc2VzKSBvbiB0aGUgZGF0ZSBjZWxsCiAgLy8gaWYgcGFzc2VkIGEgc3RyaW5nIG9yIGFuIGFycmF5CiAgLy8gVE9ETzoKICAvLyAgIElmIHRoZSBmdW5jdGlvbiByZXR1cm5zIGFuIG9iamVjdCwgbG9vayBmb3IgY2xhc3MgcHJvcCBmb3IgY2xhc3NlcywKICAvLyAgIGFuZCBvdGhlciBwcm9wcyBmb3IgaGFuZGxpbmcgZXZlbnRzL2RldGFpbHMvZGVzY3JpcHRpb25zCiAgZGF0ZUluZm9GbjogbWFrZVByb3AoUFJPUF9UWVBFX0ZVTkNUSU9OKSwKICAvLyAnbHRyJywgJ3J0bCcsIG9yIGBudWxsYCAoZm9yIGF1dG8gZGV0ZWN0KQogIGRpcmVjdGlvbjogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgZGlzYWJsZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gV2hlbiBgdHJ1ZWAsIHJlbmRlcnMgYSBjb21tZW50IG5vZGUsIGJ1dCBrZWVwcyB0aGUgY29tcG9uZW50IGluc3RhbmNlIGFjdGl2ZQogIC8vIE1haW5seSBmb3IgPGItZm9ybS1kYXRlPiwgc28gdGhhdCB3ZSBjYW4gZ2V0IHRoZSBjb21wb25lbnQncyB2YWx1ZSBhbmQgbG9jYWxlCiAgLy8gQnV0IHdlIG1pZ2h0IGp1c3QgdXNlIHNlcGFyYXRlIGRhdGUgZm9ybWF0dGVycywgdXNpbmcgdGhlIHJlc29sdmVkIGxvY2FsZQogIC8vIChhZGp1c3RlZCBmb3IgdGhlIGdyZWdvcmlhbiBjYWxlbmRhcikKICBoaWRkZW46IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gV2hlbiBgdHJ1ZWAgbWFrZXMgdGhlIHNlbGVjdGVkIGRhdGUgaGVhZGVyIGBzci1vbmx5YAogIGhpZGVIZWFkZXI6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gVGhpcyBzcGVjaWZpZXMgdGhlIGNhbGVuZGFyIHllYXIvbW9udGgvZGF5IHRoYXQgd2lsbCBiZSBzaG93biB3aGVuCiAgLy8gZmlyc3Qgb3BlbmluZyB0aGUgZGF0ZXBpY2tlciBpZiBubyB2LW1vZGVsIHZhbHVlIGlzIHByb3ZpZGVkCiAgLy8gRGVmYXVsdCBpcyB0aGUgY3VycmVudCBkYXRlIChvciBgbWluYC9gbWF4YCkKICBpbml0aWFsRGF0ZTogbWFrZVByb3AoUFJPUF9UWVBFX0RBVEVfU1RSSU5HKSwKICAvLyBMYWJlbHMgZm9yIGJ1dHRvbnMgYW5kIGtleWJvYXJkIHNob3J0Y3V0cwogIGxhYmVsQ2FsZW5kYXI6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdDYWxlbmRhcicpLAogIGxhYmVsQ3VycmVudE1vbnRoOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnQ3VycmVudCBtb250aCcpLAogIGxhYmVsSGVscDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ1VzZSBjdXJzb3Iga2V5cyB0byBuYXZpZ2F0ZSBjYWxlbmRhciBkYXRlcycpLAogIGxhYmVsTmF2OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnQ2FsZW5kYXIgbmF2aWdhdGlvbicpLAogIGxhYmVsTmV4dERlY2FkZTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ05leHQgZGVjYWRlJyksCiAgbGFiZWxOZXh0TW9udGg6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdOZXh0IG1vbnRoJyksCiAgbGFiZWxOZXh0WWVhcjogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ05leHQgeWVhcicpLAogIGxhYmVsTm9EYXRlU2VsZWN0ZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdObyBkYXRlIHNlbGVjdGVkJyksCiAgbGFiZWxQcmV2RGVjYWRlOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnUHJldmlvdXMgZGVjYWRlJyksCiAgbGFiZWxQcmV2TW9udGg6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdQcmV2aW91cyBtb250aCcpLAogIGxhYmVsUHJldlllYXI6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdQcmV2aW91cyB5ZWFyJyksCiAgbGFiZWxTZWxlY3RlZDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ1NlbGVjdGVkIGRhdGUnKSwKICBsYWJlbFRvZGF5OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnVG9kYXknKSwKICAvLyBMb2NhbGUocykgdG8gdXNlCiAgLy8gRGVmYXVsdCBpcyB0byB1c2UgcGFnZS9icm93c2VyIGRlZmF1bHQgc2V0dGluZwogIGxvY2FsZTogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX1NUUklORyksCiAgbWF4OiBtYWtlUHJvcChQUk9QX1RZUEVfREFURV9TVFJJTkcpLAogIG1pbjogbWFrZVByb3AoUFJPUF9UWVBFX0RBVEVfU1RSSU5HKSwKICAvLyBWYXJpYW50IGNvbG9yIHRvIHVzZSBmb3IgdGhlIG5hdmlnYXRpb24gYnV0dG9ucwogIG5hdkJ1dHRvblZhcmlhbnQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdzZWNvbmRhcnknKSwKICAvLyBEaXNhYmxlIGhpZ2hsaWdodGluZyB0b2RheSdzIGRhdGUKICBub0hpZ2hsaWdodFRvZGF5OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG5vS2V5TmF2OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHJlYWRvbmx5OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHJvbGVEZXNjcmlwdGlvbjogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgLy8gVmFyaWFudCBjb2xvciB0byB1c2UgZm9yIHRoZSBzZWxlY3RlZCBkYXRlCiAgc2VsZWN0ZWRWYXJpYW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAncHJpbWFyeScpLAogIC8vIFdoZW4gYHRydWVgIGVuYWJsZXMgdGhlIGRlY2FkZSBuYXZpZ2F0aW9uIGJ1dHRvbnMKICBzaG93RGVjYWRlTmF2OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIERheSBvZiB3ZWVrIHRvIHN0YXJ0IGNhbGVuZGFyIG9uCiAgLy8gYDBgIChTdW5kYXkpLCBgMWAgKE1vbmRheSksIC4uLiBgNmAgKFNhdHVyZGF5KQogIHN0YXJ0V2Vla2RheTogbWFrZVByb3AoUFJPUF9UWVBFX05VTUJFUl9TVFJJTkcsIDApLAogIC8vIFZhcmlhbnQgY29sb3IgdG8gdXNlIGZvciB0b2RheSdzIGRhdGUgKGRlZmF1bHRzIHRvIGBzZWxlY3RlZFZhcmlhbnRgKQogIHRvZGF5VmFyaWFudDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgLy8gQWx3YXlzIHJldHVybiB0aGUgYHYtbW9kZWxgIHZhbHVlIGFzIGEgZGF0ZSBvYmplY3QKICB2YWx1ZUFzRGF0ZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICAvLyBGb3JtYXQgb2YgdGhlIHdlZWtkYXkgbmFtZXMgYXQgdGhlIHRvcCBvZiB0aGUgY2FsZW5kYXIKICAvLyBgc2hvcnRgIGlzIHR5cGljYWxseSBhIDMgbGV0dGVyIGFiYnJldmlhdGlvbiwKICAvLyBgbmFycm93YCBpcyB0eXBpY2FsbHkgYSBzaW5nbGUgbGV0dGVyCiAgLy8gYGxvbmdgIGlzIHRoZSBmdWxsIHdlZWsgZGF5IG5hbWUKICAvLyBBbHRob3VnaCBzb21lIGxvY2FsZXMgbWF5IG92ZXJyaWRlIHRoaXMgKGkuZSBgYXJgLCBldGMuKQogIHdlZWtkYXlIZWFkZXJGb3JtYXQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsIENBTEVOREFSX1NIT1JULCBmdW5jdGlvbiAodmFsdWUpIHsKICAgIHJldHVybiBhcnJheUluY2x1ZGVzKFtDQUxFTkRBUl9MT05HLCBDQUxFTkRBUl9TSE9SVCwgQ0FMRU5EQVJfTkFSUk9XXSwgdmFsdWUpOwogIH0pLAogIC8vIEhhcyBubyBlZmZlY3QgaWYgcHJvcCBgYmxvY2tgIGlzIHNldAogIHdpZHRoOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnMjcwcHgnKQp9KSksIE5BTUVfQ0FMRU5EQVIpOyAvLyAtLS0gTWFpbiBjb21wb25lbnQgLS0tCi8vIEB2dWUvY29tcG9uZW50CgpleHBvcnQgdmFyIEJDYWxlbmRhciA9IFZ1ZS5leHRlbmQoewogIG5hbWU6IE5BTUVfQ0FMRU5EQVIsCiAgLy8gTWl4aW4gb3JkZXIgaXMgaW1wb3J0YW50IQogIG1peGluczogW2F0dHJzTWl4aW4sIGlkTWl4aW4sIG1vZGVsTWl4aW4sIG5vcm1hbGl6ZVNsb3RNaXhpbl0sCiAgcHJvcHM6IHByb3BzLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgc2VsZWN0ZWQgPSBmb3JtYXRZTUQodGhpc1tNT0RFTF9QUk9QX05BTUVdKSB8fCAnJzsKICAgIHJldHVybiB7CiAgICAgIC8vIFNlbGVjdGVkIGRhdGUKICAgICAgc2VsZWN0ZWRZTUQ6IHNlbGVjdGVkLAogICAgICAvLyBEYXRlIGluIGNhbGVuZGFyIGdyaWQgdGhhdCBoYXMgYHRhYmluZGV4YCBvZiBgMGAKICAgICAgYWN0aXZlWU1EOiBzZWxlY3RlZCB8fCBmb3JtYXRZTUQoX2NvbnN0cmFpbkRhdGUodGhpcy5pbml0aWFsRGF0ZSB8fCB0aGlzLmdldFRvZGF5KCkpLCB0aGlzLm1pbiwgdGhpcy5tYXgpLAogICAgICAvLyBXaWxsIGJlIHRydWUgaWYgdGhlIGNhbGVuZGFyIGdyaWQgaGFzL2NvbnRhaW5zIGZvY3VzCiAgICAgIGdyaWRIYXNGb2N1czogZmFsc2UsCiAgICAgIC8vIEZsYWcgdG8gZW5hYmxlIHRoZSBgYXJpYS1saXZlYCByZWdpb24ocykgYWZ0ZXIgbW91bnQKICAgICAgLy8gdG8gcHJldmVudCBzY3JlZW4gcmVhZGVyICJvdXRidXJzdHMiIHdoZW4gbW91bnRpbmcKICAgICAgaXNMaXZlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICB2YWx1ZUlkOiBmdW5jdGlvbiB2YWx1ZUlkKCkgewogICAgICByZXR1cm4gdGhpcy5zYWZlSWQoKTsKICAgIH0sCiAgICB3aWRnZXRJZDogZnVuY3Rpb24gd2lkZ2V0SWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNhZmVJZCgnX2NhbGVuZGFyLXdyYXBwZXJfJyk7CiAgICB9LAogICAgbmF2SWQ6IGZ1bmN0aW9uIG5hdklkKCkgewogICAgICByZXR1cm4gdGhpcy5zYWZlSWQoJ19jYWxlbmRhci1uYXZfJyk7CiAgICB9LAogICAgZ3JpZElkOiBmdW5jdGlvbiBncmlkSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNhZmVJZCgnX2NhbGVuZGFyLWdyaWRfJyk7CiAgICB9LAogICAgZ3JpZENhcHRpb25JZDogZnVuY3Rpb24gZ3JpZENhcHRpb25JZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc2FmZUlkKCdfY2FsZW5kYXItZ3JpZC1jYXB0aW9uXycpOwogICAgfSwKICAgIGdyaWRIZWxwSWQ6IGZ1bmN0aW9uIGdyaWRIZWxwSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNhZmVJZCgnX2NhbGVuZGFyLWdyaWQtaGVscF8nKTsKICAgIH0sCiAgICBhY3RpdmVJZDogZnVuY3Rpb24gYWN0aXZlSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZVlNRCA/IHRoaXMuc2FmZUlkKCJfY2VsbC0iLmNvbmNhdCh0aGlzLmFjdGl2ZVlNRCwgIl8iKSkgOiBudWxsOwogICAgfSwKICAgIC8vIFRPRE86IFVzZSBjb21wdXRlZCBwcm9wcyB0byBjb252ZXJ0IGBZWVlZLU1NLUREYCB0byBgRGF0ZWAgb2JqZWN0CiAgICBzZWxlY3RlZERhdGU6IGZ1bmN0aW9uIHNlbGVjdGVkRGF0ZSgpIHsKICAgICAgLy8gU2VsZWN0ZWQgYXMgYSBgRGF0ZWAgb2JqZWN0CiAgICAgIHJldHVybiBwYXJzZVlNRCh0aGlzLnNlbGVjdGVkWU1EKTsKICAgIH0sCiAgICBhY3RpdmVEYXRlOiBmdW5jdGlvbiBhY3RpdmVEYXRlKCkgewogICAgICAvLyBBY3RpdmUgYXMgYSBgRGF0ZWAgb2JqZWN0CiAgICAgIHJldHVybiBwYXJzZVlNRCh0aGlzLmFjdGl2ZVlNRCk7CiAgICB9LAogICAgY29tcHV0ZWRNaW46IGZ1bmN0aW9uIGNvbXB1dGVkTWluKCkgewogICAgICByZXR1cm4gcGFyc2VZTUQodGhpcy5taW4pOwogICAgfSwKICAgIGNvbXB1dGVkTWF4OiBmdW5jdGlvbiBjb21wdXRlZE1heCgpIHsKICAgICAgcmV0dXJuIHBhcnNlWU1EKHRoaXMubWF4KTsKICAgIH0sCiAgICBjb21wdXRlZFdlZWtTdGFydHM6IGZ1bmN0aW9uIGNvbXB1dGVkV2Vla1N0YXJ0cygpIHsKICAgICAgLy8gYHN0YXJ0V2Vla2RheWAgaXMgYSBwcm9wIChjb25zdHJhaW5lZCB0byBgMGAgdGhyb3VnaCBgNmApCiAgICAgIHJldHVybiBtYXRoTWF4KHRvSW50ZWdlcih0aGlzLnN0YXJ0V2Vla2RheSwgMCksIDApICUgNzsKICAgIH0sCiAgICBjb21wdXRlZExvY2FsZTogZnVuY3Rpb24gY29tcHV0ZWRMb2NhbGUoKSB7CiAgICAgIC8vIFJldHVybnMgdGhlIHJlc29sdmVkIGxvY2FsZSB1c2VkIGJ5IHRoZSBjYWxlbmRhcgogICAgICByZXR1cm4gcmVzb2x2ZUxvY2FsZShjb25jYXQodGhpcy5sb2NhbGUpLmZpbHRlcihpZGVudGl0eSksIENBTEVOREFSX0dSRUdPUlkpOwogICAgfSwKICAgIGNvbXB1dGVkRGF0ZURpc2FibGVkRm46IGZ1bmN0aW9uIGNvbXB1dGVkRGF0ZURpc2FibGVkRm4oKSB7CiAgICAgIHZhciBkYXRlRGlzYWJsZWRGbiA9IHRoaXMuZGF0ZURpc2FibGVkRm47CiAgICAgIHJldHVybiBoYXNQcm9wRnVuY3Rpb24oZGF0ZURpc2FibGVkRm4pID8gZGF0ZURpc2FibGVkRm4gOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9OwogICAgfSwKICAgIC8vIFRPRE86IENoYW5nZSBgZGF0ZUluZm9GbmAgdG8gaGFuZGxlIGV2ZW50cyBhbmQgbm90ZXMgYXMgd2VsbCBhcyBjbGFzc2VzCiAgICBjb21wdXRlZERhdGVJbmZvRm46IGZ1bmN0aW9uIGNvbXB1dGVkRGF0ZUluZm9GbigpIHsKICAgICAgdmFyIGRhdGVJbmZvRm4gPSB0aGlzLmRhdGVJbmZvRm47CiAgICAgIHJldHVybiBoYXNQcm9wRnVuY3Rpb24oZGF0ZUluZm9GbikgPyBkYXRlSW5mb0ZuIDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfTsKICAgIH0sCiAgICBjYWxlbmRhckxvY2FsZTogZnVuY3Rpb24gY2FsZW5kYXJMb2NhbGUoKSB7CiAgICAgIC8vIFRoaXMgbG9jYWxlIGVuZm9yY2VzIHRoZSBncmVnb3JpYW4gY2FsZW5kYXIgKGZvciB1c2UgaW4gZm9ybWF0dGVyIGZ1bmN0aW9ucykKICAgICAgLy8gTmVlZGVkIGJlY2F1c2UgSUUgMTEgcmVzb2x2ZXMgYGFyLUlSYCBhcyBpc2xhbWljLWNpdmlsIGNhbGVuZGFyCiAgICAgIC8vIGFuZCBJRSAxMSAoYW5kIHNvbWUgb3RoZXIgYnJvd3NlcnMpIGRvIG5vdCBzdXBwb3J0IHRoZSBgY2FsZW5kYXJgIG9wdGlvbgogICAgICAvLyBBbmQgd2UgY3VycmVudGx5IG9ubHkgc3VwcG9ydCB0aGUgZ3JlZ29yaWFuIGNhbGVuZGFyCiAgICAgIHZhciBmbXQgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdCh0aGlzLmNvbXB1dGVkTG9jYWxlLCB7CiAgICAgICAgY2FsZW5kYXI6IENBTEVOREFSX0dSRUdPUlkKICAgICAgfSk7CiAgICAgIHZhciBjYWxlbmRhciA9IGZtdC5yZXNvbHZlZE9wdGlvbnMoKS5jYWxlbmRhcjsKICAgICAgdmFyIGxvY2FsZSA9IGZtdC5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGU7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZjogbWFpbmx5IGZvciBJRSAxMSBhbmQgYSBmZXcgb3RoZXIgYnJvd3NlcnMsIGhhcmQgdG8gdGVzdCBpbiBKU0RPTSAqLwoKICAgICAgaWYgKGNhbGVuZGFyICE9PSBDQUxFTkRBUl9HUkVHT1JZKSB7CiAgICAgICAgLy8gRW5zdXJlIHRoZSBsb2NhbGUgcmVxdWVzdHMgdGhlIGdyZWdvcmlhbiBjYWxlbmRhcgogICAgICAgIC8vIE1haW5seSBmb3IgSUUgMTEsIGFuZCBjdXJyZW50bHkgd2UgY2FuJ3QgaGFuZGxlIG5vbi1ncmVnb3JpYW4gY2FsZW5kYXJzCiAgICAgICAgLy8gVE9ETzogU2hvdWxkIHdlIGFsd2F5cyByZXR1cm4gdGhpcyB2YWx1ZT8KICAgICAgICBsb2NhbGUgPSBsb2NhbGUucmVwbGFjZSgvLXUtLiskL2ksICcnKS5jb25jYXQoJy11LWNhLWdyZWdvcnknKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGxvY2FsZTsKICAgIH0sCiAgICBjYWxlbmRhclllYXI6IGZ1bmN0aW9uIGNhbGVuZGFyWWVhcigpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlRGF0ZS5nZXRGdWxsWWVhcigpOwogICAgfSwKICAgIGNhbGVuZGFyTW9udGg6IGZ1bmN0aW9uIGNhbGVuZGFyTW9udGgoKSB7CiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZURhdGUuZ2V0TW9udGgoKTsKICAgIH0sCiAgICBjYWxlbmRhckZpcnN0RGF5OiBmdW5jdGlvbiBjYWxlbmRhckZpcnN0RGF5KCkgewogICAgICAvLyBXZSBzZXQgdGhlIHRpbWUgZm9yIHRoaXMgZGF0ZSB0byAxMnBtIHRvIHdvcmsgYXJvdW5kCiAgICAgIC8vIGRhdGUgZm9ybWF0dGluZyBpc3N1ZXMgaW4gRmlyZWZveCBhbmQgU2FmYXJpCiAgICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Jvb3RzdHJhcC12dWUvYm9vdHN0cmFwLXZ1ZS9pc3N1ZXMvNTgxOAogICAgICByZXR1cm4gY3JlYXRlRGF0ZSh0aGlzLmNhbGVuZGFyWWVhciwgdGhpcy5jYWxlbmRhck1vbnRoLCAxLCAxMik7CiAgICB9LAogICAgY2FsZW5kYXJEYXlzSW5Nb250aDogZnVuY3Rpb24gY2FsZW5kYXJEYXlzSW5Nb250aCgpIHsKICAgICAgLy8gV2UgY3JlYXRlIGEgbmV3IGRhdGUgYXMgdG8gbm90IG11dGF0ZSB0aGUgb3JpZ2luYWwKICAgICAgdmFyIGRhdGUgPSBjcmVhdGVEYXRlKHRoaXMuY2FsZW5kYXJGaXJzdERheSk7CiAgICAgIGRhdGUuc2V0TW9udGgoZGF0ZS5nZXRNb250aCgpICsgMSwgMCk7CiAgICAgIHJldHVybiBkYXRlLmdldERhdGUoKTsKICAgIH0sCiAgICBjb21wdXRlZFZhcmlhbnQ6IGZ1bmN0aW9uIGNvbXB1dGVkVmFyaWFudCgpIHsKICAgICAgcmV0dXJuICJidG4tIi5jb25jYXQodGhpcy5zZWxlY3RlZFZhcmlhbnQgfHwgJ3ByaW1hcnknKTsKICAgIH0sCiAgICBjb21wdXRlZFRvZGF5VmFyaWFudDogZnVuY3Rpb24gY29tcHV0ZWRUb2RheVZhcmlhbnQoKSB7CiAgICAgIHJldHVybiAiYnRuLW91dGxpbmUtIi5jb25jYXQodGhpcy50b2RheVZhcmlhbnQgfHwgdGhpcy5zZWxlY3RlZFZhcmlhbnQgfHwgJ3ByaW1hcnknKTsKICAgIH0sCiAgICBjb21wdXRlZE5hdkJ1dHRvblZhcmlhbnQ6IGZ1bmN0aW9uIGNvbXB1dGVkTmF2QnV0dG9uVmFyaWFudCgpIHsKICAgICAgcmV0dXJuICJidG4tb3V0bGluZS0iLmNvbmNhdCh0aGlzLm5hdkJ1dHRvblZhcmlhbnQgfHwgJ3ByaW1hcnknKTsKICAgIH0sCiAgICBpc1JUTDogZnVuY3Rpb24gaXNSVEwoKSB7CiAgICAgIC8vIGB0cnVlYCBpZiB0aGUgbGFuZ3VhZ2UgcmVxdWVzdGVkIGlzIFJUTAogICAgICB2YXIgZGlyID0gdG9TdHJpbmcodGhpcy5kaXJlY3Rpb24pLnRvTG93ZXJDYXNlKCk7CgogICAgICBpZiAoZGlyID09PSAncnRsJykgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0gZWxzZSBpZiAoZGlyID09PSAnbHRyJykgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICByZXR1cm4gaXNMb2NhbGVSVEwodGhpcy5jb21wdXRlZExvY2FsZSk7CiAgICB9LAogICAgY29udGV4dDogZnVuY3Rpb24gY29udGV4dCgpIHsKICAgICAgdmFyIHNlbGVjdGVkWU1EID0gdGhpcy5zZWxlY3RlZFlNRCwKICAgICAgICAgIGFjdGl2ZVlNRCA9IHRoaXMuYWN0aXZlWU1EOwogICAgICB2YXIgc2VsZWN0ZWREYXRlID0gcGFyc2VZTUQoc2VsZWN0ZWRZTUQpOwogICAgICB2YXIgYWN0aXZlRGF0ZSA9IHBhcnNlWU1EKGFjdGl2ZVlNRCk7CiAgICAgIHJldHVybiB7CiAgICAgICAgLy8gVGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIGB2LW1vZGVsYAogICAgICAgIHNlbGVjdGVkWU1EOiBzZWxlY3RlZFlNRCwKICAgICAgICBzZWxlY3RlZERhdGU6IHNlbGVjdGVkRGF0ZSwKICAgICAgICBzZWxlY3RlZEZvcm1hdHRlZDogc2VsZWN0ZWREYXRlID8gdGhpcy5mb3JtYXREYXRlU3RyaW5nKHNlbGVjdGVkRGF0ZSkgOiB0aGlzLmxhYmVsTm9EYXRlU2VsZWN0ZWQsCiAgICAgICAgLy8gV2hpY2ggZGF0ZSBjZWxsIGlzIGNvbnNpZGVyZWQgYWN0aXZlIGR1ZSB0byBuYXZpZ2F0aW9uCiAgICAgICAgYWN0aXZlWU1EOiBhY3RpdmVZTUQsCiAgICAgICAgYWN0aXZlRGF0ZTogYWN0aXZlRGF0ZSwKICAgICAgICBhY3RpdmVGb3JtYXR0ZWQ6IGFjdGl2ZURhdGUgPyB0aGlzLmZvcm1hdERhdGVTdHJpbmcoYWN0aXZlRGF0ZSkgOiAnJywKICAgICAgICAvLyBgdHJ1ZWAgaWYgdGhlIGRhdGUgaXMgZGlzYWJsZWQgKHdoZW4gdXNpbmcga2V5Ym9hcmQgbmF2aWdhdGlvbikKICAgICAgICBkaXNhYmxlZDogdGhpcy5kYXRlRGlzYWJsZWQoYWN0aXZlRGF0ZSksCiAgICAgICAgLy8gTG9jYWxlcyB1c2VkIGluIGZvcm1hdHRpbmcgZGF0ZXMKICAgICAgICBsb2NhbGU6IHRoaXMuY29tcHV0ZWRMb2NhbGUsCiAgICAgICAgY2FsZW5kYXJMb2NhbGU6IHRoaXMuY2FsZW5kYXJMb2NhbGUsCiAgICAgICAgcnRsOiB0aGlzLmlzUlRMCiAgICAgIH07CiAgICB9LAogICAgLy8gQ29tcHV0ZWQgcHJvcHMgdGhhdCByZXR1cm4gYSBmdW5jdGlvbiByZWZlcmVuY2UKICAgIGRhdGVPdXRPZlJhbmdlOiBmdW5jdGlvbiBkYXRlT3V0T2ZSYW5nZSgpIHsKICAgICAgLy8gQ2hlY2sgd2hldGhlciBhIGRhdGUgaXMgd2l0aGluIHRoZSBtaW4vbWF4IHJhbmdlCiAgICAgIC8vIFJldHVybnMgYSBuZXcgZnVuY3Rpb24gcmVmIGlmIHRoZSBwb3BzIGNoYW5nZQogICAgICAvLyBXZSBkbyB0aGlzIGFzIHdlIG5lZWQgdG8gdHJpZ2dlciB0aGUgY2FsZW5kYXIgY29tcHV0ZWQgcHJvcAogICAgICAvLyB0byB1cGRhdGUgd2hlbiB0aGVzZSBwcm9wcyB1cGRhdGUKICAgICAgdmFyIG1pbiA9IHRoaXMuY29tcHV0ZWRNaW4sCiAgICAgICAgICBtYXggPSB0aGlzLmNvbXB1dGVkTWF4OwogICAgICByZXR1cm4gZnVuY3Rpb24gKGRhdGUpIHsKICAgICAgICAvLyBIYW5kbGUgYm90aCBgWVlZWS1NTS1ERGAgYW5kIGBEYXRlYCBvYmplY3RzCiAgICAgICAgZGF0ZSA9IHBhcnNlWU1EKGRhdGUpOwogICAgICAgIHJldHVybiBtaW4gJiYgZGF0ZSA8IG1pbiB8fCBtYXggJiYgZGF0ZSA+IG1heDsKICAgICAgfTsKICAgIH0sCiAgICBkYXRlRGlzYWJsZWQ6IGZ1bmN0aW9uIGRhdGVEaXNhYmxlZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIGZvciB2YWxpZGF0aW5nIGlmIGEgZGF0ZSBpcyB3aXRoaW4gcmFuZ2UKICAgICAgLy8gV2UgZ3JhYiB0aGlzIHZhcmlhYmxlcyBmaXJzdCB0byBlbnN1cmUgYSBuZXcgZnVuY3Rpb24gcmVmCiAgICAgIC8vIGlzIGdlbmVyYXRlZCB3aGVuIHRoZSBwcm9wcyB2YWx1ZSBjaGFuZ2VzCiAgICAgIC8vIFdlIGRvIHRoaXMgYXMgd2UgbmVlZCB0byB0cmlnZ2VyIHRoZSBjYWxlbmRhciBjb21wdXRlZCBwcm9wCiAgICAgIC8vIHRvIHVwZGF0ZSB3aGVuIHRoZXNlIHByb3BzIHVwZGF0ZQoKCiAgICAgIHZhciByYW5nZUZuID0gdGhpcy5kYXRlT3V0T2ZSYW5nZTsgLy8gUmV0dXJuIHRoZSBmdW5jdGlvbiByZWYKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkgewogICAgICAgIC8vIEhhbmRsZSBib3RoIGBZWVlZLU1NLUREYCBhbmQgYERhdGVgIG9iamVjdHMKICAgICAgICBkYXRlID0gcGFyc2VZTUQoZGF0ZSk7CiAgICAgICAgdmFyIHltZCA9IGZvcm1hdFlNRChkYXRlKTsKICAgICAgICByZXR1cm4gISEocmFuZ2VGbihkYXRlKSB8fCBfdGhpcy5jb21wdXRlZERhdGVEaXNhYmxlZEZuKHltZCwgZGF0ZSkpOwogICAgICB9OwogICAgfSwKICAgIC8vIENvbXB1dGVkIHByb3BzIHRoYXQgcmV0dXJuIGRhdGUgZm9ybWF0dGVyIGZ1bmN0aW9ucwogICAgZm9ybWF0RGF0ZVN0cmluZzogZnVuY3Rpb24gZm9ybWF0RGF0ZVN0cmluZygpIHsKICAgICAgLy8gUmV0dXJucyBhIGRhdGUgZm9ybWF0dGVyIGZ1bmN0aW9uCiAgICAgIHJldHVybiBjcmVhdGVEYXRlRm9ybWF0dGVyKHRoaXMuY2FsZW5kYXJMb2NhbGUsIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7CiAgICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgeWVhciwgbW9udGgsIGRheSBzaG93biBmb3Igc2NyZWVuIHJlYWRlcnMvQVJJQQogICAgICAgIC8vIElmIHVzZXJzIHJlYWxseSB3YW50IHRvIGxlYXZlIG9uZSBvZiB0aGVzZSBvdXQsIHRoZXkgY2FuCiAgICAgICAgLy8gcGFzcyBgdW5kZWZpbmVkYCBmb3IgdGhlIHByb3BlcnR5IHZhbHVlCiAgICAgICAgeWVhcjogREFURV9GT1JNQVRfTlVNRVJJQywKICAgICAgICBtb250aDogREFURV9GT1JNQVRfMl9ESUdJVCwKICAgICAgICBkYXk6IERBVEVfRk9STUFUXzJfRElHSVQKICAgICAgfSwgdGhpcy5kYXRlRm9ybWF0T3B0aW9ucyksIHt9LCB7CiAgICAgICAgLy8gRW5zdXJlIGhvdXJzL21pbnV0ZXMvc2Vjb25kcyBhcmUgbm90IHNob3duCiAgICAgICAgLy8gQXMgd2UgZG8gbm90IHN1cHBvcnQgdGhlIHRpbWUgcG9ydGlvbiAoeWV0KQogICAgICAgIGhvdXI6IHVuZGVmaW5lZCwKICAgICAgICBtaW51dGU6IHVuZGVmaW5lZCwKICAgICAgICBzZWNvbmQ6IHVuZGVmaW5lZCwKICAgICAgICAvLyBFbnN1cmUgY2FsZW5kYXIgaXMgZ3JlZ29yaWFuCiAgICAgICAgY2FsZW5kYXI6IENBTEVOREFSX0dSRUdPUlkKICAgICAgfSkpOwogICAgfSwKICAgIGZvcm1hdFllYXJNb250aDogZnVuY3Rpb24gZm9ybWF0WWVhck1vbnRoKCkgewogICAgICAvLyBSZXR1cm5zIGEgZGF0ZSBmb3JtYXR0ZXIgZnVuY3Rpb24KICAgICAgcmV0dXJuIGNyZWF0ZURhdGVGb3JtYXR0ZXIodGhpcy5jYWxlbmRhckxvY2FsZSwgewogICAgICAgIHllYXI6IERBVEVfRk9STUFUX05VTUVSSUMsCiAgICAgICAgbW9udGg6IENBTEVOREFSX0xPTkcsCiAgICAgICAgY2FsZW5kYXI6IENBTEVOREFSX0dSRUdPUlkKICAgICAgfSk7CiAgICB9LAogICAgZm9ybWF0V2Vla2RheU5hbWU6IGZ1bmN0aW9uIGZvcm1hdFdlZWtkYXlOYW1lKCkgewogICAgICAvLyBMb25nIHdlZWtkYXkgbmFtZSBmb3Igd2Vla2RheSBoZWFkZXIgYXJpYS1sYWJlbAogICAgICByZXR1cm4gY3JlYXRlRGF0ZUZvcm1hdHRlcih0aGlzLmNhbGVuZGFyTG9jYWxlLCB7CiAgICAgICAgd2Vla2RheTogQ0FMRU5EQVJfTE9ORywKICAgICAgICBjYWxlbmRhcjogQ0FMRU5EQVJfR1JFR09SWQogICAgICB9KTsKICAgIH0sCiAgICBmb3JtYXRXZWVrZGF5TmFtZVNob3J0OiBmdW5jdGlvbiBmb3JtYXRXZWVrZGF5TmFtZVNob3J0KCkgewogICAgICAvLyBXZWVrZGF5IGhlYWRlciBjZWxsIGZvcm1hdAogICAgICAvLyBkZWZhdWx0cyB0byAnc2hvcnQnIDMgbGV0dGVyIGRheXMsIHdoZXJlIHBvc3NpYmxlCiAgICAgIHJldHVybiBjcmVhdGVEYXRlRm9ybWF0dGVyKHRoaXMuY2FsZW5kYXJMb2NhbGUsIHsKICAgICAgICB3ZWVrZGF5OiB0aGlzLndlZWtkYXlIZWFkZXJGb3JtYXQgfHwgQ0FMRU5EQVJfU0hPUlQsCiAgICAgICAgY2FsZW5kYXI6IENBTEVOREFSX0dSRUdPUlkKICAgICAgfSk7CiAgICB9LAogICAgZm9ybWF0RGF5OiBmdW5jdGlvbiBmb3JtYXREYXkoKSB7CiAgICAgIC8vIENhbGVuZGFyIGdyaWQgZGF5IG51bWJlciBmb3JtYXR0ZXIKICAgICAgLy8gV2UgZG9uJ3QgdXNlIERhdGVUaW1lRm9ybWF0dGVyIGhlcmUgYXMgaXQgY2FuIHBsYWNlIGV4dHJhCiAgICAgIC8vIGNoYXJhY3RlcihzKSBhZnRlciB0aGUgbnVtYmVyIChpLmUgdGhlIGB6aGAgbG9jYWxlKQogICAgICB2YXIgbmYgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQoW3RoaXMuY29tcHV0ZWRMb2NhbGVdLCB7CiAgICAgICAgc3R5bGU6ICdkZWNpbWFsJywKICAgICAgICBtaW5pbXVtSW50ZWdlckRpZ2l0czogMSwKICAgICAgICBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDAsCiAgICAgICAgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAwLAogICAgICAgIG5vdGF0aW9uOiAnc3RhbmRhcmQnCiAgICAgIH0pOyAvLyBSZXR1cm4gYSBmb3JtYXR0ZXIgZnVuY3Rpb24gaW5zdGFuY2UKCiAgICAgIHJldHVybiBmdW5jdGlvbiAoZGF0ZSkgewogICAgICAgIHJldHVybiBuZi5mb3JtYXQoZGF0ZS5nZXREYXRlKCkpOwogICAgICB9OwogICAgfSwKICAgIC8vIERpc2FibGVkIHN0YXRlcyBmb3IgdGhlIG5hdiBidXR0b25zCiAgICBwcmV2RGVjYWRlRGlzYWJsZWQ6IGZ1bmN0aW9uIHByZXZEZWNhZGVEaXNhYmxlZCgpIHsKICAgICAgdmFyIG1pbiA9IHRoaXMuY29tcHV0ZWRNaW47CiAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkIHx8IG1pbiAmJiBsYXN0RGF0ZU9mTW9udGgob25lRGVjYWRlQWdvKHRoaXMuYWN0aXZlRGF0ZSkpIDwgbWluOwogICAgfSwKICAgIHByZXZZZWFyRGlzYWJsZWQ6IGZ1bmN0aW9uIHByZXZZZWFyRGlzYWJsZWQoKSB7CiAgICAgIHZhciBtaW4gPSB0aGlzLmNvbXB1dGVkTWluOwogICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZCB8fCBtaW4gJiYgbGFzdERhdGVPZk1vbnRoKG9uZVllYXJBZ28odGhpcy5hY3RpdmVEYXRlKSkgPCBtaW47CiAgICB9LAogICAgcHJldk1vbnRoRGlzYWJsZWQ6IGZ1bmN0aW9uIHByZXZNb250aERpc2FibGVkKCkgewogICAgICB2YXIgbWluID0gdGhpcy5jb21wdXRlZE1pbjsKICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgfHwgbWluICYmIGxhc3REYXRlT2ZNb250aChvbmVNb250aEFnbyh0aGlzLmFjdGl2ZURhdGUpKSA8IG1pbjsKICAgIH0sCiAgICB0aGlzTW9udGhEaXNhYmxlZDogZnVuY3Rpb24gdGhpc01vbnRoRGlzYWJsZWQoKSB7CiAgICAgIC8vIFRPRE86IFdlIGNvdWxkL3Nob3VsZCBjaGVjayBpZiB0b2RheSBpcyBvdXQgb2YgcmFuZ2UKICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQ7CiAgICB9LAogICAgbmV4dE1vbnRoRGlzYWJsZWQ6IGZ1bmN0aW9uIG5leHRNb250aERpc2FibGVkKCkgewogICAgICB2YXIgbWF4ID0gdGhpcy5jb21wdXRlZE1heDsKICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgfHwgbWF4ICYmIGZpcnN0RGF0ZU9mTW9udGgob25lTW9udGhBaGVhZCh0aGlzLmFjdGl2ZURhdGUpKSA+IG1heDsKICAgIH0sCiAgICBuZXh0WWVhckRpc2FibGVkOiBmdW5jdGlvbiBuZXh0WWVhckRpc2FibGVkKCkgewogICAgICB2YXIgbWF4ID0gdGhpcy5jb21wdXRlZE1heDsKICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgfHwgbWF4ICYmIGZpcnN0RGF0ZU9mTW9udGgob25lWWVhckFoZWFkKHRoaXMuYWN0aXZlRGF0ZSkpID4gbWF4OwogICAgfSwKICAgIG5leHREZWNhZGVEaXNhYmxlZDogZnVuY3Rpb24gbmV4dERlY2FkZURpc2FibGVkKCkgewogICAgICB2YXIgbWF4ID0gdGhpcy5jb21wdXRlZE1heDsKICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgfHwgbWF4ICYmIGZpcnN0RGF0ZU9mTW9udGgob25lRGVjYWRlQWhlYWQodGhpcy5hY3RpdmVEYXRlKSkgPiBtYXg7CiAgICB9LAogICAgLy8gQ2FsZW5kYXIgZGF0ZXMgZ2VuZXJhdGlvbgogICAgY2FsZW5kYXI6IGZ1bmN0aW9uIGNhbGVuZGFyKCkgewogICAgICB2YXIgbWF0cml4ID0gW107CiAgICAgIHZhciBmaXJzdERheSA9IHRoaXMuY2FsZW5kYXJGaXJzdERheTsKICAgICAgdmFyIGNhbGVuZGFyWWVhciA9IGZpcnN0RGF5LmdldEZ1bGxZZWFyKCk7CiAgICAgIHZhciBjYWxlbmRhck1vbnRoID0gZmlyc3REYXkuZ2V0TW9udGgoKTsKICAgICAgdmFyIGRheXNJbk1vbnRoID0gdGhpcy5jYWxlbmRhckRheXNJbk1vbnRoOwogICAgICB2YXIgc3RhcnRJbmRleCA9IGZpcnN0RGF5LmdldERheSgpOyAvLyBgMGAuLmA2YAoKICAgICAgdmFyIHdlZWtPZmZzZXQgPSAodGhpcy5jb21wdXRlZFdlZWtTdGFydHMgPiBzdGFydEluZGV4ID8gNyA6IDApIC0gdGhpcy5jb21wdXRlZFdlZWtTdGFydHM7IC8vIEJ1aWxkIHRoZSBjYWxlbmRhciBtYXRyaXgKCiAgICAgIHZhciBjdXJyZW50RGF5ID0gMCAtIHdlZWtPZmZzZXQgLSBzdGFydEluZGV4OwoKICAgICAgZm9yICh2YXIgd2VlayA9IDA7IHdlZWsgPCA2ICYmIGN1cnJlbnREYXkgPCBkYXlzSW5Nb250aDsgd2VlaysrKSB7CiAgICAgICAgLy8gRm9yIGVhY2ggd2VlawogICAgICAgIG1hdHJpeFt3ZWVrXSA9IFtdOyAvLyBUaGUgZm9sbG93aW5nIGNvdWxkIGJlIGEgbWFwIGZ1bmN0aW9uCgogICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgNzsgaisrKSB7CiAgICAgICAgICAvLyBGb3IgZWFjaCBkYXkgaW4gd2VlawogICAgICAgICAgY3VycmVudERheSsrOwogICAgICAgICAgdmFyIGRhdGUgPSBjcmVhdGVEYXRlKGNhbGVuZGFyWWVhciwgY2FsZW5kYXJNb250aCwgY3VycmVudERheSk7CiAgICAgICAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCk7CiAgICAgICAgICB2YXIgZGF5WU1EID0gZm9ybWF0WU1EKGRhdGUpOwogICAgICAgICAgdmFyIGRheURpc2FibGVkID0gdGhpcy5kYXRlRGlzYWJsZWQoZGF0ZSk7IC8vIFRPRE86IFRoaXMgY291bGQgYmUgYSBub3JtYWxpemVyIG1ldGhvZAoKICAgICAgICAgIHZhciBkYXRlSW5mbyA9IHRoaXMuY29tcHV0ZWREYXRlSW5mb0ZuKGRheVlNRCwgcGFyc2VZTUQoZGF5WU1EKSk7CiAgICAgICAgICBkYXRlSW5mbyA9IGlzU3RyaW5nKGRhdGVJbmZvKSB8fCBpc0FycmF5KGRhdGVJbmZvKSA/CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgICAgewogICAgICAgICAgICAiY2xhc3MiOiBkYXRlSW5mbwogICAgICAgICAgfSA6IGlzUGxhaW5PYmplY3QoZGF0ZUluZm8pID8gX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAgICJjbGFzcyI6ICcnCiAgICAgICAgICB9LCBkYXRlSW5mbykgOgogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgICAgIHsKICAgICAgICAgICAgImNsYXNzIjogJycKICAgICAgICAgIH07CiAgICAgICAgICBtYXRyaXhbd2Vla10ucHVzaCh7CiAgICAgICAgICAgIHltZDogZGF5WU1ELAogICAgICAgICAgICAvLyBDZWxsIGNvbnRlbnQKICAgICAgICAgICAgZGF5OiB0aGlzLmZvcm1hdERheShkYXRlKSwKICAgICAgICAgICAgbGFiZWw6IHRoaXMuZm9ybWF0RGF0ZVN0cmluZyhkYXRlKSwKICAgICAgICAgICAgLy8gRmxhZ3MgZm9yIHN0eWxpbmcKICAgICAgICAgICAgaXNUaGlzTW9udGg6IG1vbnRoID09PSBjYWxlbmRhck1vbnRoLAogICAgICAgICAgICBpc0Rpc2FibGVkOiBkYXlEaXNhYmxlZCwKICAgICAgICAgICAgLy8gVE9ETzogSGFuZGxlIG90aGVyIGRhdGVJbmZvIHByb3BlcnRpZXMgc3VjaCBhcyBub3Rlcy9ldmVudHMKICAgICAgICAgICAgaW5mbzogZGF0ZUluZm8KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIG1hdHJpeDsKICAgIH0sCiAgICBjYWxlbmRhckhlYWRpbmdzOiBmdW5jdGlvbiBjYWxlbmRhckhlYWRpbmdzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLmNhbGVuZGFyWzBdLm1hcChmdW5jdGlvbiAoZCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0ZXh0OiBfdGhpczIuZm9ybWF0V2Vla2RheU5hbWVTaG9ydChwYXJzZVlNRChkLnltZCkpLAogICAgICAgICAgbGFiZWw6IF90aGlzMi5mb3JtYXRXZWVrZGF5TmFtZShwYXJzZVlNRChkLnltZCkpCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9CiAgfSwKICB3YXRjaDogKF93YXRjaCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCBNT0RFTF9QUk9QX05BTUUsIGZ1bmN0aW9uIChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIHZhciBzZWxlY3RlZCA9IGZvcm1hdFlNRChuZXdWYWx1ZSkgfHwgJyc7CiAgICB2YXIgb2xkID0gZm9ybWF0WU1EKG9sZFZhbHVlKSB8fCAnJzsKCiAgICBpZiAoIWRhdGVzRXF1YWwoc2VsZWN0ZWQsIG9sZCkpIHsKICAgICAgdGhpcy5hY3RpdmVZTUQgPSBzZWxlY3RlZCB8fCB0aGlzLmFjdGl2ZVlNRDsKICAgICAgdGhpcy5zZWxlY3RlZFlNRCA9IHNlbGVjdGVkOwogICAgfQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAic2VsZWN0ZWRZTUQiLCBmdW5jdGlvbiBzZWxlY3RlZFlNRChuZXdZTUQsIG9sZFlNRCkgewogICAgLy8gVE9ETzoKICAgIC8vICAgU2hvdWxkIHdlIGNvbXBhcmUgdG8gYGZvcm1hdFlNRCh0aGlzLnZhbHVlKWAgYW5kIGVtaXQKICAgIC8vICAgb25seSBpZiB0aGV5IGFyZSBkaWZmZXJlbnQ/CiAgICBpZiAobmV3WU1EICE9PSBvbGRZTUQpIHsKICAgICAgdGhpcy4kZW1pdChNT0RFTF9FVkVOVF9OQU1FLCB0aGlzLnZhbHVlQXNEYXRlID8gcGFyc2VZTUQobmV3WU1EKSB8fCBudWxsIDogbmV3WU1EIHx8ICcnKTsKICAgIH0KICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgImNvbnRleHQiLCBmdW5jdGlvbiBjb250ZXh0KG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgaWYgKCFsb29zZUVxdWFsKG5ld1ZhbHVlLCBvbGRWYWx1ZSkpIHsKICAgICAgdGhpcy4kZW1pdChFVkVOVF9OQU1FX0NPTlRFWFQsIG5ld1ZhbHVlKTsKICAgIH0KICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgImhpZGRlbiIsIGZ1bmN0aW9uIGhpZGRlbihuZXdWYWx1ZSkgewogICAgLy8gUmVzZXQgdGhlIGFjdGl2ZSBmb2N1c2VkIGRheSB3aGVuIGhpZGRlbgogICAgdGhpcy5hY3RpdmVZTUQgPSB0aGlzLnNlbGVjdGVkWU1EIHx8IGZvcm1hdFlNRCh0aGlzW01PREVMX1BST1BfTkFNRV0gfHwgdGhpcy5jb25zdHJhaW5EYXRlKHRoaXMuaW5pdGlhbERhdGUgfHwgdGhpcy5nZXRUb2RheSgpKSk7IC8vIEVuYWJsZS9kaXNhYmxlIHRoZSBsaXZlIHJlZ2lvbnMKCiAgICB0aGlzLnNldExpdmUoIW5ld1ZhbHVlKTsKICB9KSwgX3dhdGNoKSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBfdGhpczMuJGVtaXQoRVZFTlRfTkFNRV9DT05URVhULCBfdGhpczMuY29udGV4dCk7CiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNldExpdmUodHJ1ZSk7CiAgfSwKCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uIGFjdGl2YXRlZCgpIHsKICAgIHRoaXMuc2V0TGl2ZSh0cnVlKTsKICB9LAoKICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogIGRlYWN0aXZhdGVkOiBmdW5jdGlvbiBkZWFjdGl2YXRlZCgpIHsKICAgIHRoaXMuc2V0TGl2ZShmYWxzZSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5zZXRMaXZlKGZhbHNlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIFB1YmxpYyBtZXRob2QocykKICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHsKICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgYXR0ZW1wdEZvY3VzKHRoaXMuJHJlZnMuZ3JpZCk7CiAgICAgIH0KICAgIH0sCiAgICBibHVyOiBmdW5jdGlvbiBibHVyKCkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHsKICAgICAgICBhdHRlbXB0Qmx1cih0aGlzLiRyZWZzLmdyaWQpOwogICAgICB9CiAgICB9LAogICAgLy8gUHJpdmF0ZSBtZXRob2RzCiAgICBzZXRMaXZlOiBmdW5jdGlvbiBzZXRMaXZlKG9uKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgaWYgKG9uKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVxdWVzdEFGKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXM0LmlzTGl2ZSA9IHRydWU7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmlzTGl2ZSA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgZ2V0VG9kYXk6IGZ1bmN0aW9uIGdldFRvZGF5KCkgewogICAgICByZXR1cm4gcGFyc2VZTUQoY3JlYXRlRGF0ZSgpKTsKICAgIH0sCiAgICBjb25zdHJhaW5EYXRlOiBmdW5jdGlvbiBjb25zdHJhaW5EYXRlKGRhdGUpIHsKICAgICAgLy8gQ29uc3RyYWlucyBhIGRhdGUgYmV0d2VlbiBtaW4gYW5kIG1heAogICAgICAvLyByZXR1cm5zIGEgbmV3IGBEYXRlYCBvYmplY3QgaW5zdGFuY2UKICAgICAgcmV0dXJuIF9jb25zdHJhaW5EYXRlKGRhdGUsIHRoaXMuY29tcHV0ZWRNaW4sIHRoaXMuY29tcHV0ZWRNYXgpOwogICAgfSwKICAgIGVtaXRTZWxlY3RlZDogZnVuY3Rpb24gZW1pdFNlbGVjdGVkKGRhdGUpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7IC8vIFBlcmZvcm1lZCBpbiBhIGAkbmV4dFRpY2soKWAgdG8gKHByb2JhYmx5KSBlbnN1cmUKICAgICAgLy8gdGhlIGlucHV0IGV2ZW50IGhhcyBlbWl0dGVkIGZpcnN0CgoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNS4kZW1pdChFVkVOVF9OQU1FX1NFTEVDVEVELCBmb3JtYXRZTUQoZGF0ZSkgfHwgJycsIHBhcnNlWU1EKGRhdGUpIHx8IG51bGwpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBFdmVudCBoYW5kbGVycwogICAgc2V0R3JpZEZvY3VzRmxhZzogZnVuY3Rpb24gc2V0R3JpZEZvY3VzRmxhZyhldmVudCkgewogICAgICAvLyBTZXRzIHRoZSBncmlkSGFzRm9jdXMgZmxhZyB0byBtYWtlIGRhdGUgImJ1dHRvbiIgbG9vayBmb2N1c2VkCiAgICAgIHRoaXMuZ3JpZEhhc0ZvY3VzID0gIXRoaXMuZGlzYWJsZWQgJiYgZXZlbnQudHlwZSA9PT0gJ2ZvY3VzJzsKICAgIH0sCiAgICBvbktleWRvd25XcmFwcGVyOiBmdW5jdGlvbiBvbktleWRvd25XcmFwcGVyKGV2ZW50KSB7CiAgICAgIC8vIENhbGVuZGFyIGtleWJvYXJkIG5hdmlnYXRpb24KICAgICAgLy8gSGFuZGxlcyBQQUdFVVAvUEFHRURPV04vRU5EL0hPTUUvTEVGVC9VUC9SSUdIVC9ET1dOCiAgICAgIC8vIEZvY3VzZXMgZ3JpZCBhZnRlciB1cGRhdGluZwogICAgICBpZiAodGhpcy5ub0tleU5hdikgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgYWx0S2V5ID0gZXZlbnQuYWx0S2V5LAogICAgICAgICAgY3RybEtleSA9IGV2ZW50LmN0cmxLZXksCiAgICAgICAgICBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTsKCiAgICAgIGlmICghYXJyYXlJbmNsdWRlcyhbQ09ERV9QQUdFVVAsIENPREVfUEFHRURPV04sIENPREVfRU5ELCBDT0RFX0hPTUUsIENPREVfTEVGVCwgQ09ERV9VUCwgQ09ERV9SSUdIVCwgQ09ERV9ET1dOXSwga2V5Q29kZSkpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc3RvcEV2ZW50KGV2ZW50KTsKICAgICAgdmFyIGFjdGl2ZURhdGUgPSBjcmVhdGVEYXRlKHRoaXMuYWN0aXZlRGF0ZSk7CiAgICAgIHZhciBjaGVja0RhdGUgPSBjcmVhdGVEYXRlKHRoaXMuYWN0aXZlRGF0ZSk7CiAgICAgIHZhciBkYXkgPSBhY3RpdmVEYXRlLmdldERhdGUoKTsKICAgICAgdmFyIGNvbnN0cmFpbmVkVG9kYXkgPSB0aGlzLmNvbnN0cmFpbkRhdGUodGhpcy5nZXRUb2RheSgpKTsKICAgICAgdmFyIGlzUlRMID0gdGhpcy5pc1JUTDsKCiAgICAgIGlmIChrZXlDb2RlID09PSBDT0RFX1BBR0VVUCkgewogICAgICAgIC8vIFBBR0VVUCAtIFByZXZpb3VzIG1vbnRoL3llYXIKICAgICAgICBhY3RpdmVEYXRlID0gKGFsdEtleSA/IGN0cmxLZXkgPyBvbmVEZWNhZGVBZ28gOiBvbmVZZWFyQWdvIDogb25lTW9udGhBZ28pKGFjdGl2ZURhdGUpOyAvLyBXZSBjaGVjayB0aGUgZmlyc3QgZGF5IG9mIG1vbnRoIHRvIGJlIGluIHJhZ2UKCiAgICAgICAgY2hlY2tEYXRlID0gY3JlYXRlRGF0ZShhY3RpdmVEYXRlKTsKICAgICAgICBjaGVja0RhdGUuc2V0RGF0ZSgxKTsKICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBDT0RFX1BBR0VET1dOKSB7CiAgICAgICAgLy8gUEFHRURPV04gLSBOZXh0IG1vbnRoL3llYXIKICAgICAgICBhY3RpdmVEYXRlID0gKGFsdEtleSA/IGN0cmxLZXkgPyBvbmVEZWNhZGVBaGVhZCA6IG9uZVllYXJBaGVhZCA6IG9uZU1vbnRoQWhlYWQpKGFjdGl2ZURhdGUpOyAvLyBXZSBjaGVjayB0aGUgbGFzdCBkYXkgb2YgbW9udGggdG8gYmUgaW4gcmFnZQoKICAgICAgICBjaGVja0RhdGUgPSBjcmVhdGVEYXRlKGFjdGl2ZURhdGUpOwogICAgICAgIGNoZWNrRGF0ZS5zZXRNb250aChjaGVja0RhdGUuZ2V0TW9udGgoKSArIDEpOwogICAgICAgIGNoZWNrRGF0ZS5zZXREYXRlKDApOwogICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IENPREVfTEVGVCkgewogICAgICAgIC8vIExFRlQgLSBQcmV2aW91cyBkYXkgKG9yIG5leHQgZGF5IGZvciBSVEwpCiAgICAgICAgYWN0aXZlRGF0ZS5zZXREYXRlKGRheSArIChpc1JUTCA/IDEgOiAtMSkpOwogICAgICAgIGFjdGl2ZURhdGUgPSB0aGlzLmNvbnN0cmFpbkRhdGUoYWN0aXZlRGF0ZSk7CiAgICAgICAgY2hlY2tEYXRlID0gYWN0aXZlRGF0ZTsKICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBDT0RFX1JJR0hUKSB7CiAgICAgICAgLy8gUklHSFQgLSBOZXh0IGRheSAob3IgcHJldmlvdXMgZGF5IGZvciBSVEwpCiAgICAgICAgYWN0aXZlRGF0ZS5zZXREYXRlKGRheSArIChpc1JUTCA/IC0xIDogMSkpOwogICAgICAgIGFjdGl2ZURhdGUgPSB0aGlzLmNvbnN0cmFpbkRhdGUoYWN0aXZlRGF0ZSk7CiAgICAgICAgY2hlY2tEYXRlID0gYWN0aXZlRGF0ZTsKICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBDT0RFX1VQKSB7CiAgICAgICAgLy8gVVAgLSBQcmV2aW91cyB3ZWVrCiAgICAgICAgYWN0aXZlRGF0ZS5zZXREYXRlKGRheSAtIDcpOwogICAgICAgIGFjdGl2ZURhdGUgPSB0aGlzLmNvbnN0cmFpbkRhdGUoYWN0aXZlRGF0ZSk7CiAgICAgICAgY2hlY2tEYXRlID0gYWN0aXZlRGF0ZTsKICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBDT0RFX0RPV04pIHsKICAgICAgICAvLyBET1dOIC0gTmV4dCB3ZWVrCiAgICAgICAgYWN0aXZlRGF0ZS5zZXREYXRlKGRheSArIDcpOwogICAgICAgIGFjdGl2ZURhdGUgPSB0aGlzLmNvbnN0cmFpbkRhdGUoYWN0aXZlRGF0ZSk7CiAgICAgICAgY2hlY2tEYXRlID0gYWN0aXZlRGF0ZTsKICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBDT0RFX0hPTUUpIHsKICAgICAgICAvLyBIT01FIC0gVG9kYXkKICAgICAgICBhY3RpdmVEYXRlID0gY29uc3RyYWluZWRUb2RheTsKICAgICAgICBjaGVja0RhdGUgPSBhY3RpdmVEYXRlOwogICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IENPREVfRU5EKSB7CiAgICAgICAgLy8gRU5EIC0gU2VsZWN0ZWQgZGF0ZSwgb3IgdG9kYXkgaWYgbm8gc2VsZWN0ZWQgZGF0ZQogICAgICAgIGFjdGl2ZURhdGUgPSBwYXJzZVlNRCh0aGlzLnNlbGVjdGVkRGF0ZSkgfHwgY29uc3RyYWluZWRUb2RheTsKICAgICAgICBjaGVja0RhdGUgPSBhY3RpdmVEYXRlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuZGF0ZU91dE9mUmFuZ2UoY2hlY2tEYXRlKSAmJiAhZGF0ZXNFcXVhbChhY3RpdmVEYXRlLCB0aGlzLmFjdGl2ZURhdGUpKSB7CiAgICAgICAgLy8gV2Ugb25seSBqdW1wIHRvIGRhdGUgaWYgd2l0aGluIG1pbi9tYXgKICAgICAgICAvLyBXZSBkb24ndCBjaGVjayBmb3IgaW5kaXZpZHVhbCBkaXNhYmxlZCBkYXRlcyB0aG91Z2ggKHZpYSB1c2VyIGZ1bmN0aW9uKQogICAgICAgIHRoaXMuYWN0aXZlWU1EID0gZm9ybWF0WU1EKGFjdGl2ZURhdGUpOwogICAgICB9IC8vIEVuc3VyZSBncmlkIGlzIGZvY3VzZWQKCgogICAgICB0aGlzLmZvY3VzKCk7CiAgICB9LAogICAgb25LZXlkb3duR3JpZDogZnVuY3Rpb24gb25LZXlkb3duR3JpZChldmVudCkgewogICAgICAvLyBQcmVzc2luZyBlbnRlci9zcGFjZSBvbiBncmlkIHRvIHNlbGVjdCBhY3RpdmUgZGF0ZQogICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7CiAgICAgIHZhciBhY3RpdmVEYXRlID0gdGhpcy5hY3RpdmVEYXRlOwoKICAgICAgaWYgKGtleUNvZGUgPT09IENPREVfRU5URVIgfHwga2V5Q29kZSA9PT0gQ09ERV9TUEFDRSkgewogICAgICAgIHN0b3BFdmVudChldmVudCk7CgogICAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiAhdGhpcy5yZWFkb25seSAmJiAhdGhpcy5kYXRlRGlzYWJsZWQoYWN0aXZlRGF0ZSkpIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRZTUQgPSBmb3JtYXRZTUQoYWN0aXZlRGF0ZSk7CiAgICAgICAgICB0aGlzLmVtaXRTZWxlY3RlZChhY3RpdmVEYXRlKTsKICAgICAgICB9IC8vIEVuc3VyZSBncmlkIGlzIGZvY3VzZWQKCgogICAgICAgIHRoaXMuZm9jdXMoKTsKICAgICAgfQogICAgfSwKICAgIG9uQ2xpY2tEYXk6IGZ1bmN0aW9uIG9uQ2xpY2tEYXkoZGF5KSB7CiAgICAgIC8vIENsaWNraW5nIG9uIGEgZGF0ZSAiYnV0dG9uIiB0byBzZWxlY3QgaXQKICAgICAgdmFyIHNlbGVjdGVkRGF0ZSA9IHRoaXMuc2VsZWN0ZWREYXRlLAogICAgICAgICAgYWN0aXZlRGF0ZSA9IHRoaXMuYWN0aXZlRGF0ZTsKICAgICAgdmFyIGNsaWNrZWREYXRlID0gcGFyc2VZTUQoZGF5LnltZCk7CgogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgIWRheS5pc0Rpc2FibGVkICYmICF0aGlzLmRhdGVEaXNhYmxlZChjbGlja2VkRGF0ZSkpIHsKICAgICAgICBpZiAoIXRoaXMucmVhZG9ubHkpIHsKICAgICAgICAgIC8vIElmIHJlYWRvbmx5IG1vZGUsIHdlIGRvbid0IHNldCB0aGUgc2VsZWN0ZWQgZGF0ZSwganVzdCB0aGUgYWN0aXZlIGRhdGUKICAgICAgICAgIC8vIElmIHRoZSBjbGlja2VkIGRhdGUgaXMgZXF1YWwgdG8gdGhlIGFscmVhZHkgc2VsZWN0ZWQgZGF0ZSwgd2UgZG9uJ3QgdXBkYXRlIHRoZSBtb2RlbAogICAgICAgICAgdGhpcy5zZWxlY3RlZFlNRCA9IGZvcm1hdFlNRChkYXRlc0VxdWFsKGNsaWNrZWREYXRlLCBzZWxlY3RlZERhdGUpID8gc2VsZWN0ZWREYXRlIDogY2xpY2tlZERhdGUpOwogICAgICAgICAgdGhpcy5lbWl0U2VsZWN0ZWQoY2xpY2tlZERhdGUpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5hY3RpdmVZTUQgPSBmb3JtYXRZTUQoZGF0ZXNFcXVhbChjbGlja2VkRGF0ZSwgYWN0aXZlRGF0ZSkgPyBhY3RpdmVEYXRlIDogY3JlYXRlRGF0ZShjbGlja2VkRGF0ZSkpOyAvLyBFbnN1cmUgZ3JpZCBpcyBmb2N1c2VkCgogICAgICAgIHRoaXMuZm9jdXMoKTsKICAgICAgfQogICAgfSwKICAgIGdvdG9QcmV2RGVjYWRlOiBmdW5jdGlvbiBnb3RvUHJldkRlY2FkZSgpIHsKICAgICAgdGhpcy5hY3RpdmVZTUQgPSBmb3JtYXRZTUQodGhpcy5jb25zdHJhaW5EYXRlKG9uZURlY2FkZUFnbyh0aGlzLmFjdGl2ZURhdGUpKSk7CiAgICB9LAogICAgZ290b1ByZXZZZWFyOiBmdW5jdGlvbiBnb3RvUHJldlllYXIoKSB7CiAgICAgIHRoaXMuYWN0aXZlWU1EID0gZm9ybWF0WU1EKHRoaXMuY29uc3RyYWluRGF0ZShvbmVZZWFyQWdvKHRoaXMuYWN0aXZlRGF0ZSkpKTsKICAgIH0sCiAgICBnb3RvUHJldk1vbnRoOiBmdW5jdGlvbiBnb3RvUHJldk1vbnRoKCkgewogICAgICB0aGlzLmFjdGl2ZVlNRCA9IGZvcm1hdFlNRCh0aGlzLmNvbnN0cmFpbkRhdGUob25lTW9udGhBZ28odGhpcy5hY3RpdmVEYXRlKSkpOwogICAgfSwKICAgIGdvdG9DdXJyZW50TW9udGg6IGZ1bmN0aW9uIGdvdG9DdXJyZW50TW9udGgoKSB7CiAgICAgIC8vIFRPRE86IE1heWJlIHRoaXMgZ290byBkYXRlIHNob3VsZCBiZSBjb25maWd1cmFibGU/CiAgICAgIHRoaXMuYWN0aXZlWU1EID0gZm9ybWF0WU1EKHRoaXMuY29uc3RyYWluRGF0ZSh0aGlzLmdldFRvZGF5KCkpKTsKICAgIH0sCiAgICBnb3RvTmV4dE1vbnRoOiBmdW5jdGlvbiBnb3RvTmV4dE1vbnRoKCkgewogICAgICB0aGlzLmFjdGl2ZVlNRCA9IGZvcm1hdFlNRCh0aGlzLmNvbnN0cmFpbkRhdGUob25lTW9udGhBaGVhZCh0aGlzLmFjdGl2ZURhdGUpKSk7CiAgICB9LAogICAgZ290b05leHRZZWFyOiBmdW5jdGlvbiBnb3RvTmV4dFllYXIoKSB7CiAgICAgIHRoaXMuYWN0aXZlWU1EID0gZm9ybWF0WU1EKHRoaXMuY29uc3RyYWluRGF0ZShvbmVZZWFyQWhlYWQodGhpcy5hY3RpdmVEYXRlKSkpOwogICAgfSwKICAgIGdvdG9OZXh0RGVjYWRlOiBmdW5jdGlvbiBnb3RvTmV4dERlY2FkZSgpIHsKICAgICAgdGhpcy5hY3RpdmVZTUQgPSBmb3JtYXRZTUQodGhpcy5jb25zdHJhaW5EYXRlKG9uZURlY2FkZUFoZWFkKHRoaXMuYWN0aXZlRGF0ZSkpKTsKICAgIH0sCiAgICBvbkhlYWRlckNsaWNrOiBmdW5jdGlvbiBvbkhlYWRlckNsaWNrKCkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHsKICAgICAgICB0aGlzLmFjdGl2ZVlNRCA9IHRoaXMuc2VsZWN0ZWRZTUQgfHwgZm9ybWF0WU1EKHRoaXMuZ2V0VG9kYXkoKSk7CiAgICAgICAgdGhpcy5mb2N1cygpOwogICAgICB9CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICB2YXIgX3RoaXM2ID0gdGhpczsgLy8gSWYgYGhpZGRlbmAgcHJvcCBpcyBzZXQsIHJlbmRlciBqdXN0IGEgcGxhY2Vob2xkZXIgbm9kZQoKCiAgICBpZiAodGhpcy5oaWRkZW4pIHsKICAgICAgcmV0dXJuIGgoKTsKICAgIH0KCiAgICB2YXIgdmFsdWVJZCA9IHRoaXMudmFsdWVJZCwKICAgICAgICB3aWRnZXRJZCA9IHRoaXMud2lkZ2V0SWQsCiAgICAgICAgbmF2SWQgPSB0aGlzLm5hdklkLAogICAgICAgIGdyaWRJZCA9IHRoaXMuZ3JpZElkLAogICAgICAgIGdyaWRDYXB0aW9uSWQgPSB0aGlzLmdyaWRDYXB0aW9uSWQsCiAgICAgICAgZ3JpZEhlbHBJZCA9IHRoaXMuZ3JpZEhlbHBJZCwKICAgICAgICBhY3RpdmVJZCA9IHRoaXMuYWN0aXZlSWQsCiAgICAgICAgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkLAogICAgICAgIG5vS2V5TmF2ID0gdGhpcy5ub0tleU5hdiwKICAgICAgICBpc0xpdmUgPSB0aGlzLmlzTGl2ZSwKICAgICAgICBpc1JUTCA9IHRoaXMuaXNSVEwsCiAgICAgICAgYWN0aXZlWU1EID0gdGhpcy5hY3RpdmVZTUQsCiAgICAgICAgc2VsZWN0ZWRZTUQgPSB0aGlzLnNlbGVjdGVkWU1ELAogICAgICAgIHNhZmVJZCA9IHRoaXMuc2FmZUlkOwogICAgdmFyIGhpZGVEZWNhZGVOYXYgPSAhdGhpcy5zaG93RGVjYWRlTmF2OwogICAgdmFyIHRvZGF5WU1EID0gZm9ybWF0WU1EKHRoaXMuZ2V0VG9kYXkoKSk7CiAgICB2YXIgaGlnaGxpZ2h0VG9kYXkgPSAhdGhpcy5ub0hpZ2hsaWdodFRvZGF5OyAvLyBIZWFkZXIgc2hvd2luZyBjdXJyZW50IHNlbGVjdGVkIGRhdGUKCiAgICB2YXIgJGhlYWRlciA9IGgoJ291dHB1dCcsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdmb3JtLWNvbnRyb2wgZm9ybS1jb250cm9sLXNtIHRleHQtY2VudGVyJywKICAgICAgImNsYXNzIjogewogICAgICAgICd0ZXh0LW11dGVkJzogZGlzYWJsZWQsCiAgICAgICAgcmVhZG9ubHk6IHRoaXMucmVhZG9ubHkgfHwgZGlzYWJsZWQKICAgICAgfSwKICAgICAgYXR0cnM6IHsKICAgICAgICBpZDogdmFsdWVJZCwKICAgICAgICAiZm9yIjogZ3JpZElkLAogICAgICAgIHJvbGU6ICdzdGF0dXMnLAogICAgICAgIHRhYmluZGV4OiBkaXNhYmxlZCA/IG51bGwgOiAnLTEnLAogICAgICAgIC8vIE1haW5seSBmb3IgdGVzdGluZyBwdXJwb3NlcywgYXMgd2UgZG8gbm90IGtub3cKICAgICAgICAvLyB0aGUgZXhhY3QgZm9ybWF0IGBJbnRsYCB3aWxsIGZvcm1hdCB0aGUgZGF0ZSBzdHJpbmcKICAgICAgICAnZGF0YS1zZWxlY3RlZCc6IHRvU3RyaW5nKHNlbGVjdGVkWU1EKSwKICAgICAgICAvLyBXZSB3YWl0IHVudGlsIGFmdGVyIG1vdW50IHRvIGVuYWJsZSBgYXJpYS1saXZlYAogICAgICAgIC8vIHRvIHByZXZlbnQgaW5pdGlhbCBhbm5vdW5jZW1lbnQgb24gcGFnZSByZW5kZXIKICAgICAgICAnYXJpYS1saXZlJzogaXNMaXZlID8gJ3BvbGl0ZScgOiAnb2ZmJywKICAgICAgICAnYXJpYS1hdG9taWMnOiBpc0xpdmUgPyAndHJ1ZScgOiBudWxsCiAgICAgIH0sCiAgICAgIG9uOiB7CiAgICAgICAgLy8gVHJhbnNmZXIgZm9jdXMvY2xpY2sgdG8gZm9jdXMgZ3JpZAogICAgICAgIC8vIGFuZCBmb2N1cyBhY3RpdmUgZGF0ZSAob3IgdG9kYXkgaWYgbm8gc2VsZWN0aW9uKQogICAgICAgIGNsaWNrOiB0aGlzLm9uSGVhZGVyQ2xpY2ssCiAgICAgICAgZm9jdXM6IHRoaXMub25IZWFkZXJDbGljawogICAgICB9CiAgICB9LCB0aGlzLnNlbGVjdGVkRGF0ZSA/IFsvLyBXZSB1c2UgYGJkaWAgZWxlbWVudHMgaGVyZSBpbiBjYXNlIHRoZSBsYWJlbCBkb2Vzbid0IG1hdGNoIHRoZSBsb2NhbGUKICAgIC8vIEFsdGhvdWdoIElFIDExIGRvZXMgbm90IGRlYWwgd2l0aCA8QkRJPiBhdCBhbGwgKGVxdWl2YWxlbnQgdG8gYSBzcGFuKQogICAgaCgnYmRpJywgewogICAgICBzdGF0aWNDbGFzczogJ3NyLW9ubHknCiAgICB9LCAiICgiLmNvbmNhdCh0b1N0cmluZyh0aGlzLmxhYmVsU2VsZWN0ZWQpLCAiKSAiKSksIGgoJ2JkaScsIHRoaXMuZm9ybWF0RGF0ZVN0cmluZyh0aGlzLnNlbGVjdGVkRGF0ZSkpXSA6IHRoaXMubGFiZWxOb0RhdGVTZWxlY3RlZCB8fCAiXHhBMCIgLy8gJyZuYnNwOycKICAgICk7CiAgICAkaGVhZGVyID0gaCgnaGVhZGVyJywgewogICAgICBzdGF0aWNDbGFzczogJ2ItY2FsZW5kYXItaGVhZGVyJywKICAgICAgImNsYXNzIjogewogICAgICAgICdzci1vbmx5JzogdGhpcy5oaWRlSGVhZGVyCiAgICAgIH0sCiAgICAgIGF0dHJzOiB7CiAgICAgICAgdGl0bGU6IHRoaXMuc2VsZWN0ZWREYXRlID8gdGhpcy5sYWJlbFNlbGVjdGVkRGF0ZSB8fCBudWxsIDogbnVsbAogICAgICB9CiAgICB9LCBbJGhlYWRlcl0pOyAvLyBDb250ZW50IGZvciB0aGUgZGF0ZSBuYXZpZ2F0aW9uIGJ1dHRvbnMKCiAgICB2YXIgbmF2U2NvcGUgPSB7CiAgICAgIGlzUlRMOiBpc1JUTAogICAgfTsKICAgIHZhciBuYXZQcm9wcyA9IHsKICAgICAgc2hpZnRWOiAwLjUKICAgIH07CgogICAgdmFyIG5hdlByZXZQcm9wcyA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbmF2UHJvcHMpLCB7fSwgewogICAgICBmbGlwSDogaXNSVEwKICAgIH0pOwoKICAgIHZhciBuYXZOZXh0UHJvcHMgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG5hdlByb3BzKSwge30sIHsKICAgICAgZmxpcEg6ICFpc1JUTAogICAgfSk7CgogICAgdmFyICRwcmV2RGVjYWRlSWNvbiA9IHRoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfTkFWX1BFVl9ERUNBREUsIG5hdlNjb3BlKSB8fCBoKEJJY29uQ2hldnJvbkJhckxlZnQsIHsKICAgICAgcHJvcHM6IG5hdlByZXZQcm9wcwogICAgfSk7CiAgICB2YXIgJHByZXZZZWFySWNvbiA9IHRoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfTkFWX1BFVl9ZRUFSLCBuYXZTY29wZSkgfHwgaChCSWNvbkNoZXZyb25Eb3VibGVMZWZ0LCB7CiAgICAgIHByb3BzOiBuYXZQcmV2UHJvcHMKICAgIH0pOwogICAgdmFyICRwcmV2TW9udGhJY29uID0gdGhpcy5ub3JtYWxpemVTbG90KFNMT1RfTkFNRV9OQVZfUEVWX01PTlRILCBuYXZTY29wZSkgfHwgaChCSWNvbkNoZXZyb25MZWZ0LCB7CiAgICAgIHByb3BzOiBuYXZQcmV2UHJvcHMKICAgIH0pOwogICAgdmFyICR0aGlzTW9udGhJY29uID0gdGhpcy5ub3JtYWxpemVTbG90KFNMT1RfTkFNRV9OQVZfVEhJU19NT05USCwgbmF2U2NvcGUpIHx8IGgoQkljb25DaXJjbGVGaWxsLCB7CiAgICAgIHByb3BzOiBuYXZQcm9wcwogICAgfSk7CiAgICB2YXIgJG5leHRNb250aEljb24gPSB0aGlzLm5vcm1hbGl6ZVNsb3QoU0xPVF9OQU1FX05BVl9ORVhUX01PTlRILCBuYXZTY29wZSkgfHwgaChCSWNvbkNoZXZyb25MZWZ0LCB7CiAgICAgIHByb3BzOiBuYXZOZXh0UHJvcHMKICAgIH0pOwogICAgdmFyICRuZXh0WWVhckljb24gPSB0aGlzLm5vcm1hbGl6ZVNsb3QoU0xPVF9OQU1FX05BVl9ORVhUX1lFQVIsIG5hdlNjb3BlKSB8fCBoKEJJY29uQ2hldnJvbkRvdWJsZUxlZnQsIHsKICAgICAgcHJvcHM6IG5hdk5leHRQcm9wcwogICAgfSk7CiAgICB2YXIgJG5leHREZWNhZGVJY29uID0gdGhpcy5ub3JtYWxpemVTbG90KFNMT1RfTkFNRV9OQVZfTkVYVF9ERUNBREUsIG5hdlNjb3BlKSB8fCBoKEJJY29uQ2hldnJvbkJhckxlZnQsIHsKICAgICAgcHJvcHM6IG5hdk5leHRQcm9wcwogICAgfSk7IC8vIFV0aWxpdHkgdG8gY3JlYXRlIHRoZSBkYXRlIG5hdmlnYXRpb24gYnV0dG9ucwoKICAgIHZhciBtYWtlTmF2QnRuID0gZnVuY3Rpb24gbWFrZU5hdkJ0bihjb250ZW50LCBsYWJlbCwgaGFuZGxlciwgYnRuRGlzYWJsZWQsIHNob3J0Y3V0KSB7CiAgICAgIHJldHVybiBoKCdidXR0b24nLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdidG4gYnRuLXNtIGJvcmRlci0wIGZsZXgtZmlsbCcsCiAgICAgICAgImNsYXNzIjogW190aGlzNi5jb21wdXRlZE5hdkJ1dHRvblZhcmlhbnQsIHsKICAgICAgICAgIGRpc2FibGVkOiBidG5EaXNhYmxlZAogICAgICAgIH1dLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICB0aXRsZTogbGFiZWwgfHwgbnVsbCwKICAgICAgICAgIHR5cGU6ICdidXR0b24nLAogICAgICAgICAgdGFiaW5kZXg6IG5vS2V5TmF2ID8gJy0xJyA6IG51bGwsCiAgICAgICAgICAnYXJpYS1sYWJlbCc6IGxhYmVsIHx8IG51bGwsCiAgICAgICAgICAnYXJpYS1kaXNhYmxlZCc6IGJ0bkRpc2FibGVkID8gJ3RydWUnIDogbnVsbCwKICAgICAgICAgICdhcmlhLWtleXNob3J0Y3V0cyc6IHNob3J0Y3V0IHx8IG51bGwKICAgICAgICB9LAogICAgICAgIG9uOiBidG5EaXNhYmxlZCA/IHt9IDogewogICAgICAgICAgY2xpY2s6IGhhbmRsZXIKICAgICAgICB9CiAgICAgIH0sIFtoKCdkaXYnLCB7CiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJwogICAgICAgIH0KICAgICAgfSwgW2NvbnRlbnRdKV0pOwogICAgfTsgLy8gR2VuZXJhdGUgdGhlIGRhdGUgbmF2aWdhdGlvbiBidXR0b25zCgoKICAgIHZhciAkbmF2ID0gaCgnZGl2JywgewogICAgICBzdGF0aWNDbGFzczogJ2ItY2FsZW5kYXItbmF2IGQtZmxleCcsCiAgICAgIGF0dHJzOiB7CiAgICAgICAgaWQ6IG5hdklkLAogICAgICAgIHJvbGU6ICdncm91cCcsCiAgICAgICAgdGFiaW5kZXg6IG5vS2V5TmF2ID8gJy0xJyA6IG51bGwsCiAgICAgICAgJ2FyaWEtaGlkZGVuJzogZGlzYWJsZWQgPyAndHJ1ZScgOiBudWxsLAogICAgICAgICdhcmlhLWxhYmVsJzogdGhpcy5sYWJlbE5hdiB8fCBudWxsLAogICAgICAgICdhcmlhLWNvbnRyb2xzJzogZ3JpZElkCiAgICAgIH0KICAgIH0sIFtoaWRlRGVjYWRlTmF2ID8gaCgpIDogbWFrZU5hdkJ0bigkcHJldkRlY2FkZUljb24sIHRoaXMubGFiZWxQcmV2RGVjYWRlLCB0aGlzLmdvdG9QcmV2RGVjYWRlLCB0aGlzLnByZXZEZWNhZGVEaXNhYmxlZCwgJ0N0cmwrQWx0K1BhZ2VEb3duJyksIG1ha2VOYXZCdG4oJHByZXZZZWFySWNvbiwgdGhpcy5sYWJlbFByZXZZZWFyLCB0aGlzLmdvdG9QcmV2WWVhciwgdGhpcy5wcmV2WWVhckRpc2FibGVkLCAnQWx0K1BhZ2VEb3duJyksIG1ha2VOYXZCdG4oJHByZXZNb250aEljb24sIHRoaXMubGFiZWxQcmV2TW9udGgsIHRoaXMuZ290b1ByZXZNb250aCwgdGhpcy5wcmV2TW9udGhEaXNhYmxlZCwgJ1BhZ2VEb3duJyksIG1ha2VOYXZCdG4oJHRoaXNNb250aEljb24sIHRoaXMubGFiZWxDdXJyZW50TW9udGgsIHRoaXMuZ290b0N1cnJlbnRNb250aCwgdGhpcy50aGlzTW9udGhEaXNhYmxlZCwgJ0hvbWUnKSwgbWFrZU5hdkJ0bigkbmV4dE1vbnRoSWNvbiwgdGhpcy5sYWJlbE5leHRNb250aCwgdGhpcy5nb3RvTmV4dE1vbnRoLCB0aGlzLm5leHRNb250aERpc2FibGVkLCAnUGFnZVVwJyksIG1ha2VOYXZCdG4oJG5leHRZZWFySWNvbiwgdGhpcy5sYWJlbE5leHRZZWFyLCB0aGlzLmdvdG9OZXh0WWVhciwgdGhpcy5uZXh0WWVhckRpc2FibGVkLCAnQWx0K1BhZ2VVcCcpLCBoaWRlRGVjYWRlTmF2ID8gaCgpIDogbWFrZU5hdkJ0bigkbmV4dERlY2FkZUljb24sIHRoaXMubGFiZWxOZXh0RGVjYWRlLCB0aGlzLmdvdG9OZXh0RGVjYWRlLCB0aGlzLm5leHREZWNhZGVEaXNhYmxlZCwgJ0N0cmwrQWx0K1BhZ2VVcCcpXSk7IC8vIENhcHRpb24gZm9yIGNhbGVuZGFyIGdyaWQKCiAgICB2YXIgJGdyaWRDYXB0aW9uID0gaCgnaGVhZGVyJywgewogICAgICBzdGF0aWNDbGFzczogJ2ItY2FsZW5kYXItZ3JpZC1jYXB0aW9uIHRleHQtY2VudGVyIGZvbnQtd2VpZ2h0LWJvbGQnLAogICAgICAiY2xhc3MiOiB7CiAgICAgICAgJ3RleHQtbXV0ZWQnOiBkaXNhYmxlZAogICAgICB9LAogICAgICBhdHRyczogewogICAgICAgIGlkOiBncmlkQ2FwdGlvbklkLAogICAgICAgICdhcmlhLWxpdmUnOiBpc0xpdmUgPyAncG9saXRlJyA6IG51bGwsCiAgICAgICAgJ2FyaWEtYXRvbWljJzogaXNMaXZlID8gJ3RydWUnIDogbnVsbAogICAgICB9LAogICAgICBrZXk6ICdncmlkLWNhcHRpb24nCiAgICB9LCB0aGlzLmZvcm1hdFllYXJNb250aCh0aGlzLmNhbGVuZGFyRmlyc3REYXkpKTsgLy8gQ2FsZW5kYXIgd2Vla2RheSBoZWFkaW5ncwoKICAgIHZhciAkZ3JpZFdlZWtEYXlzID0gaCgnZGl2JywgewogICAgICBzdGF0aWNDbGFzczogJ2ItY2FsZW5kYXItZ3JpZC13ZWVrZGF5cyByb3cgbm8tZ3V0dGVycyBib3JkZXItYm90dG9tJywKICAgICAgYXR0cnM6IHsKICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScKICAgICAgfQogICAgfSwgdGhpcy5jYWxlbmRhckhlYWRpbmdzLm1hcChmdW5jdGlvbiAoZCwgaWR4KSB7CiAgICAgIHJldHVybiBoKCdzbWFsbCcsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2NvbCB0ZXh0LXRydW5jYXRlJywKICAgICAgICAiY2xhc3MiOiB7CiAgICAgICAgICAndGV4dC1tdXRlZCc6IGRpc2FibGVkCiAgICAgICAgfSwKICAgICAgICBhdHRyczogewogICAgICAgICAgdGl0bGU6IGQubGFiZWwgPT09IGQudGV4dCA/IG51bGwgOiBkLmxhYmVsLAogICAgICAgICAgJ2FyaWEtbGFiZWwnOiBkLmxhYmVsCiAgICAgICAgfSwKICAgICAgICBrZXk6IGlkeAogICAgICB9LCBkLnRleHQpOwogICAgfSkpOyAvLyBDYWxlbmRhciBkYXkgZ3JpZAoKICAgIHZhciAkZ3JpZEJvZHkgPSB0aGlzLmNhbGVuZGFyLm1hcChmdW5jdGlvbiAod2VlaykgewogICAgICB2YXIgJGNlbGxzID0gd2Vlay5tYXAoZnVuY3Rpb24gKGRheSwgZEluZGV4KSB7CiAgICAgICAgdmFyIF9jbGFzczsKCiAgICAgICAgdmFyIGlzU2VsZWN0ZWQgPSBkYXkueW1kID09PSBzZWxlY3RlZFlNRDsKICAgICAgICB2YXIgaXNBY3RpdmUgPSBkYXkueW1kID09PSBhY3RpdmVZTUQ7CiAgICAgICAgdmFyIGlzVG9kYXkgPSBkYXkueW1kID09PSB0b2RheVlNRDsKICAgICAgICB2YXIgaWRDZWxsID0gc2FmZUlkKCJfY2VsbC0iLmNvbmNhdChkYXkueW1kLCAiXyIpKTsgLy8gImZha2UiIGJ1dHRvbgoKICAgICAgICB2YXIgJGJ0biA9IGgoJ3NwYW4nLCB7CiAgICAgICAgICBzdGF0aWNDbGFzczogJ2J0biBib3JkZXItMCByb3VuZGVkLWNpcmNsZSB0ZXh0LW5vd3JhcCcsCiAgICAgICAgICAvLyBTaG91bGQgd2UgYWRkIHNvbWUgY2xhc3NlcyB0byBzaWduaWZ5IGlmIHRvZGF5L3NlbGVjdGVkL2V0Yz8KICAgICAgICAgICJjbGFzcyI6IChfY2xhc3MgPSB7CiAgICAgICAgICAgIC8vIEdpdmUgdGhlIGZha2UgYnV0dG9uIGEgZm9jdXMgcmluZwogICAgICAgICAgICBmb2N1czogaXNBY3RpdmUgJiYgX3RoaXM2LmdyaWRIYXNGb2N1cywKICAgICAgICAgICAgLy8gU3R5bGluZwogICAgICAgICAgICBkaXNhYmxlZDogZGF5LmlzRGlzYWJsZWQgfHwgZGlzYWJsZWQsCiAgICAgICAgICAgIGFjdGl2ZTogaXNTZWxlY3RlZAogICAgICAgICAgfSwgX2RlZmluZVByb3BlcnR5KF9jbGFzcywgX3RoaXM2LmNvbXB1dGVkVmFyaWFudCwgaXNTZWxlY3RlZCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3MsIF90aGlzNi5jb21wdXRlZFRvZGF5VmFyaWFudCwgaXNUb2RheSAmJiBoaWdobGlnaHRUb2RheSAmJiAhaXNTZWxlY3RlZCAmJiBkYXkuaXNUaGlzTW9udGgpLCBfZGVmaW5lUHJvcGVydHkoX2NsYXNzLCAnYnRuLW91dGxpbmUtbGlnaHQnLCAhKGlzVG9kYXkgJiYgaGlnaGxpZ2h0VG9kYXkpICYmICFpc1NlbGVjdGVkICYmICFpc0FjdGl2ZSksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3MsICdidG4tbGlnaHQnLCAhKGlzVG9kYXkgJiYgaGlnaGxpZ2h0VG9kYXkpICYmICFpc1NlbGVjdGVkICYmIGlzQWN0aXZlKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzcywgJ3RleHQtbXV0ZWQnLCAhZGF5LmlzVGhpc01vbnRoICYmICFpc1NlbGVjdGVkKSwgX2RlZmluZVByb3BlcnR5KF9jbGFzcywgJ3RleHQtZGFyaycsICEoaXNUb2RheSAmJiBoaWdobGlnaHRUb2RheSkgJiYgIWlzU2VsZWN0ZWQgJiYgIWlzQWN0aXZlICYmIGRheS5pc1RoaXNNb250aCksIF9kZWZpbmVQcm9wZXJ0eShfY2xhc3MsICdmb250LXdlaWdodC1ib2xkJywgKGlzU2VsZWN0ZWQgfHwgZGF5LmlzVGhpc01vbnRoKSAmJiAhZGF5LmlzRGlzYWJsZWQpLCBfY2xhc3MpLAogICAgICAgICAgb246IHsKICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICAgIHJldHVybiBfdGhpczYub25DbGlja0RheShkYXkpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgZGF5LmRheSk7CiAgICAgICAgcmV0dXJuIGgoJ2RpdicsIC8vIENlbGwgd2l0aCBidXR0b24KICAgICAgICB7CiAgICAgICAgICBzdGF0aWNDbGFzczogJ2NvbCBwLTAnLAogICAgICAgICAgImNsYXNzIjogZGF5LmlzRGlzYWJsZWQgPyAnYmctbGlnaHQnIDogZGF5LmluZm9bImNsYXNzIl0gfHwgJycsCiAgICAgICAgICBhdHRyczogewogICAgICAgICAgICBpZDogaWRDZWxsLAogICAgICAgICAgICByb2xlOiAnYnV0dG9uJywKICAgICAgICAgICAgJ2RhdGEtZGF0ZSc6IGRheS55bWQsCiAgICAgICAgICAgIC8vIFByaW1hcmlseSBmb3IgdGVzdGluZyBwdXJwb3NlcwogICAgICAgICAgICAvLyBPbmx5IGRheXMgaW4gdGhlIG1vbnRoIGFyZSBwcmVzZW50ZWQgYXMgYnV0dG9ucyB0byBzY3JlZW4gcmVhZGVycwogICAgICAgICAgICAnYXJpYS1oaWRkZW4nOiBkYXkuaXNUaGlzTW9udGggPyBudWxsIDogJ3RydWUnLAogICAgICAgICAgICAnYXJpYS1kaXNhYmxlZCc6IGRheS5pc0Rpc2FibGVkIHx8IGRpc2FibGVkID8gJ3RydWUnIDogbnVsbCwKICAgICAgICAgICAgJ2FyaWEtbGFiZWwnOiBbZGF5LmxhYmVsLCBpc1NlbGVjdGVkID8gIigiLmNvbmNhdChfdGhpczYubGFiZWxTZWxlY3RlZCwgIikiKSA6IG51bGwsIGlzVG9kYXkgPyAiKCIuY29uY2F0KF90aGlzNi5sYWJlbFRvZGF5LCAiKSIpIDogbnVsbF0uZmlsdGVyKGlkZW50aXR5KS5qb2luKCcgJyksCiAgICAgICAgICAgIC8vIE5WREEgZG9lc24ndCBjb252ZXkgYGFyaWEtc2VsZWN0ZWRgLCBidXQgZG9lcyBgYXJpYS1jdXJyZW50YCwKICAgICAgICAgICAgLy8gQ2hyb21lVm94IGRvZXNuJ3QgY29udmV5IGBhcmlhLWN1cnJlbnRgLCBidXQgZG9lcyBgYXJpYS1zZWxlY3RlZGAsCiAgICAgICAgICAgIC8vIHNvIHdlIHNldCBib3RoIGF0dHJpYnV0ZXMgZm9yIHJvYnVzdG5lc3MKICAgICAgICAgICAgJ2FyaWEtc2VsZWN0ZWQnOiBpc1NlbGVjdGVkID8gJ3RydWUnIDogbnVsbCwKICAgICAgICAgICAgJ2FyaWEtY3VycmVudCc6IGlzU2VsZWN0ZWQgPyAnZGF0ZScgOiBudWxsCiAgICAgICAgICB9LAogICAgICAgICAga2V5OiBkSW5kZXgKICAgICAgICB9LCBbJGJ0bl0pOwogICAgICB9KTsgLy8gUmV0dXJuIHRoZSB3ZWVrICJyb3ciCiAgICAgIC8vIFdlIHVzZSB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrcyBZTUQgdmFsdWUgYXMgYQogICAgICAvLyBrZXkgZm9yIGVmZmljaWVudCBET00gcGF0Y2hpbmcgLyBlbGVtZW50IHJlLXVzZQoKICAgICAgcmV0dXJuIGgoJ2RpdicsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3JvdyBuby1ndXR0ZXJzJywKICAgICAgICBrZXk6IHdlZWtbMF0ueW1kCiAgICAgIH0sICRjZWxscyk7CiAgICB9KTsKICAgICRncmlkQm9keSA9IGgoJ2RpdicsIHsKICAgICAgLy8gQSBrZXkgaXMgb25seSByZXF1aXJlZCBvbiB0aGUgYm9keSBpZiB3ZSBhZGQgaW4gdHJhbnNpdGlvbiBzdXBwb3J0CiAgICAgIHN0YXRpY0NsYXNzOiAnYi1jYWxlbmRhci1ncmlkLWJvZHknLAogICAgICBzdHlsZTogZGlzYWJsZWQgPyB7CiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnCiAgICAgIH0gOiB7fSAvLyBrZXk6IHRoaXMuYWN0aXZlWU1ELnNsaWNlKDAsIC0zKQoKICAgIH0sICRncmlkQm9keSk7CiAgICB2YXIgJGdyaWRIZWxwID0gaCgnZm9vdGVyJywgewogICAgICBzdGF0aWNDbGFzczogJ2ItY2FsZW5kYXItZ3JpZC1oZWxwIGJvcmRlci10b3Agc21hbGwgdGV4dC1tdXRlZCB0ZXh0LWNlbnRlciBiZy1saWdodCcsCiAgICAgIGF0dHJzOiB7CiAgICAgICAgaWQ6IGdyaWRIZWxwSWQKICAgICAgfQogICAgfSwgW2goJ2RpdicsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdzbWFsbCcKICAgIH0sIHRoaXMubGFiZWxIZWxwKV0pOwogICAgdmFyICRncmlkID0gaCgnZGl2JywgewogICAgICBzdGF0aWNDbGFzczogJ2ItY2FsZW5kYXItZ3JpZCBmb3JtLWNvbnRyb2wgaC1hdXRvIHRleHQtY2VudGVyJywKICAgICAgYXR0cnM6IHsKICAgICAgICBpZDogZ3JpZElkLAogICAgICAgIHJvbGU6ICdhcHBsaWNhdGlvbicsCiAgICAgICAgdGFiaW5kZXg6IG5vS2V5TmF2ID8gJy0xJyA6IGRpc2FibGVkID8gbnVsbCA6ICcwJywKICAgICAgICAnZGF0YS1tb250aCc6IGFjdGl2ZVlNRC5zbGljZSgwLCAtMyksCiAgICAgICAgLy8gYFlZWVktTU1gLCBtYWlubHkgZm9yIHRlc3RpbmcKICAgICAgICAnYXJpYS1yb2xlZGVzY3JpcHRpb24nOiB0aGlzLmxhYmVsQ2FsZW5kYXIgfHwgbnVsbCwKICAgICAgICAnYXJpYS1sYWJlbGxlZGJ5JzogZ3JpZENhcHRpb25JZCwKICAgICAgICAnYXJpYS1kZXNjcmliZWRieSc6IGdyaWRIZWxwSWQsCiAgICAgICAgLy8gYGFyaWEtcmVhZG9ubHlgIGlzIG5vdCBjb25zaWRlcmVkIHZhbGlkIG9uIGByb2xlPSJhcHBsaWNhdGlvbiJgCiAgICAgICAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLTEuMS8jYXJpYS1yZWFkb25seQogICAgICAgIC8vICdhcmlhLXJlYWRvbmx5JzogdGhpcy5yZWFkb25seSAmJiAhZGlzYWJsZWQgPyAndHJ1ZScgOiBudWxsLAogICAgICAgICdhcmlhLWRpc2FibGVkJzogZGlzYWJsZWQgPyAndHJ1ZScgOiBudWxsLAogICAgICAgICdhcmlhLWFjdGl2ZWRlc2NlbmRhbnQnOiBhY3RpdmVJZAogICAgICB9LAogICAgICBvbjogewogICAgICAgIGtleWRvd246IHRoaXMub25LZXlkb3duR3JpZCwKICAgICAgICBmb2N1czogdGhpcy5zZXRHcmlkRm9jdXNGbGFnLAogICAgICAgIGJsdXI6IHRoaXMuc2V0R3JpZEZvY3VzRmxhZwogICAgICB9LAogICAgICByZWY6ICdncmlkJwogICAgfSwgWyRncmlkQ2FwdGlvbiwgJGdyaWRXZWVrRGF5cywgJGdyaWRCb2R5LCAkZ3JpZEhlbHBdKTsgLy8gT3B0aW9uYWwgYm90dG9tIHNsb3QKCiAgICB2YXIgJHNsb3QgPSB0aGlzLm5vcm1hbGl6ZVNsb3QoKTsKICAgICRzbG90ID0gJHNsb3QgPyBoKCdmb290ZXInLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnYi1jYWxlbmRhci1mb290ZXInCiAgICB9LCAkc2xvdCkgOiBoKCk7CiAgICB2YXIgJHdpZGdldCA9IGgoJ2RpdicsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdiLWNhbGVuZGFyLWlubmVyJywKICAgICAgc3R5bGU6IHRoaXMuYmxvY2sgPyB7fSA6IHsKICAgICAgICB3aWR0aDogdGhpcy53aWR0aAogICAgICB9LAogICAgICBhdHRyczogewogICAgICAgIGlkOiB3aWRnZXRJZCwKICAgICAgICBkaXI6IGlzUlRMID8gJ3J0bCcgOiAnbHRyJywKICAgICAgICBsYW5nOiB0aGlzLmNvbXB1dGVkTG9jYWxlIHx8IG51bGwsCiAgICAgICAgcm9sZTogJ2dyb3VwJywKICAgICAgICAnYXJpYS1kaXNhYmxlZCc6IGRpc2FibGVkID8gJ3RydWUnIDogbnVsbCwKICAgICAgICAvLyBJZiBkYXRlcGlja2VyIGNvbnRyb2xzIGFuIGlucHV0LCB0aGlzIHdpbGwgc3BlY2lmeSB0aGUgSUQgb2YgdGhlIGlucHV0CiAgICAgICAgJ2FyaWEtY29udHJvbHMnOiB0aGlzLmFyaWFDb250cm9scyB8fCBudWxsLAogICAgICAgIC8vIFRoaXMgc2hvdWxkIGJlIGEgcHJvcCAoc28gaXQgY2FuIGJlIGNoYW5nZWQgdG8gRGF0ZSBwaWNrZXIsIGV0YywgbG9jYWxpemVkCiAgICAgICAgJ2FyaWEtcm9sZWRlc2NyaXB0aW9uJzogdGhpcy5yb2xlRGVzY3JpcHRpb24gfHwgbnVsbCwKICAgICAgICAnYXJpYS1kZXNjcmliZWRieSc6IFsvLyBTaG91bGQgdGhlIGF0dHIgKGlmIHByZXNlbnQpIGdvIGxhc3Q/CiAgICAgICAgLy8gT3Igc2hvdWxkIHRoaXMgYXR0ciBiZSBhIHByb3A/CiAgICAgICAgdGhpcy5idkF0dHJzWydhcmlhLWRlc2NyaWJlZGJ5J10sIHZhbHVlSWQsIGdyaWRIZWxwSWRdLmZpbHRlcihpZGVudGl0eSkuam9pbignICcpCiAgICAgIH0sCiAgICAgIG9uOiB7CiAgICAgICAga2V5ZG93bjogdGhpcy5vbktleWRvd25XcmFwcGVyCiAgICAgIH0KICAgIH0sIFskaGVhZGVyLCAkbmF2LCAkZ3JpZCwgJHNsb3RdKTsgLy8gV3JhcCBpbiBhbiBvdXRlciBkaXYgdGhhdCBjYW4gYmUgc3R5bGVkCgogICAgcmV0dXJuIGgoJ2RpdicsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdiLWNhbGVuZGFyJywKICAgICAgImNsYXNzIjogewogICAgICAgICdkLWJsb2NrJzogdGhpcy5ibG9jawogICAgICB9CiAgICB9LCBbJHdpZGdldF0pOwogIH0KfSk7"},{"version":3,"sources":["/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/calendar/calendar.js"],"names":["_watch","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","Vue","NAME_CALENDAR","CALENDAR_GREGORY","CALENDAR_LONG","CALENDAR_NARROW","CALENDAR_SHORT","DATE_FORMAT_2_DIGIT","DATE_FORMAT_NUMERIC","EVENT_NAME_CONTEXT","EVENT_NAME_SELECTED","CODE_DOWN","CODE_END","CODE_ENTER","CODE_HOME","CODE_LEFT","CODE_PAGEDOWN","CODE_PAGEUP","CODE_RIGHT","CODE_SPACE","CODE_UP","PROP_TYPE_ARRAY_STRING","PROP_TYPE_BOOLEAN","PROP_TYPE_DATE_STRING","PROP_TYPE_FUNCTION","PROP_TYPE_NUMBER_STRING","PROP_TYPE_OBJECT","PROP_TYPE_STRING","SLOT_NAME_NAV_NEXT_DECADE","SLOT_NAME_NAV_NEXT_MONTH","SLOT_NAME_NAV_NEXT_YEAR","SLOT_NAME_NAV_PEV_DECADE","SLOT_NAME_NAV_PEV_MONTH","SLOT_NAME_NAV_PEV_YEAR","SLOT_NAME_NAV_THIS_MONTH","arrayIncludes","concat","createDate","createDateFormatter","constrainDate","_constrainDate","datesEqual","firstDateOfMonth","formatYMD","lastDateOfMonth","oneMonthAgo","oneMonthAhead","oneYearAgo","oneYearAhead","oneDecadeAgo","oneDecadeAhead","parseYMD","resolveLocale","attemptBlur","attemptFocus","requestAF","stopEvent","identity","isArray","isPlainObject","isString","isLocaleRTL","looseEqual","mathMax","makeModelMixin","toInteger","sortKeys","hasPropFunction","makeProp","makePropsConfigurable","toString","attrsMixin","idMixin","props","idProps","normalizeSlotMixin","BIconChevronLeft","BIconChevronDoubleLeft","BIconChevronBarLeft","BIconCircleFill","_makeModelMixin","type","modelMixin","mixin","modelProps","MODEL_PROP_NAME","prop","MODEL_EVENT_NAME","event","ariaControls","block","dateDisabledFn","dateFormatOptions","year","month","day","weekday","dateInfoFn","direction","disabled","hidden","hideHeader","initialDate","labelCalendar","labelCurrentMonth","labelHelp","labelNav","labelNextDecade","labelNextMonth","labelNextYear","labelNoDateSelected","labelPrevDecade","labelPrevMonth","labelPrevYear","labelSelected","labelToday","locale","max","min","navButtonVariant","noHighlightToday","noKeyNav","readonly","roleDescription","selectedVariant","showDecadeNav","startWeekday","todayVariant","valueAsDate","weekdayHeaderFormat","width","BCalendar","extend","name","mixins","data","selected","selectedYMD","activeYMD","getToday","gridHasFocus","isLive","computed","valueId","safeId","widgetId","navId","gridId","gridCaptionId","gridHelpId","activeId","selectedDate","activeDate","computedMin","computedMax","computedWeekStarts","computedLocale","computedDateDisabledFn","computedDateInfoFn","calendarLocale","fmt","Intl","DateTimeFormat","calendar","resolvedOptions","replace","calendarYear","getFullYear","calendarMonth","getMonth","calendarFirstDay","calendarDaysInMonth","date","setMonth","getDate","computedVariant","computedTodayVariant","computedNavButtonVariant","isRTL","dir","toLowerCase","context","selectedFormatted","formatDateString","activeFormatted","dateDisabled","rtl","dateOutOfRange","_this","rangeFn","ymd","hour","undefined","minute","second","formatYearMonth","formatWeekdayName","formatWeekdayNameShort","formatDay","nf","NumberFormat","style","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","notation","format","prevDecadeDisabled","prevYearDisabled","prevMonthDisabled","thisMonthDisabled","nextMonthDisabled","nextYearDisabled","nextDecadeDisabled","matrix","firstDay","daysInMonth","startIndex","getDay","weekOffset","currentDay","week","j","dayYMD","dayDisabled","dateInfo","label","isThisMonth","isDisabled","info","calendarHeadings","_this2","map","d","text","watch","newValue","oldValue","old","newYMD","oldYMD","$emit","setLive","created","_this3","$nextTick","mounted","activated","deactivated","beforeDestroy","methods","focus","$refs","grid","blur","on","_this4","emitSelected","_this5","setGridFocusFlag","onKeydownWrapper","altKey","ctrlKey","keyCode","checkDate","constrainedToday","setDate","onKeydownGrid","onClickDay","clickedDate","gotoPrevDecade","gotoPrevYear","gotoPrevMonth","gotoCurrentMonth","gotoNextMonth","gotoNextYear","gotoNextDecade","onHeaderClick","render","h","_this6","hideDecadeNav","todayYMD","highlightToday","$header","staticClass","attrs","id","role","tabindex","click","title","labelSelectedDate","navScope","navProps","shiftV","navPrevProps","flipH","navNextProps","$prevDecadeIcon","normalizeSlot","$prevYearIcon","$prevMonthIcon","$thisMonthIcon","$nextMonthIcon","$nextYearIcon","$nextDecadeIcon","makeNavBtn","content","handler","btnDisabled","shortcut","$nav","$gridCaption","$gridWeekDays","idx","$gridBody","$cells","dIndex","_class","isSelected","isActive","isToday","idCell","$btn","active","join","pointerEvents","$gridHelp","$grid","slice","keydown","ref","$slot","$widget","lang","bvAttrs"],"mappings":"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","sourcesContent":["var _watch;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Vue } from '../../vue';\nimport { NAME_CALENDAR } from '../../constants/components';\nimport { CALENDAR_GREGORY, CALENDAR_LONG, CALENDAR_NARROW, CALENDAR_SHORT, DATE_FORMAT_2_DIGIT, DATE_FORMAT_NUMERIC } from '../../constants/date';\nimport { EVENT_NAME_CONTEXT, EVENT_NAME_SELECTED } from '../../constants/events';\nimport { CODE_DOWN, CODE_END, CODE_ENTER, CODE_HOME, CODE_LEFT, CODE_PAGEDOWN, CODE_PAGEUP, CODE_RIGHT, CODE_SPACE, CODE_UP } from '../../constants/key-codes';\nimport { PROP_TYPE_ARRAY_STRING, PROP_TYPE_BOOLEAN, PROP_TYPE_DATE_STRING, PROP_TYPE_FUNCTION, PROP_TYPE_NUMBER_STRING, PROP_TYPE_OBJECT, PROP_TYPE_STRING } from '../../constants/props';\nimport { SLOT_NAME_NAV_NEXT_DECADE, SLOT_NAME_NAV_NEXT_MONTH, SLOT_NAME_NAV_NEXT_YEAR, SLOT_NAME_NAV_PEV_DECADE, SLOT_NAME_NAV_PEV_MONTH, SLOT_NAME_NAV_PEV_YEAR, SLOT_NAME_NAV_THIS_MONTH } from '../../constants/slots';\nimport { arrayIncludes, concat } from '../../utils/array';\nimport { createDate, createDateFormatter, constrainDate as _constrainDate, datesEqual, firstDateOfMonth, formatYMD, lastDateOfMonth, oneMonthAgo, oneMonthAhead, oneYearAgo, oneYearAhead, oneDecadeAgo, oneDecadeAhead, parseYMD, resolveLocale } from '../../utils/date';\nimport { attemptBlur, attemptFocus, requestAF } from '../../utils/dom';\nimport { stopEvent } from '../../utils/events';\nimport { identity } from '../../utils/identity';\nimport { isArray, isPlainObject, isString } from '../../utils/inspect';\nimport { isLocaleRTL } from '../../utils/locale';\nimport { looseEqual } from '../../utils/loose-equal';\nimport { mathMax } from '../../utils/math';\nimport { makeModelMixin } from '../../utils/model';\nimport { toInteger } from '../../utils/number';\nimport { sortKeys } from '../../utils/object';\nimport { hasPropFunction, makeProp, makePropsConfigurable } from '../../utils/props';\nimport { toString } from '../../utils/string';\nimport { attrsMixin } from '../../mixins/attrs';\nimport { idMixin, props as idProps } from '../../mixins/id';\nimport { normalizeSlotMixin } from '../../mixins/normalize-slot';\nimport { BIconChevronLeft, BIconChevronDoubleLeft, BIconChevronBarLeft, BIconCircleFill } from '../../icons/icons'; // --- Constants ---\n\nvar _makeModelMixin = makeModelMixin('value', {\n  type: PROP_TYPE_DATE_STRING\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event; // --- Props ---\n\n\nexport var props = makePropsConfigurable(sortKeys(_objectSpread(_objectSpread(_objectSpread({}, idProps), modelProps), {}, {\n  ariaControls: makeProp(PROP_TYPE_STRING),\n  // Makes calendar the full width of its parent container\n  block: makeProp(PROP_TYPE_BOOLEAN, false),\n  dateDisabledFn: makeProp(PROP_TYPE_FUNCTION),\n  // `Intl.DateTimeFormat` object\n  dateFormatOptions: makeProp(PROP_TYPE_OBJECT, {\n    year: DATE_FORMAT_NUMERIC,\n    month: CALENDAR_LONG,\n    day: DATE_FORMAT_NUMERIC,\n    weekday: CALENDAR_LONG\n  }),\n  // Function to set a class of (classes) on the date cell\n  // if passed a string or an array\n  // TODO:\n  //   If the function returns an object, look for class prop for classes,\n  //   and other props for handling events/details/descriptions\n  dateInfoFn: makeProp(PROP_TYPE_FUNCTION),\n  // 'ltr', 'rtl', or `null` (for auto detect)\n  direction: makeProp(PROP_TYPE_STRING),\n  disabled: makeProp(PROP_TYPE_BOOLEAN, false),\n  // When `true`, renders a comment node, but keeps the component instance active\n  // Mainly for <b-form-date>, so that we can get the component's value and locale\n  // But we might just use separate date formatters, using the resolved locale\n  // (adjusted for the gregorian calendar)\n  hidden: makeProp(PROP_TYPE_BOOLEAN, false),\n  // When `true` makes the selected date header `sr-only`\n  hideHeader: makeProp(PROP_TYPE_BOOLEAN, false),\n  // This specifies the calendar year/month/day that will be shown when\n  // first opening the datepicker if no v-model value is provided\n  // Default is the current date (or `min`/`max`)\n  initialDate: makeProp(PROP_TYPE_DATE_STRING),\n  // Labels for buttons and keyboard shortcuts\n  labelCalendar: makeProp(PROP_TYPE_STRING, 'Calendar'),\n  labelCurrentMonth: makeProp(PROP_TYPE_STRING, 'Current month'),\n  labelHelp: makeProp(PROP_TYPE_STRING, 'Use cursor keys to navigate calendar dates'),\n  labelNav: makeProp(PROP_TYPE_STRING, 'Calendar navigation'),\n  labelNextDecade: makeProp(PROP_TYPE_STRING, 'Next decade'),\n  labelNextMonth: makeProp(PROP_TYPE_STRING, 'Next month'),\n  labelNextYear: makeProp(PROP_TYPE_STRING, 'Next year'),\n  labelNoDateSelected: makeProp(PROP_TYPE_STRING, 'No date selected'),\n  labelPrevDecade: makeProp(PROP_TYPE_STRING, 'Previous decade'),\n  labelPrevMonth: makeProp(PROP_TYPE_STRING, 'Previous month'),\n  labelPrevYear: makeProp(PROP_TYPE_STRING, 'Previous year'),\n  labelSelected: makeProp(PROP_TYPE_STRING, 'Selected date'),\n  labelToday: makeProp(PROP_TYPE_STRING, 'Today'),\n  // Locale(s) to use\n  // Default is to use page/browser default setting\n  locale: makeProp(PROP_TYPE_ARRAY_STRING),\n  max: makeProp(PROP_TYPE_DATE_STRING),\n  min: makeProp(PROP_TYPE_DATE_STRING),\n  // Variant color to use for the navigation buttons\n  navButtonVariant: makeProp(PROP_TYPE_STRING, 'secondary'),\n  // Disable highlighting today's date\n  noHighlightToday: makeProp(PROP_TYPE_BOOLEAN, false),\n  noKeyNav: makeProp(PROP_TYPE_BOOLEAN, false),\n  readonly: makeProp(PROP_TYPE_BOOLEAN, false),\n  roleDescription: makeProp(PROP_TYPE_STRING),\n  // Variant color to use for the selected date\n  selectedVariant: makeProp(PROP_TYPE_STRING, 'primary'),\n  // When `true` enables the decade navigation buttons\n  showDecadeNav: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Day of week to start calendar on\n  // `0` (Sunday), `1` (Monday), ... `6` (Saturday)\n  startWeekday: makeProp(PROP_TYPE_NUMBER_STRING, 0),\n  // Variant color to use for today's date (defaults to `selectedVariant`)\n  todayVariant: makeProp(PROP_TYPE_STRING),\n  // Always return the `v-model` value as a date object\n  valueAsDate: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Format of the weekday names at the top of the calendar\n  // `short` is typically a 3 letter abbreviation,\n  // `narrow` is typically a single letter\n  // `long` is the full week day name\n  // Although some locales may override this (i.e `ar`, etc.)\n  weekdayHeaderFormat: makeProp(PROP_TYPE_STRING, CALENDAR_SHORT, function (value) {\n    return arrayIncludes([CALENDAR_LONG, CALENDAR_SHORT, CALENDAR_NARROW], value);\n  }),\n  // Has no effect if prop `block` is set\n  width: makeProp(PROP_TYPE_STRING, '270px')\n})), NAME_CALENDAR); // --- Main component ---\n// @vue/component\n\nexport var BCalendar = Vue.extend({\n  name: NAME_CALENDAR,\n  // Mixin order is important!\n  mixins: [attrsMixin, idMixin, modelMixin, normalizeSlotMixin],\n  props: props,\n  data: function data() {\n    var selected = formatYMD(this[MODEL_PROP_NAME]) || '';\n    return {\n      // Selected date\n      selectedYMD: selected,\n      // Date in calendar grid that has `tabindex` of `0`\n      activeYMD: selected || formatYMD(_constrainDate(this.initialDate || this.getToday()), this.min, this.max),\n      // Will be true if the calendar grid has/contains focus\n      gridHasFocus: false,\n      // Flag to enable the `aria-live` region(s) after mount\n      // to prevent screen reader \"outbursts\" when mounting\n      isLive: false\n    };\n  },\n  computed: {\n    valueId: function valueId() {\n      return this.safeId();\n    },\n    widgetId: function widgetId() {\n      return this.safeId('_calendar-wrapper_');\n    },\n    navId: function navId() {\n      return this.safeId('_calendar-nav_');\n    },\n    gridId: function gridId() {\n      return this.safeId('_calendar-grid_');\n    },\n    gridCaptionId: function gridCaptionId() {\n      return this.safeId('_calendar-grid-caption_');\n    },\n    gridHelpId: function gridHelpId() {\n      return this.safeId('_calendar-grid-help_');\n    },\n    activeId: function activeId() {\n      return this.activeYMD ? this.safeId(\"_cell-\".concat(this.activeYMD, \"_\")) : null;\n    },\n    // TODO: Use computed props to convert `YYYY-MM-DD` to `Date` object\n    selectedDate: function selectedDate() {\n      // Selected as a `Date` object\n      return parseYMD(this.selectedYMD);\n    },\n    activeDate: function activeDate() {\n      // Active as a `Date` object\n      return parseYMD(this.activeYMD);\n    },\n    computedMin: function computedMin() {\n      return parseYMD(this.min);\n    },\n    computedMax: function computedMax() {\n      return parseYMD(this.max);\n    },\n    computedWeekStarts: function computedWeekStarts() {\n      // `startWeekday` is a prop (constrained to `0` through `6`)\n      return mathMax(toInteger(this.startWeekday, 0), 0) % 7;\n    },\n    computedLocale: function computedLocale() {\n      // Returns the resolved locale used by the calendar\n      return resolveLocale(concat(this.locale).filter(identity), CALENDAR_GREGORY);\n    },\n    computedDateDisabledFn: function computedDateDisabledFn() {\n      var dateDisabledFn = this.dateDisabledFn;\n      return hasPropFunction(dateDisabledFn) ? dateDisabledFn : function () {\n        return false;\n      };\n    },\n    // TODO: Change `dateInfoFn` to handle events and notes as well as classes\n    computedDateInfoFn: function computedDateInfoFn() {\n      var dateInfoFn = this.dateInfoFn;\n      return hasPropFunction(dateInfoFn) ? dateInfoFn : function () {\n        return {};\n      };\n    },\n    calendarLocale: function calendarLocale() {\n      // This locale enforces the gregorian calendar (for use in formatter functions)\n      // Needed because IE 11 resolves `ar-IR` as islamic-civil calendar\n      // and IE 11 (and some other browsers) do not support the `calendar` option\n      // And we currently only support the gregorian calendar\n      var fmt = new Intl.DateTimeFormat(this.computedLocale, {\n        calendar: CALENDAR_GREGORY\n      });\n      var calendar = fmt.resolvedOptions().calendar;\n      var locale = fmt.resolvedOptions().locale;\n      /* istanbul ignore if: mainly for IE 11 and a few other browsers, hard to test in JSDOM */\n\n      if (calendar !== CALENDAR_GREGORY) {\n        // Ensure the locale requests the gregorian calendar\n        // Mainly for IE 11, and currently we can't handle non-gregorian calendars\n        // TODO: Should we always return this value?\n        locale = locale.replace(/-u-.+$/i, '').concat('-u-ca-gregory');\n      }\n\n      return locale;\n    },\n    calendarYear: function calendarYear() {\n      return this.activeDate.getFullYear();\n    },\n    calendarMonth: function calendarMonth() {\n      return this.activeDate.getMonth();\n    },\n    calendarFirstDay: function calendarFirstDay() {\n      // We set the time for this date to 12pm to work around\n      // date formatting issues in Firefox and Safari\n      // See: https://github.com/bootstrap-vue/bootstrap-vue/issues/5818\n      return createDate(this.calendarYear, this.calendarMonth, 1, 12);\n    },\n    calendarDaysInMonth: function calendarDaysInMonth() {\n      // We create a new date as to not mutate the original\n      var date = createDate(this.calendarFirstDay);\n      date.setMonth(date.getMonth() + 1, 0);\n      return date.getDate();\n    },\n    computedVariant: function computedVariant() {\n      return \"btn-\".concat(this.selectedVariant || 'primary');\n    },\n    computedTodayVariant: function computedTodayVariant() {\n      return \"btn-outline-\".concat(this.todayVariant || this.selectedVariant || 'primary');\n    },\n    computedNavButtonVariant: function computedNavButtonVariant() {\n      return \"btn-outline-\".concat(this.navButtonVariant || 'primary');\n    },\n    isRTL: function isRTL() {\n      // `true` if the language requested is RTL\n      var dir = toString(this.direction).toLowerCase();\n\n      if (dir === 'rtl') {\n        /* istanbul ignore next */\n        return true;\n      } else if (dir === 'ltr') {\n        /* istanbul ignore next */\n        return false;\n      }\n\n      return isLocaleRTL(this.computedLocale);\n    },\n    context: function context() {\n      var selectedYMD = this.selectedYMD,\n          activeYMD = this.activeYMD;\n      var selectedDate = parseYMD(selectedYMD);\n      var activeDate = parseYMD(activeYMD);\n      return {\n        // The current value of the `v-model`\n        selectedYMD: selectedYMD,\n        selectedDate: selectedDate,\n        selectedFormatted: selectedDate ? this.formatDateString(selectedDate) : this.labelNoDateSelected,\n        // Which date cell is considered active due to navigation\n        activeYMD: activeYMD,\n        activeDate: activeDate,\n        activeFormatted: activeDate ? this.formatDateString(activeDate) : '',\n        // `true` if the date is disabled (when using keyboard navigation)\n        disabled: this.dateDisabled(activeDate),\n        // Locales used in formatting dates\n        locale: this.computedLocale,\n        calendarLocale: this.calendarLocale,\n        rtl: this.isRTL\n      };\n    },\n    // Computed props that return a function reference\n    dateOutOfRange: function dateOutOfRange() {\n      // Check whether a date is within the min/max range\n      // Returns a new function ref if the pops change\n      // We do this as we need to trigger the calendar computed prop\n      // to update when these props update\n      var min = this.computedMin,\n          max = this.computedMax;\n      return function (date) {\n        // Handle both `YYYY-MM-DD` and `Date` objects\n        date = parseYMD(date);\n        return min && date < min || max && date > max;\n      };\n    },\n    dateDisabled: function dateDisabled() {\n      var _this = this;\n\n      // Returns a function for validating if a date is within range\n      // We grab this variables first to ensure a new function ref\n      // is generated when the props value changes\n      // We do this as we need to trigger the calendar computed prop\n      // to update when these props update\n      var rangeFn = this.dateOutOfRange; // Return the function ref\n\n      return function (date) {\n        // Handle both `YYYY-MM-DD` and `Date` objects\n        date = parseYMD(date);\n        var ymd = formatYMD(date);\n        return !!(rangeFn(date) || _this.computedDateDisabledFn(ymd, date));\n      };\n    },\n    // Computed props that return date formatter functions\n    formatDateString: function formatDateString() {\n      // Returns a date formatter function\n      return createDateFormatter(this.calendarLocale, _objectSpread(_objectSpread({\n        // Ensure we have year, month, day shown for screen readers/ARIA\n        // If users really want to leave one of these out, they can\n        // pass `undefined` for the property value\n        year: DATE_FORMAT_NUMERIC,\n        month: DATE_FORMAT_2_DIGIT,\n        day: DATE_FORMAT_2_DIGIT\n      }, this.dateFormatOptions), {}, {\n        // Ensure hours/minutes/seconds are not shown\n        // As we do not support the time portion (yet)\n        hour: undefined,\n        minute: undefined,\n        second: undefined,\n        // Ensure calendar is gregorian\n        calendar: CALENDAR_GREGORY\n      }));\n    },\n    formatYearMonth: function formatYearMonth() {\n      // Returns a date formatter function\n      return createDateFormatter(this.calendarLocale, {\n        year: DATE_FORMAT_NUMERIC,\n        month: CALENDAR_LONG,\n        calendar: CALENDAR_GREGORY\n      });\n    },\n    formatWeekdayName: function formatWeekdayName() {\n      // Long weekday name for weekday header aria-label\n      return createDateFormatter(this.calendarLocale, {\n        weekday: CALENDAR_LONG,\n        calendar: CALENDAR_GREGORY\n      });\n    },\n    formatWeekdayNameShort: function formatWeekdayNameShort() {\n      // Weekday header cell format\n      // defaults to 'short' 3 letter days, where possible\n      return createDateFormatter(this.calendarLocale, {\n        weekday: this.weekdayHeaderFormat || CALENDAR_SHORT,\n        calendar: CALENDAR_GREGORY\n      });\n    },\n    formatDay: function formatDay() {\n      // Calendar grid day number formatter\n      // We don't use DateTimeFormatter here as it can place extra\n      // character(s) after the number (i.e the `zh` locale)\n      var nf = new Intl.NumberFormat([this.computedLocale], {\n        style: 'decimal',\n        minimumIntegerDigits: 1,\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0,\n        notation: 'standard'\n      }); // Return a formatter function instance\n\n      return function (date) {\n        return nf.format(date.getDate());\n      };\n    },\n    // Disabled states for the nav buttons\n    prevDecadeDisabled: function prevDecadeDisabled() {\n      var min = this.computedMin;\n      return this.disabled || min && lastDateOfMonth(oneDecadeAgo(this.activeDate)) < min;\n    },\n    prevYearDisabled: function prevYearDisabled() {\n      var min = this.computedMin;\n      return this.disabled || min && lastDateOfMonth(oneYearAgo(this.activeDate)) < min;\n    },\n    prevMonthDisabled: function prevMonthDisabled() {\n      var min = this.computedMin;\n      return this.disabled || min && lastDateOfMonth(oneMonthAgo(this.activeDate)) < min;\n    },\n    thisMonthDisabled: function thisMonthDisabled() {\n      // TODO: We could/should check if today is out of range\n      return this.disabled;\n    },\n    nextMonthDisabled: function nextMonthDisabled() {\n      var max = this.computedMax;\n      return this.disabled || max && firstDateOfMonth(oneMonthAhead(this.activeDate)) > max;\n    },\n    nextYearDisabled: function nextYearDisabled() {\n      var max = this.computedMax;\n      return this.disabled || max && firstDateOfMonth(oneYearAhead(this.activeDate)) > max;\n    },\n    nextDecadeDisabled: function nextDecadeDisabled() {\n      var max = this.computedMax;\n      return this.disabled || max && firstDateOfMonth(oneDecadeAhead(this.activeDate)) > max;\n    },\n    // Calendar dates generation\n    calendar: function calendar() {\n      var matrix = [];\n      var firstDay = this.calendarFirstDay;\n      var calendarYear = firstDay.getFullYear();\n      var calendarMonth = firstDay.getMonth();\n      var daysInMonth = this.calendarDaysInMonth;\n      var startIndex = firstDay.getDay(); // `0`..`6`\n\n      var weekOffset = (this.computedWeekStarts > startIndex ? 7 : 0) - this.computedWeekStarts; // Build the calendar matrix\n\n      var currentDay = 0 - weekOffset - startIndex;\n\n      for (var week = 0; week < 6 && currentDay < daysInMonth; week++) {\n        // For each week\n        matrix[week] = []; // The following could be a map function\n\n        for (var j = 0; j < 7; j++) {\n          // For each day in week\n          currentDay++;\n          var date = createDate(calendarYear, calendarMonth, currentDay);\n          var month = date.getMonth();\n          var dayYMD = formatYMD(date);\n          var dayDisabled = this.dateDisabled(date); // TODO: This could be a normalizer method\n\n          var dateInfo = this.computedDateInfoFn(dayYMD, parseYMD(dayYMD));\n          dateInfo = isString(dateInfo) || isArray(dateInfo) ?\n          /* istanbul ignore next */\n          {\n            class: dateInfo\n          } : isPlainObject(dateInfo) ? _objectSpread({\n            class: ''\n          }, dateInfo) :\n          /* istanbul ignore next */\n          {\n            class: ''\n          };\n          matrix[week].push({\n            ymd: dayYMD,\n            // Cell content\n            day: this.formatDay(date),\n            label: this.formatDateString(date),\n            // Flags for styling\n            isThisMonth: month === calendarMonth,\n            isDisabled: dayDisabled,\n            // TODO: Handle other dateInfo properties such as notes/events\n            info: dateInfo\n          });\n        }\n      }\n\n      return matrix;\n    },\n    calendarHeadings: function calendarHeadings() {\n      var _this2 = this;\n\n      return this.calendar[0].map(function (d) {\n        return {\n          text: _this2.formatWeekdayNameShort(parseYMD(d.ymd)),\n          label: _this2.formatWeekdayName(parseYMD(d.ymd))\n        };\n      });\n    }\n  },\n  watch: (_watch = {}, _defineProperty(_watch, MODEL_PROP_NAME, function (newValue, oldValue) {\n    var selected = formatYMD(newValue) || '';\n    var old = formatYMD(oldValue) || '';\n\n    if (!datesEqual(selected, old)) {\n      this.activeYMD = selected || this.activeYMD;\n      this.selectedYMD = selected;\n    }\n  }), _defineProperty(_watch, \"selectedYMD\", function selectedYMD(newYMD, oldYMD) {\n    // TODO:\n    //   Should we compare to `formatYMD(this.value)` and emit\n    //   only if they are different?\n    if (newYMD !== oldYMD) {\n      this.$emit(MODEL_EVENT_NAME, this.valueAsDate ? parseYMD(newYMD) || null : newYMD || '');\n    }\n  }), _defineProperty(_watch, \"context\", function context(newValue, oldValue) {\n    if (!looseEqual(newValue, oldValue)) {\n      this.$emit(EVENT_NAME_CONTEXT, newValue);\n    }\n  }), _defineProperty(_watch, \"hidden\", function hidden(newValue) {\n    // Reset the active focused day when hidden\n    this.activeYMD = this.selectedYMD || formatYMD(this[MODEL_PROP_NAME] || this.constrainDate(this.initialDate || this.getToday())); // Enable/disable the live regions\n\n    this.setLive(!newValue);\n  }), _watch),\n  created: function created() {\n    var _this3 = this;\n\n    this.$nextTick(function () {\n      _this3.$emit(EVENT_NAME_CONTEXT, _this3.context);\n    });\n  },\n  mounted: function mounted() {\n    this.setLive(true);\n  },\n\n  /* istanbul ignore next */\n  activated: function activated() {\n    this.setLive(true);\n  },\n\n  /* istanbul ignore next */\n  deactivated: function deactivated() {\n    this.setLive(false);\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.setLive(false);\n  },\n  methods: {\n    // Public method(s)\n    focus: function focus() {\n      if (!this.disabled) {\n        attemptFocus(this.$refs.grid);\n      }\n    },\n    blur: function blur() {\n      if (!this.disabled) {\n        attemptBlur(this.$refs.grid);\n      }\n    },\n    // Private methods\n    setLive: function setLive(on) {\n      var _this4 = this;\n\n      if (on) {\n        this.$nextTick(function () {\n          requestAF(function () {\n            _this4.isLive = true;\n          });\n        });\n      } else {\n        this.isLive = false;\n      }\n    },\n    getToday: function getToday() {\n      return parseYMD(createDate());\n    },\n    constrainDate: function constrainDate(date) {\n      // Constrains a date between min and max\n      // returns a new `Date` object instance\n      return _constrainDate(date, this.computedMin, this.computedMax);\n    },\n    emitSelected: function emitSelected(date) {\n      var _this5 = this;\n\n      // Performed in a `$nextTick()` to (probably) ensure\n      // the input event has emitted first\n      this.$nextTick(function () {\n        _this5.$emit(EVENT_NAME_SELECTED, formatYMD(date) || '', parseYMD(date) || null);\n      });\n    },\n    // Event handlers\n    setGridFocusFlag: function setGridFocusFlag(event) {\n      // Sets the gridHasFocus flag to make date \"button\" look focused\n      this.gridHasFocus = !this.disabled && event.type === 'focus';\n    },\n    onKeydownWrapper: function onKeydownWrapper(event) {\n      // Calendar keyboard navigation\n      // Handles PAGEUP/PAGEDOWN/END/HOME/LEFT/UP/RIGHT/DOWN\n      // Focuses grid after updating\n      if (this.noKeyNav) {\n        /* istanbul ignore next */\n        return;\n      }\n\n      var altKey = event.altKey,\n          ctrlKey = event.ctrlKey,\n          keyCode = event.keyCode;\n\n      if (!arrayIncludes([CODE_PAGEUP, CODE_PAGEDOWN, CODE_END, CODE_HOME, CODE_LEFT, CODE_UP, CODE_RIGHT, CODE_DOWN], keyCode)) {\n        /* istanbul ignore next */\n        return;\n      }\n\n      stopEvent(event);\n      var activeDate = createDate(this.activeDate);\n      var checkDate = createDate(this.activeDate);\n      var day = activeDate.getDate();\n      var constrainedToday = this.constrainDate(this.getToday());\n      var isRTL = this.isRTL;\n\n      if (keyCode === CODE_PAGEUP) {\n        // PAGEUP - Previous month/year\n        activeDate = (altKey ? ctrlKey ? oneDecadeAgo : oneYearAgo : oneMonthAgo)(activeDate); // We check the first day of month to be in rage\n\n        checkDate = createDate(activeDate);\n        checkDate.setDate(1);\n      } else if (keyCode === CODE_PAGEDOWN) {\n        // PAGEDOWN - Next month/year\n        activeDate = (altKey ? ctrlKey ? oneDecadeAhead : oneYearAhead : oneMonthAhead)(activeDate); // We check the last day of month to be in rage\n\n        checkDate = createDate(activeDate);\n        checkDate.setMonth(checkDate.getMonth() + 1);\n        checkDate.setDate(0);\n      } else if (keyCode === CODE_LEFT) {\n        // LEFT - Previous day (or next day for RTL)\n        activeDate.setDate(day + (isRTL ? 1 : -1));\n        activeDate = this.constrainDate(activeDate);\n        checkDate = activeDate;\n      } else if (keyCode === CODE_RIGHT) {\n        // RIGHT - Next day (or previous day for RTL)\n        activeDate.setDate(day + (isRTL ? -1 : 1));\n        activeDate = this.constrainDate(activeDate);\n        checkDate = activeDate;\n      } else if (keyCode === CODE_UP) {\n        // UP - Previous week\n        activeDate.setDate(day - 7);\n        activeDate = this.constrainDate(activeDate);\n        checkDate = activeDate;\n      } else if (keyCode === CODE_DOWN) {\n        // DOWN - Next week\n        activeDate.setDate(day + 7);\n        activeDate = this.constrainDate(activeDate);\n        checkDate = activeDate;\n      } else if (keyCode === CODE_HOME) {\n        // HOME - Today\n        activeDate = constrainedToday;\n        checkDate = activeDate;\n      } else if (keyCode === CODE_END) {\n        // END - Selected date, or today if no selected date\n        activeDate = parseYMD(this.selectedDate) || constrainedToday;\n        checkDate = activeDate;\n      }\n\n      if (!this.dateOutOfRange(checkDate) && !datesEqual(activeDate, this.activeDate)) {\n        // We only jump to date if within min/max\n        // We don't check for individual disabled dates though (via user function)\n        this.activeYMD = formatYMD(activeDate);\n      } // Ensure grid is focused\n\n\n      this.focus();\n    },\n    onKeydownGrid: function onKeydownGrid(event) {\n      // Pressing enter/space on grid to select active date\n      var keyCode = event.keyCode;\n      var activeDate = this.activeDate;\n\n      if (keyCode === CODE_ENTER || keyCode === CODE_SPACE) {\n        stopEvent(event);\n\n        if (!this.disabled && !this.readonly && !this.dateDisabled(activeDate)) {\n          this.selectedYMD = formatYMD(activeDate);\n          this.emitSelected(activeDate);\n        } // Ensure grid is focused\n\n\n        this.focus();\n      }\n    },\n    onClickDay: function onClickDay(day) {\n      // Clicking on a date \"button\" to select it\n      var selectedDate = this.selectedDate,\n          activeDate = this.activeDate;\n      var clickedDate = parseYMD(day.ymd);\n\n      if (!this.disabled && !day.isDisabled && !this.dateDisabled(clickedDate)) {\n        if (!this.readonly) {\n          // If readonly mode, we don't set the selected date, just the active date\n          // If the clicked date is equal to the already selected date, we don't update the model\n          this.selectedYMD = formatYMD(datesEqual(clickedDate, selectedDate) ? selectedDate : clickedDate);\n          this.emitSelected(clickedDate);\n        }\n\n        this.activeYMD = formatYMD(datesEqual(clickedDate, activeDate) ? activeDate : createDate(clickedDate)); // Ensure grid is focused\n\n        this.focus();\n      }\n    },\n    gotoPrevDecade: function gotoPrevDecade() {\n      this.activeYMD = formatYMD(this.constrainDate(oneDecadeAgo(this.activeDate)));\n    },\n    gotoPrevYear: function gotoPrevYear() {\n      this.activeYMD = formatYMD(this.constrainDate(oneYearAgo(this.activeDate)));\n    },\n    gotoPrevMonth: function gotoPrevMonth() {\n      this.activeYMD = formatYMD(this.constrainDate(oneMonthAgo(this.activeDate)));\n    },\n    gotoCurrentMonth: function gotoCurrentMonth() {\n      // TODO: Maybe this goto date should be configurable?\n      this.activeYMD = formatYMD(this.constrainDate(this.getToday()));\n    },\n    gotoNextMonth: function gotoNextMonth() {\n      this.activeYMD = formatYMD(this.constrainDate(oneMonthAhead(this.activeDate)));\n    },\n    gotoNextYear: function gotoNextYear() {\n      this.activeYMD = formatYMD(this.constrainDate(oneYearAhead(this.activeDate)));\n    },\n    gotoNextDecade: function gotoNextDecade() {\n      this.activeYMD = formatYMD(this.constrainDate(oneDecadeAhead(this.activeDate)));\n    },\n    onHeaderClick: function onHeaderClick() {\n      if (!this.disabled) {\n        this.activeYMD = this.selectedYMD || formatYMD(this.getToday());\n        this.focus();\n      }\n    }\n  },\n  render: function render(h) {\n    var _this6 = this;\n\n    // If `hidden` prop is set, render just a placeholder node\n    if (this.hidden) {\n      return h();\n    }\n\n    var valueId = this.valueId,\n        widgetId = this.widgetId,\n        navId = this.navId,\n        gridId = this.gridId,\n        gridCaptionId = this.gridCaptionId,\n        gridHelpId = this.gridHelpId,\n        activeId = this.activeId,\n        disabled = this.disabled,\n        noKeyNav = this.noKeyNav,\n        isLive = this.isLive,\n        isRTL = this.isRTL,\n        activeYMD = this.activeYMD,\n        selectedYMD = this.selectedYMD,\n        safeId = this.safeId;\n    var hideDecadeNav = !this.showDecadeNav;\n    var todayYMD = formatYMD(this.getToday());\n    var highlightToday = !this.noHighlightToday; // Header showing current selected date\n\n    var $header = h('output', {\n      staticClass: 'form-control form-control-sm text-center',\n      class: {\n        'text-muted': disabled,\n        readonly: this.readonly || disabled\n      },\n      attrs: {\n        id: valueId,\n        for: gridId,\n        role: 'status',\n        tabindex: disabled ? null : '-1',\n        // Mainly for testing purposes, as we do not know\n        // the exact format `Intl` will format the date string\n        'data-selected': toString(selectedYMD),\n        // We wait until after mount to enable `aria-live`\n        // to prevent initial announcement on page render\n        'aria-live': isLive ? 'polite' : 'off',\n        'aria-atomic': isLive ? 'true' : null\n      },\n      on: {\n        // Transfer focus/click to focus grid\n        // and focus active date (or today if no selection)\n        click: this.onHeaderClick,\n        focus: this.onHeaderClick\n      }\n    }, this.selectedDate ? [// We use `bdi` elements here in case the label doesn't match the locale\n    // Although IE 11 does not deal with <BDI> at all (equivalent to a span)\n    h('bdi', {\n      staticClass: 'sr-only'\n    }, \" (\".concat(toString(this.labelSelected), \") \")), h('bdi', this.formatDateString(this.selectedDate))] : this.labelNoDateSelected || \"\\xA0\" // '&nbsp;'\n    );\n    $header = h('header', {\n      staticClass: 'b-calendar-header',\n      class: {\n        'sr-only': this.hideHeader\n      },\n      attrs: {\n        title: this.selectedDate ? this.labelSelectedDate || null : null\n      }\n    }, [$header]); // Content for the date navigation buttons\n\n    var navScope = {\n      isRTL: isRTL\n    };\n    var navProps = {\n      shiftV: 0.5\n    };\n\n    var navPrevProps = _objectSpread(_objectSpread({}, navProps), {}, {\n      flipH: isRTL\n    });\n\n    var navNextProps = _objectSpread(_objectSpread({}, navProps), {}, {\n      flipH: !isRTL\n    });\n\n    var $prevDecadeIcon = this.normalizeSlot(SLOT_NAME_NAV_PEV_DECADE, navScope) || h(BIconChevronBarLeft, {\n      props: navPrevProps\n    });\n    var $prevYearIcon = this.normalizeSlot(SLOT_NAME_NAV_PEV_YEAR, navScope) || h(BIconChevronDoubleLeft, {\n      props: navPrevProps\n    });\n    var $prevMonthIcon = this.normalizeSlot(SLOT_NAME_NAV_PEV_MONTH, navScope) || h(BIconChevronLeft, {\n      props: navPrevProps\n    });\n    var $thisMonthIcon = this.normalizeSlot(SLOT_NAME_NAV_THIS_MONTH, navScope) || h(BIconCircleFill, {\n      props: navProps\n    });\n    var $nextMonthIcon = this.normalizeSlot(SLOT_NAME_NAV_NEXT_MONTH, navScope) || h(BIconChevronLeft, {\n      props: navNextProps\n    });\n    var $nextYearIcon = this.normalizeSlot(SLOT_NAME_NAV_NEXT_YEAR, navScope) || h(BIconChevronDoubleLeft, {\n      props: navNextProps\n    });\n    var $nextDecadeIcon = this.normalizeSlot(SLOT_NAME_NAV_NEXT_DECADE, navScope) || h(BIconChevronBarLeft, {\n      props: navNextProps\n    }); // Utility to create the date navigation buttons\n\n    var makeNavBtn = function makeNavBtn(content, label, handler, btnDisabled, shortcut) {\n      return h('button', {\n        staticClass: 'btn btn-sm border-0 flex-fill',\n        class: [_this6.computedNavButtonVariant, {\n          disabled: btnDisabled\n        }],\n        attrs: {\n          title: label || null,\n          type: 'button',\n          tabindex: noKeyNav ? '-1' : null,\n          'aria-label': label || null,\n          'aria-disabled': btnDisabled ? 'true' : null,\n          'aria-keyshortcuts': shortcut || null\n        },\n        on: btnDisabled ? {} : {\n          click: handler\n        }\n      }, [h('div', {\n        attrs: {\n          'aria-hidden': 'true'\n        }\n      }, [content])]);\n    }; // Generate the date navigation buttons\n\n\n    var $nav = h('div', {\n      staticClass: 'b-calendar-nav d-flex',\n      attrs: {\n        id: navId,\n        role: 'group',\n        tabindex: noKeyNav ? '-1' : null,\n        'aria-hidden': disabled ? 'true' : null,\n        'aria-label': this.labelNav || null,\n        'aria-controls': gridId\n      }\n    }, [hideDecadeNav ? h() : makeNavBtn($prevDecadeIcon, this.labelPrevDecade, this.gotoPrevDecade, this.prevDecadeDisabled, 'Ctrl+Alt+PageDown'), makeNavBtn($prevYearIcon, this.labelPrevYear, this.gotoPrevYear, this.prevYearDisabled, 'Alt+PageDown'), makeNavBtn($prevMonthIcon, this.labelPrevMonth, this.gotoPrevMonth, this.prevMonthDisabled, 'PageDown'), makeNavBtn($thisMonthIcon, this.labelCurrentMonth, this.gotoCurrentMonth, this.thisMonthDisabled, 'Home'), makeNavBtn($nextMonthIcon, this.labelNextMonth, this.gotoNextMonth, this.nextMonthDisabled, 'PageUp'), makeNavBtn($nextYearIcon, this.labelNextYear, this.gotoNextYear, this.nextYearDisabled, 'Alt+PageUp'), hideDecadeNav ? h() : makeNavBtn($nextDecadeIcon, this.labelNextDecade, this.gotoNextDecade, this.nextDecadeDisabled, 'Ctrl+Alt+PageUp')]); // Caption for calendar grid\n\n    var $gridCaption = h('header', {\n      staticClass: 'b-calendar-grid-caption text-center font-weight-bold',\n      class: {\n        'text-muted': disabled\n      },\n      attrs: {\n        id: gridCaptionId,\n        'aria-live': isLive ? 'polite' : null,\n        'aria-atomic': isLive ? 'true' : null\n      },\n      key: 'grid-caption'\n    }, this.formatYearMonth(this.calendarFirstDay)); // Calendar weekday headings\n\n    var $gridWeekDays = h('div', {\n      staticClass: 'b-calendar-grid-weekdays row no-gutters border-bottom',\n      attrs: {\n        'aria-hidden': 'true'\n      }\n    }, this.calendarHeadings.map(function (d, idx) {\n      return h('small', {\n        staticClass: 'col text-truncate',\n        class: {\n          'text-muted': disabled\n        },\n        attrs: {\n          title: d.label === d.text ? null : d.label,\n          'aria-label': d.label\n        },\n        key: idx\n      }, d.text);\n    })); // Calendar day grid\n\n    var $gridBody = this.calendar.map(function (week) {\n      var $cells = week.map(function (day, dIndex) {\n        var _class;\n\n        var isSelected = day.ymd === selectedYMD;\n        var isActive = day.ymd === activeYMD;\n        var isToday = day.ymd === todayYMD;\n        var idCell = safeId(\"_cell-\".concat(day.ymd, \"_\")); // \"fake\" button\n\n        var $btn = h('span', {\n          staticClass: 'btn border-0 rounded-circle text-nowrap',\n          // Should we add some classes to signify if today/selected/etc?\n          class: (_class = {\n            // Give the fake button a focus ring\n            focus: isActive && _this6.gridHasFocus,\n            // Styling\n            disabled: day.isDisabled || disabled,\n            active: isSelected\n          }, _defineProperty(_class, _this6.computedVariant, isSelected), _defineProperty(_class, _this6.computedTodayVariant, isToday && highlightToday && !isSelected && day.isThisMonth), _defineProperty(_class, 'btn-outline-light', !(isToday && highlightToday) && !isSelected && !isActive), _defineProperty(_class, 'btn-light', !(isToday && highlightToday) && !isSelected && isActive), _defineProperty(_class, 'text-muted', !day.isThisMonth && !isSelected), _defineProperty(_class, 'text-dark', !(isToday && highlightToday) && !isSelected && !isActive && day.isThisMonth), _defineProperty(_class, 'font-weight-bold', (isSelected || day.isThisMonth) && !day.isDisabled), _class),\n          on: {\n            click: function click() {\n              return _this6.onClickDay(day);\n            }\n          }\n        }, day.day);\n        return h('div', // Cell with button\n        {\n          staticClass: 'col p-0',\n          class: day.isDisabled ? 'bg-light' : day.info.class || '',\n          attrs: {\n            id: idCell,\n            role: 'button',\n            'data-date': day.ymd,\n            // Primarily for testing purposes\n            // Only days in the month are presented as buttons to screen readers\n            'aria-hidden': day.isThisMonth ? null : 'true',\n            'aria-disabled': day.isDisabled || disabled ? 'true' : null,\n            'aria-label': [day.label, isSelected ? \"(\".concat(_this6.labelSelected, \")\") : null, isToday ? \"(\".concat(_this6.labelToday, \")\") : null].filter(identity).join(' '),\n            // NVDA doesn't convey `aria-selected`, but does `aria-current`,\n            // ChromeVox doesn't convey `aria-current`, but does `aria-selected`,\n            // so we set both attributes for robustness\n            'aria-selected': isSelected ? 'true' : null,\n            'aria-current': isSelected ? 'date' : null\n          },\n          key: dIndex\n        }, [$btn]);\n      }); // Return the week \"row\"\n      // We use the first day of the weeks YMD value as a\n      // key for efficient DOM patching / element re-use\n\n      return h('div', {\n        staticClass: 'row no-gutters',\n        key: week[0].ymd\n      }, $cells);\n    });\n    $gridBody = h('div', {\n      // A key is only required on the body if we add in transition support\n      staticClass: 'b-calendar-grid-body',\n      style: disabled ? {\n        pointerEvents: 'none'\n      } : {} // key: this.activeYMD.slice(0, -3)\n\n    }, $gridBody);\n    var $gridHelp = h('footer', {\n      staticClass: 'b-calendar-grid-help border-top small text-muted text-center bg-light',\n      attrs: {\n        id: gridHelpId\n      }\n    }, [h('div', {\n      staticClass: 'small'\n    }, this.labelHelp)]);\n    var $grid = h('div', {\n      staticClass: 'b-calendar-grid form-control h-auto text-center',\n      attrs: {\n        id: gridId,\n        role: 'application',\n        tabindex: noKeyNav ? '-1' : disabled ? null : '0',\n        'data-month': activeYMD.slice(0, -3),\n        // `YYYY-MM`, mainly for testing\n        'aria-roledescription': this.labelCalendar || null,\n        'aria-labelledby': gridCaptionId,\n        'aria-describedby': gridHelpId,\n        // `aria-readonly` is not considered valid on `role=\"application\"`\n        // https://www.w3.org/TR/wai-aria-1.1/#aria-readonly\n        // 'aria-readonly': this.readonly && !disabled ? 'true' : null,\n        'aria-disabled': disabled ? 'true' : null,\n        'aria-activedescendant': activeId\n      },\n      on: {\n        keydown: this.onKeydownGrid,\n        focus: this.setGridFocusFlag,\n        blur: this.setGridFocusFlag\n      },\n      ref: 'grid'\n    }, [$gridCaption, $gridWeekDays, $gridBody, $gridHelp]); // Optional bottom slot\n\n    var $slot = this.normalizeSlot();\n    $slot = $slot ? h('footer', {\n      staticClass: 'b-calendar-footer'\n    }, $slot) : h();\n    var $widget = h('div', {\n      staticClass: 'b-calendar-inner',\n      style: this.block ? {} : {\n        width: this.width\n      },\n      attrs: {\n        id: widgetId,\n        dir: isRTL ? 'rtl' : 'ltr',\n        lang: this.computedLocale || null,\n        role: 'group',\n        'aria-disabled': disabled ? 'true' : null,\n        // If datepicker controls an input, this will specify the ID of the input\n        'aria-controls': this.ariaControls || null,\n        // This should be a prop (so it can be changed to Date picker, etc, localized\n        'aria-roledescription': this.roleDescription || null,\n        'aria-describedby': [// Should the attr (if present) go last?\n        // Or should this attr be a prop?\n        this.bvAttrs['aria-describedby'], valueId, gridHelpId].filter(identity).join(' ')\n      },\n      on: {\n        keydown: this.onKeydownWrapper\n      }\n    }, [$header, $nav, $grid, $slot]); // Wrap in an outer div that can be styled\n\n    return h('div', {\n      staticClass: 'b-calendar',\n      class: {\n        'd-block': this.block\n      }\n    }, [$widget]);\n  }\n});"]}]}