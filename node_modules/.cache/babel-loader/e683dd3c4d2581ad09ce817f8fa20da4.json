{"remainingRequest":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js!/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js!/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/mixins/pagination.js","dependencies":[{"path":"/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/mixins/pagination.js","mtime":1610263603568},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/cache-loader/dist/cjs.js","mtime":1582363961748},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js","mtime":1582363962038},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js","mtime":1585275399303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5yZXZlcnNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0aWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Cgp2YXIgX3dhdGNoOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgppbXBvcnQgeyBWdWUgfSBmcm9tICcuLi92dWUnOwppbXBvcnQgeyBOQU1FX1BBR0lOQVRJT04gfSBmcm9tICcuLi9jb25zdGFudHMvY29tcG9uZW50cyc7CmltcG9ydCB7IENPREVfRE9XTiwgQ09ERV9MRUZULCBDT0RFX1JJR0hULCBDT0RFX1NQQUNFLCBDT0RFX1VQIH0gZnJvbSAnLi4vY29uc3RhbnRzL2tleS1jb2Rlcyc7CmltcG9ydCB7IFBST1BfVFlQRV9BUlJBWV9PQkpFQ1RfU1RSSU5HLCBQUk9QX1RZUEVfQk9PTEVBTiwgUFJPUF9UWVBFX0JPT0xFQU5fTlVNQkVSX1NUUklORywgUFJPUF9UWVBFX0ZVTkNUSU9OX1NUUklORywgUFJPUF9UWVBFX05VTUJFUl9TVFJJTkcsIFBST1BfVFlQRV9TVFJJTkcgfSBmcm9tICcuLi9jb25zdGFudHMvcHJvcHMnOwppbXBvcnQgeyBTTE9UX05BTUVfRUxMSVBTSVNfVEVYVCwgU0xPVF9OQU1FX0ZJUlNUX1RFWFQsIFNMT1RfTkFNRV9MQVNUX1RFWFQsIFNMT1RfTkFNRV9ORVhUX1RFWFQsIFNMT1RfTkFNRV9QQUdFLCBTTE9UX05BTUVfUFJFVl9URVhUIH0gZnJvbSAnLi4vY29uc3RhbnRzL3Nsb3RzJzsKaW1wb3J0IHsgY3JlYXRlQXJyYXkgfSBmcm9tICcuLi91dGlscy9hcnJheSc7CmltcG9ydCB7IGF0dGVtcHRGb2N1cywgZ2V0QWN0aXZlRWxlbWVudCwgZ2V0QXR0ciwgaXNEaXNhYmxlZCwgaXNWaXNpYmxlLCBzZWxlY3RBbGwgfSBmcm9tICcuLi91dGlscy9kb20nOwppbXBvcnQgeyBzdG9wRXZlbnQgfSBmcm9tICcuLi91dGlscy9ldmVudHMnOwppbXBvcnQgeyBpc0Z1bmN0aW9uLCBpc051bGwgfSBmcm9tICcuLi91dGlscy9pbnNwZWN0JzsKaW1wb3J0IHsgbWF0aEZsb29yLCBtYXRoTWF4LCBtYXRoTWluIH0gZnJvbSAnLi4vdXRpbHMvbWF0aCc7CmltcG9ydCB7IG1ha2VNb2RlbE1peGluIH0gZnJvbSAnLi4vdXRpbHMvbW9kZWwnOwppbXBvcnQgeyB0b0ludGVnZXIgfSBmcm9tICcuLi91dGlscy9udW1iZXInOwppbXBvcnQgeyBzb3J0S2V5cyB9IGZyb20gJy4uL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGhhc1Byb3BGdW5jdGlvbiwgbWFrZVByb3AsIG1ha2VQcm9wc0NvbmZpZ3VyYWJsZSB9IGZyb20gJy4uL3V0aWxzL3Byb3BzJzsKaW1wb3J0IHsgdG9TdHJpbmcgfSBmcm9tICcuLi91dGlscy9zdHJpbmcnOwppbXBvcnQgeyB3YXJuIH0gZnJvbSAnLi4vdXRpbHMvd2Fybic7CmltcG9ydCB7IG5vcm1hbGl6ZVNsb3RNaXhpbiB9IGZyb20gJy4uL21peGlucy9ub3JtYWxpemUtc2xvdCc7CmltcG9ydCB7IEJMaW5rIH0gZnJvbSAnLi4vY29tcG9uZW50cy9saW5rL2xpbmsnOyAvLyBDb21tb24gcHJvcHMsIGNvbXB1dGVkLCBkYXRhLCByZW5kZXIgZnVuY3Rpb24sIGFuZCBtZXRob2RzCi8vIGZvciBgPGItcGFnaW5hdGlvbj5gIGFuZCBgPGItcGFnaW5hdGlvbi1uYXY+YAovLyAtLS0gQ29uc3RhbnRzIC0tLQoKdmFyIF9tYWtlTW9kZWxNaXhpbiA9IG1ha2VNb2RlbE1peGluKCd2YWx1ZScsIHsKICB0eXBlOiBQUk9QX1RZUEVfQk9PTEVBTl9OVU1CRVJfU1RSSU5HLAogIGRlZmF1bHRWYWx1ZTogbnVsbCwKCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICB2YWxpZGF0b3I6IGZ1bmN0aW9uIHZhbGlkYXRvcih2YWx1ZSkgewogICAgaWYgKCFpc051bGwodmFsdWUpICYmIHRvSW50ZWdlcih2YWx1ZSwgMCkgPCAxKSB7CiAgICAgIHdhcm4oJyJ2LW1vZGVsIiB2YWx1ZSBtdXN0IGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAiMCInLCBOQU1FX1BBR0lOQVRJT04pOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfQp9KSwKICAgIG1vZGVsTWl4aW4gPSBfbWFrZU1vZGVsTWl4aW4ubWl4aW4sCiAgICBtb2RlbFByb3BzID0gX21ha2VNb2RlbE1peGluLnByb3BzLAogICAgTU9ERUxfUFJPUF9OQU1FID0gX21ha2VNb2RlbE1peGluLnByb3AsCiAgICBNT0RFTF9FVkVOVF9OQU1FID0gX21ha2VNb2RlbE1peGluLmV2ZW50OwoKZXhwb3J0IHsgTU9ERUxfUFJPUF9OQU1FLCBNT0RFTF9FVkVOVF9OQU1FIH07IC8vIFRocmVzaG9sZCBvZiBsaW1pdCBzaXplIHdoZW4gd2Ugc3RhcnQvc3RvcCBzaG93aW5nIGVsbGlwc2lzCgp2YXIgRUxMSVBTSVNfVEhSRVNIT0xEID0gMzsgLy8gRGVmYXVsdCAjIG9mIGJ1dHRvbnMgbGltaXQKCnZhciBERUZBVUxUX0xJTUlUID0gNTsgLy8gLS0tIEhlbHBlciBtZXRob2RzIC0tLQovLyBNYWtlIGFuIGFycmF5IG9mIE4gdG8gTitYCgp2YXIgbWFrZVBhZ2VBcnJheSA9IGZ1bmN0aW9uIG1ha2VQYWdlQXJyYXkoc3RhcnROdW1iZXIsIG51bWJlck9mUGFnZXMpIHsKICByZXR1cm4gY3JlYXRlQXJyYXkobnVtYmVyT2ZQYWdlcywgZnVuY3Rpb24gKF8sIGkpIHsKICAgIHJldHVybiB7CiAgICAgIG51bWJlcjogc3RhcnROdW1iZXIgKyBpLAogICAgICBjbGFzc2VzOiBudWxsCiAgICB9OwogIH0pOwp9OyAvLyBTYW5pdGl6ZSB0aGUgcHJvdmlkZWQgbGltaXQgdmFsdWUgKGNvbnZlcnRpbmcgdG8gYSBudW1iZXIpCgoKdmFyIHNhbml0aXplTGltaXQgPSBmdW5jdGlvbiBzYW5pdGl6ZUxpbWl0KHZhbHVlKSB7CiAgdmFyIGxpbWl0ID0gdG9JbnRlZ2VyKHZhbHVlKSB8fCAxOwogIHJldHVybiBsaW1pdCA8IDEgPyBERUZBVUxUX0xJTUlUIDogbGltaXQ7Cn07IC8vIFNhbml0aXplIHRoZSBwcm92aWRlZCBjdXJyZW50IHBhZ2UgbnVtYmVyIChjb252ZXJ0aW5nIHRvIGEgbnVtYmVyKQoKCnZhciBzYW5pdGl6ZUN1cnJlbnRQYWdlID0gZnVuY3Rpb24gc2FuaXRpemVDdXJyZW50UGFnZSh2YWwsIG51bWJlck9mUGFnZXMpIHsKICB2YXIgcGFnZSA9IHRvSW50ZWdlcih2YWwpIHx8IDE7CiAgcmV0dXJuIHBhZ2UgPiBudW1iZXJPZlBhZ2VzID8gbnVtYmVyT2ZQYWdlcyA6IHBhZ2UgPCAxID8gMSA6IHBhZ2U7Cn07IC8vIExpbmtzIGRvbid0IG5vcm1hbGx5IHJlc3BvbmQgdG8gU1BBQ0UsIHNvIHdlIGFkZCB0aGF0Ci8vIGZ1bmN0aW9uYWxpdHkgdmlhIHRoaXMgaGFuZGxlcgoKCnZhciBvblNwYWNlS2V5ID0gZnVuY3Rpb24gb25TcGFjZUtleShldmVudCkgewogIGlmIChldmVudC5rZXlDb2RlID09PSBDT0RFX1NQQUNFKSB7CiAgICAvLyBTdG9wIHBhZ2UgZnJvbSBzY3JvbGxpbmcKICAgIHN0b3BFdmVudChldmVudCwgewogICAgICBpbW1lZGlhdGVQcm9wYWdhdGlvbjogdHJ1ZQogICAgfSk7IC8vIFRyaWdnZXIgdGhlIGNsaWNrIGV2ZW50IG9uIHRoZSBsaW5rCgogICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGljaygpOwogICAgcmV0dXJuIGZhbHNlOwogIH0KfTsgLy8gLS0tIFByb3BzIC0tLQoKCmV4cG9ydCB2YXIgcHJvcHMgPSBtYWtlUHJvcHNDb25maWd1cmFibGUoc29ydEtleXMoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtb2RlbFByb3BzKSwge30sIHsKICBhbGlnbjogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ2xlZnQnKSwKICBhcmlhTGFiZWw6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdQYWdpbmF0aW9uJyksCiAgZGlzYWJsZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgZWxsaXBzaXNDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIGVsbGlwc2lzVGV4dDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgIlx1MjAyNiIpLAogIC8vICfigKYnCiAgZmlyc3RDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIGZpcnN0TnVtYmVyOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIGZpcnN0VGV4dDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgIlx4QUIiKSwKICAvLyAnwqsnCiAgaGlkZUVsbGlwc2lzOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIGhpZGVHb3RvRW5kQnV0dG9uczogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBsYWJlbEZpcnN0UGFnZTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0dvIHRvIGZpcnN0IHBhZ2UnKSwKICBsYWJlbExhc3RQYWdlOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnR28gdG8gbGFzdCBwYWdlJyksCiAgbGFiZWxOZXh0UGFnZTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0dvIHRvIG5leHQgcGFnZScpLAogIGxhYmVsUGFnZTogbWFrZVByb3AoUFJPUF9UWVBFX0ZVTkNUSU9OX1NUUklORywgJ0dvIHRvIHBhZ2UnKSwKICBsYWJlbFByZXZQYWdlOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnR28gdG8gcHJldmlvdXMgcGFnZScpLAogIGxhc3RDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIGxhc3ROdW1iZXI6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgbGFzdFRleHQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICJceEJCIiksCiAgLy8gJ8K7JwogIGxpbWl0OiBtYWtlUHJvcChQUk9QX1RZUEVfTlVNQkVSX1NUUklORywgREVGQVVMVF9MSU1JVCwKICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogIGZ1bmN0aW9uICh2YWx1ZSkgewogICAgaWYgKHRvSW50ZWdlcih2YWx1ZSwgMCkgPCAxKSB7CiAgICAgIHdhcm4oJ1Byb3AgImxpbWl0IiBtdXN0IGJlIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAiMCInLCBOQU1FX1BBR0lOQVRJT04pOwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmV0dXJuIHRydWU7CiAgfSksCiAgbmV4dENsYXNzOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORyksCiAgbmV4dFRleHQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICJcdTIwM0EiKSwKICAvLyAn4oC6JwogIHBhZ2VDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIHBpbGxzOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHByZXZDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIHByZXZUZXh0OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAiXHUyMDM5IiksCiAgLy8gJ+KAuScKICBzaXplOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKQp9KSksICdwYWdpbmF0aW9uJyk7IC8vIC0tLSBNaXhpbiAtLS0KLy8gQHZ1ZS9jb21wb25lbnQKCmV4cG9ydCB2YXIgcGFnaW5hdGlvbk1peGluID0gVnVlLmV4dGVuZCh7CiAgbWl4aW5zOiBbbW9kZWxNaXhpbiwgbm9ybWFsaXplU2xvdE1peGluXSwKICBwcm9wczogcHJvcHMsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIC8vIGAtMWAgc2lnbmlmaWVzIG5vIHBhZ2UgaW5pdGlhbGx5IHNlbGVjdGVkCiAgICB2YXIgY3VycmVudFBhZ2UgPSB0b0ludGVnZXIodGhpc1tNT0RFTF9QUk9QX05BTUVdLCAwKTsKICAgIGN1cnJlbnRQYWdlID0gY3VycmVudFBhZ2UgPiAwID8gY3VycmVudFBhZ2UgOiAtMTsKICAgIHJldHVybiB7CiAgICAgIGN1cnJlbnRQYWdlOiBjdXJyZW50UGFnZSwKICAgICAgbG9jYWxOdW1iZXJPZlBhZ2VzOiAxLAogICAgICBsb2NhbExpbWl0OiBERUZBVUxUX0xJTUlUCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGJ0blNpemU6IGZ1bmN0aW9uIGJ0blNpemUoKSB7CiAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwogICAgICByZXR1cm4gc2l6ZSA/ICJwYWdpbmF0aW9uLSIuY29uY2F0KHNpemUpIDogJyc7CiAgICB9LAogICAgYWxpZ25tZW50OiBmdW5jdGlvbiBhbGlnbm1lbnQoKSB7CiAgICAgIHZhciBhbGlnbiA9IHRoaXMuYWxpZ247CgogICAgICBpZiAoYWxpZ24gPT09ICdjZW50ZXInKSB7CiAgICAgICAgcmV0dXJuICdqdXN0aWZ5LWNvbnRlbnQtY2VudGVyJzsKICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2VuZCcgfHwgYWxpZ24gPT09ICdyaWdodCcpIHsKICAgICAgICByZXR1cm4gJ2p1c3RpZnktY29udGVudC1lbmQnOwogICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnZmlsbCcpIHsKICAgICAgICAvLyBUaGUgcGFnZS1pdGVtcyB3aWxsIGFsc28gaGF2ZSAnZmxleC1maWxsJyBhZGRlZAogICAgICAgIC8vIFdlIGFkZCB0ZXh0IGNlbnRlcmluZyB0byBtYWtlIHRoZSBidXR0b24gYXBwZWFyYW5jZSBiZXR0ZXIgaW4gZmlsbCBtb2RlCiAgICAgICAgcmV0dXJuICd0ZXh0LWNlbnRlcic7CiAgICAgIH0KCiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICBzdHlsZUNsYXNzOiBmdW5jdGlvbiBzdHlsZUNsYXNzKCkgewogICAgICByZXR1cm4gdGhpcy5waWxscyA/ICdiLXBhZ2luYXRpb24tcGlsbHMnIDogJyc7CiAgICB9LAogICAgY29tcHV0ZWRDdXJyZW50UGFnZTogZnVuY3Rpb24gY29tcHV0ZWRDdXJyZW50UGFnZSgpIHsKICAgICAgcmV0dXJuIHNhbml0aXplQ3VycmVudFBhZ2UodGhpcy5jdXJyZW50UGFnZSwgdGhpcy5sb2NhbE51bWJlck9mUGFnZXMpOwogICAgfSwKICAgIHBhZ2luYXRpb25QYXJhbXM6IGZ1bmN0aW9uIHBhZ2luYXRpb25QYXJhbXMoKSB7CiAgICAgIC8vIERldGVybWluZSBpZiB3ZSBzaG91bGQgc2hvdyB0aGUgdGhlIGVsbGlwc2lzCiAgICAgIHZhciBsaW1pdCA9IHRoaXMubG9jYWxMaW1pdCwKICAgICAgICAgIG51bWJlck9mUGFnZXMgPSB0aGlzLmxvY2FsTnVtYmVyT2ZQYWdlcywKICAgICAgICAgIGN1cnJlbnRQYWdlID0gdGhpcy5jb21wdXRlZEN1cnJlbnRQYWdlLAogICAgICAgICAgaGlkZUVsbGlwc2lzID0gdGhpcy5oaWRlRWxsaXBzaXMsCiAgICAgICAgICBmaXJzdE51bWJlciA9IHRoaXMuZmlyc3ROdW1iZXIsCiAgICAgICAgICBsYXN0TnVtYmVyID0gdGhpcy5sYXN0TnVtYmVyOwogICAgICB2YXIgc2hvd0ZpcnN0RG90cyA9IGZhbHNlOwogICAgICB2YXIgc2hvd0xhc3REb3RzID0gZmFsc2U7CiAgICAgIHZhciBudW1iZXJPZkxpbmtzID0gbGltaXQ7CiAgICAgIHZhciBzdGFydE51bWJlciA9IDE7CgogICAgICBpZiAobnVtYmVyT2ZQYWdlcyA8PSBsaW1pdCkgewogICAgICAgIC8vIFNwZWNpYWwgY2FzZTogTGVzcyBwYWdlcyBhdmFpbGFibGUgdGhhbiB0aGUgbGltaXQgb2YgZGlzcGxheWVkIHBhZ2VzCiAgICAgICAgbnVtYmVyT2ZMaW5rcyA9IG51bWJlck9mUGFnZXM7CiAgICAgIH0gZWxzZSBpZiAoY3VycmVudFBhZ2UgPCBsaW1pdCAtIDEgJiYgbGltaXQgPiBFTExJUFNJU19USFJFU0hPTEQpIHsKICAgICAgICBpZiAoIWhpZGVFbGxpcHNpcyB8fCBsYXN0TnVtYmVyKSB7CiAgICAgICAgICBzaG93TGFzdERvdHMgPSB0cnVlOwogICAgICAgICAgbnVtYmVyT2ZMaW5rcyA9IGxpbWl0IC0gKGZpcnN0TnVtYmVyID8gMCA6IDEpOwogICAgICAgIH0KCiAgICAgICAgbnVtYmVyT2ZMaW5rcyA9IG1hdGhNaW4obnVtYmVyT2ZMaW5rcywgbGltaXQpOwogICAgICB9IGVsc2UgaWYgKG51bWJlck9mUGFnZXMgLSBjdXJyZW50UGFnZSArIDIgPCBsaW1pdCAmJiBsaW1pdCA+IEVMTElQU0lTX1RIUkVTSE9MRCkgewogICAgICAgIGlmICghaGlkZUVsbGlwc2lzIHx8IGZpcnN0TnVtYmVyKSB7CiAgICAgICAgICBzaG93Rmlyc3REb3RzID0gdHJ1ZTsKICAgICAgICAgIG51bWJlck9mTGlua3MgPSBsaW1pdCAtIChsYXN0TnVtYmVyID8gMCA6IDEpOwogICAgICAgIH0KCiAgICAgICAgc3RhcnROdW1iZXIgPSBudW1iZXJPZlBhZ2VzIC0gbnVtYmVyT2ZMaW5rcyArIDE7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gV2UgYXJlIHNvbWV3aGVyZSBpbiB0aGUgbWlkZGxlIG9mIHRoZSBwYWdlIGxpc3QKICAgICAgICBpZiAobGltaXQgPiBFTExJUFNJU19USFJFU0hPTEQpIHsKICAgICAgICAgIG51bWJlck9mTGlua3MgPSBsaW1pdCAtIChoaWRlRWxsaXBzaXMgPyAwIDogMik7CiAgICAgICAgICBzaG93Rmlyc3REb3RzID0gISEoIWhpZGVFbGxpcHNpcyB8fCBmaXJzdE51bWJlcik7CiAgICAgICAgICBzaG93TGFzdERvdHMgPSAhISghaGlkZUVsbGlwc2lzIHx8IGxhc3ROdW1iZXIpOwogICAgICAgIH0KCiAgICAgICAgc3RhcnROdW1iZXIgPSBjdXJyZW50UGFnZSAtIG1hdGhGbG9vcihudW1iZXJPZkxpbmtzIC8gMik7CiAgICAgIH0gLy8gU2FuaXR5IGNoZWNrcwoKICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovCgoKICAgICAgaWYgKHN0YXJ0TnVtYmVyIDwgMSkgewogICAgICAgIHN0YXJ0TnVtYmVyID0gMTsKICAgICAgICBzaG93Rmlyc3REb3RzID0gZmFsc2U7CiAgICAgIH0gZWxzZSBpZiAoc3RhcnROdW1iZXIgPiBudW1iZXJPZlBhZ2VzIC0gbnVtYmVyT2ZMaW5rcykgewogICAgICAgIHN0YXJ0TnVtYmVyID0gbnVtYmVyT2ZQYWdlcyAtIG51bWJlck9mTGlua3MgKyAxOwogICAgICAgIHNob3dMYXN0RG90cyA9IGZhbHNlOwogICAgICB9CgogICAgICBpZiAoc2hvd0ZpcnN0RG90cyAmJiBmaXJzdE51bWJlciAmJiBzdGFydE51bWJlciA8IDQpIHsKICAgICAgICBudW1iZXJPZkxpbmtzID0gbnVtYmVyT2ZMaW5rcyArIDI7CiAgICAgICAgc3RhcnROdW1iZXIgPSAxOwogICAgICAgIHNob3dGaXJzdERvdHMgPSBmYWxzZTsKICAgICAgfQoKICAgICAgdmFyIGxhc3RQYWdlTnVtYmVyID0gc3RhcnROdW1iZXIgKyBudW1iZXJPZkxpbmtzIC0gMTsKCiAgICAgIGlmIChzaG93TGFzdERvdHMgJiYgbGFzdE51bWJlciAmJiBsYXN0UGFnZU51bWJlciA+IG51bWJlck9mUGFnZXMgLSAzKSB7CiAgICAgICAgbnVtYmVyT2ZMaW5rcyA9IG51bWJlck9mTGlua3MgKyAobGFzdFBhZ2VOdW1iZXIgPT09IG51bWJlck9mUGFnZXMgLSAyID8gMiA6IDMpOwogICAgICAgIHNob3dMYXN0RG90cyA9IGZhbHNlOwogICAgICB9IC8vIFNwZWNpYWwgaGFuZGxpbmcgZm9yIGxvd2VyIGxpbWl0cyAod2hlcmUgZWxsaXBzaXMgYXJlIG5ldmVyIHNob3duKQoKCiAgICAgIGlmIChsaW1pdCA8PSBFTExJUFNJU19USFJFU0hPTEQpIHsKICAgICAgICBpZiAoZmlyc3ROdW1iZXIgJiYgc3RhcnROdW1iZXIgPT09IDEpIHsKICAgICAgICAgIG51bWJlck9mTGlua3MgPSBtYXRoTWluKG51bWJlck9mTGlua3MgKyAxLCBudW1iZXJPZlBhZ2VzLCBsaW1pdCArIDEpOwogICAgICAgIH0gZWxzZSBpZiAobGFzdE51bWJlciAmJiBudW1iZXJPZlBhZ2VzID09PSBzdGFydE51bWJlciArIG51bWJlck9mTGlua3MgLSAxKSB7CiAgICAgICAgICBzdGFydE51bWJlciA9IG1hdGhNYXgoc3RhcnROdW1iZXIgLSAxLCAxKTsKICAgICAgICAgIG51bWJlck9mTGlua3MgPSBtYXRoTWluKG51bWJlck9mUGFnZXMgLSBzdGFydE51bWJlciArIDEsIG51bWJlck9mUGFnZXMsIGxpbWl0ICsgMSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBudW1iZXJPZkxpbmtzID0gbWF0aE1pbihudW1iZXJPZkxpbmtzLCBudW1iZXJPZlBhZ2VzIC0gc3RhcnROdW1iZXIgKyAxKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBzaG93Rmlyc3REb3RzOiBzaG93Rmlyc3REb3RzLAogICAgICAgIHNob3dMYXN0RG90czogc2hvd0xhc3REb3RzLAogICAgICAgIG51bWJlck9mTGlua3M6IG51bWJlck9mTGlua3MsCiAgICAgICAgc3RhcnROdW1iZXI6IHN0YXJ0TnVtYmVyCiAgICAgIH07CiAgICB9LAogICAgcGFnZUxpc3Q6IGZ1bmN0aW9uIHBhZ2VMaXN0KCkgewogICAgICAvLyBHZW5lcmF0ZXMgdGhlIHBhZ2VMaXN0IGFycmF5CiAgICAgIHZhciBfdGhpcyRwYWdpbmF0aW9uUGFyYW0gPSB0aGlzLnBhZ2luYXRpb25QYXJhbXMsCiAgICAgICAgICBudW1iZXJPZkxpbmtzID0gX3RoaXMkcGFnaW5hdGlvblBhcmFtLm51bWJlck9mTGlua3MsCiAgICAgICAgICBzdGFydE51bWJlciA9IF90aGlzJHBhZ2luYXRpb25QYXJhbS5zdGFydE51bWJlcjsKICAgICAgdmFyIGN1cnJlbnRQYWdlID0gdGhpcy5jb21wdXRlZEN1cnJlbnRQYWdlOyAvLyBHZW5lcmF0ZSBsaXN0IG9mIHBhZ2UgbnVtYmVycwoKICAgICAgdmFyIHBhZ2VzID0gbWFrZVBhZ2VBcnJheShzdGFydE51bWJlciwgbnVtYmVyT2ZMaW5rcyk7IC8vIFdlIGxpbWl0IHRvIGEgdG90YWwgb2YgMyBwYWdlIGJ1dHRvbnMgb24gWFMgc2NyZWVucwogICAgICAvLyBTbyBhZGQgY2xhc3NlcyB0byBwYWdlIGxpbmtzIHRvIGhpZGUgdGhlbSBmb3IgWFMgYnJlYWtwb2ludAogICAgICAvLyBOb3RlOiBFbGxpcHNpcyB3aWxsIGFsc28gYmUgaGlkZGVuIG9uIFhTIHNjcmVlbnMKICAgICAgLy8gVE9ETzogTWFrZSB0aGlzIHZpc3VhbCBsaW1pdCBjb25maWd1cmFibGUgYmFzZWQgb24gYnJlYWtwb2ludChzKQoKICAgICAgaWYgKHBhZ2VzLmxlbmd0aCA+IDMpIHsKICAgICAgICB2YXIgaWR4ID0gY3VycmVudFBhZ2UgLSBzdGFydE51bWJlcjsgLy8gVEhlIGZvbGxvd2luZyBpcyBhIGJvb3RzdHJhcC12dWUgY3VzdG9tIHV0aWxpdHkgY2xhc3MKCiAgICAgICAgdmFyIGNsYXNzZXMgPSAnYnYtZC14cy1kb3duLW5vbmUnOwoKICAgICAgICBpZiAoaWR4ID09PSAwKSB7CiAgICAgICAgICAvLyBLZWVwIGxlZnRtb3N0IDMgYnV0dG9ucyB2aXNpYmxlIHdoZW4gY3VycmVudCBwYWdlIGlzIGZpcnN0IHBhZ2UKICAgICAgICAgIGZvciAodmFyIGkgPSAzOyBpIDwgcGFnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgcGFnZXNbaV0uY2xhc3NlcyA9IGNsYXNzZXM7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChpZHggPT09IHBhZ2VzLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIC8vIEtlZXAgcmlnaHRtb3N0IDMgYnV0dG9ucyB2aXNpYmxlIHdoZW4gY3VycmVudCBwYWdlIGlzIGxhc3QgcGFnZQogICAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IHBhZ2VzLmxlbmd0aCAtIDM7IF9pKyspIHsKICAgICAgICAgICAgcGFnZXNbX2ldLmNsYXNzZXMgPSBjbGFzc2VzOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBIaWRlIGFsbCBleGNlcHQgY3VycmVudCBwYWdlLCBjdXJyZW50IHBhZ2UgLSAxIGFuZCBjdXJyZW50IHBhZ2UgKyAxCiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwOyBfaTIgPCBpZHggLSAxOyBfaTIrKykgewogICAgICAgICAgICAvLyBoaWRlIHNvbWUgbGVmdCBidXR0b24ocykKICAgICAgICAgICAgcGFnZXNbX2kyXS5jbGFzc2VzID0gY2xhc3NlczsKICAgICAgICAgIH0KCiAgICAgICAgICBmb3IgKHZhciBfaTMgPSBwYWdlcy5sZW5ndGggLSAxOyBfaTMgPiBpZHggKyAxOyBfaTMtLSkgewogICAgICAgICAgICAvLyBoaWRlIHNvbWUgcmlnaHQgYnV0dG9uKHMpCiAgICAgICAgICAgIHBhZ2VzW19pM10uY2xhc3NlcyA9IGNsYXNzZXM7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcGFnZXM7CiAgICB9CiAgfSwKICB3YXRjaDogKF93YXRjaCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCBNT0RFTF9QUk9QX05BTUUsIGZ1bmN0aW9uIChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHNhbml0aXplQ3VycmVudFBhZ2UobmV3VmFsdWUsIHRoaXMubG9jYWxOdW1iZXJPZlBhZ2VzKTsKICAgIH0KICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgImN1cnJlbnRQYWdlIiwgZnVuY3Rpb24gY3VycmVudFBhZ2UobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7CiAgICAgIC8vIEVtaXQgYG51bGxgIGlmIG5vIHBhZ2Ugc2VsZWN0ZWQKICAgICAgdGhpcy4kZW1pdChNT0RFTF9FVkVOVF9OQU1FLCBuZXdWYWx1ZSA+IDAgPyBuZXdWYWx1ZSA6IG51bGwpOwogICAgfQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAibGltaXQiLCBmdW5jdGlvbiBsaW1pdChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgdGhpcy5sb2NhbExpbWl0ID0gc2FuaXRpemVMaW1pdChuZXdWYWx1ZSk7CiAgICB9CiAgfSksIF93YXRjaCksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vIFNldCBvdXIgZGVmYXVsdCB2YWx1ZXMgaW4gZGF0YQoKCiAgICB0aGlzLmxvY2FsTGltaXQgPSBzYW5pdGl6ZUxpbWl0KHRoaXMubGltaXQpOwogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAvLyBTYW5pdHkgY2hlY2sKICAgICAgX3RoaXMuY3VycmVudFBhZ2UgPSBfdGhpcy5jdXJyZW50UGFnZSA+IF90aGlzLmxvY2FsTnVtYmVyT2ZQYWdlcyA/IF90aGlzLmxvY2FsTnVtYmVyT2ZQYWdlcyA6IF90aGlzLmN1cnJlbnRQYWdlOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVLZXlOYXY6IGZ1bmN0aW9uIGhhbmRsZUtleU5hdihldmVudCkgewogICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LmtleUNvZGUsCiAgICAgICAgICBzaGlmdEtleSA9IGV2ZW50LnNoaWZ0S2V5OwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KCiAgICAgIGlmICh0aGlzLmlzTmF2KSB7CiAgICAgICAgLy8gV2UgZGlzYWJsZSBsZWZ0L3JpZ2h0IGtleWJvYXJkIG5hdmlnYXRpb24gaW4gYDxiLXBhZ2luYXRpb24tbmF2PmAKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChrZXlDb2RlID09PSBDT0RFX0xFRlQgfHwga2V5Q29kZSA9PT0gQ09ERV9VUCkgewogICAgICAgIHN0b3BFdmVudChldmVudCwgewogICAgICAgICAgcHJvcGFnYXRpb246IGZhbHNlCiAgICAgICAgfSk7CiAgICAgICAgc2hpZnRLZXkgPyB0aGlzLmZvY3VzRmlyc3QoKSA6IHRoaXMuZm9jdXNQcmV2KCk7CiAgICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA9PT0gQ09ERV9SSUdIVCB8fCBrZXlDb2RlID09PSBDT0RFX0RPV04pIHsKICAgICAgICBzdG9wRXZlbnQoZXZlbnQsIHsKICAgICAgICAgIHByb3BhZ2F0aW9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHNoaWZ0S2V5ID8gdGhpcy5mb2N1c0xhc3QoKSA6IHRoaXMuZm9jdXNOZXh0KCk7CiAgICAgIH0KICAgIH0sCiAgICBnZXRCdXR0b25zOiBmdW5jdGlvbiBnZXRCdXR0b25zKCkgewogICAgICAvLyBSZXR1cm4gb25seSBidXR0b25zIHRoYXQgYXJlIHZpc2libGUKICAgICAgcmV0dXJuIHNlbGVjdEFsbCgnYnV0dG9uLnBhZ2UtbGluaywgYS5wYWdlLWxpbmsnLCB0aGlzLiRlbCkuZmlsdGVyKGZ1bmN0aW9uIChidG4pIHsKICAgICAgICByZXR1cm4gaXNWaXNpYmxlKGJ0bik7CiAgICAgIH0pOwogICAgfSwKICAgIGZvY3VzQ3VycmVudDogZnVuY3Rpb24gZm9jdXNDdXJyZW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsgLy8gV2UgZG8gdGhpcyBpbiBgJG5leHRUaWNrKClgIHRvIGVuc3VyZSBidXR0b25zIGhhdmUgZmluaXNoZWQgcmVuZGVyaW5nCgoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBidG4gPSBfdGhpczIuZ2V0QnV0dG9ucygpLmZpbmQoZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgICByZXR1cm4gdG9JbnRlZ2VyKGdldEF0dHIoZWwsICdhcmlhLXBvc2luc2V0JyksIDApID09PSBfdGhpczIuY29tcHV0ZWRDdXJyZW50UGFnZTsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKCFhdHRlbXB0Rm9jdXMoYnRuKSkgewogICAgICAgICAgLy8gRmFsbGJhY2sgaWYgY3VycmVudCBwYWdlIGlzIG5vdCBpbiBidXR0b24gbGlzdAogICAgICAgICAgX3RoaXMyLmZvY3VzRmlyc3QoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGZvY3VzRmlyc3Q6IGZ1bmN0aW9uIGZvY3VzRmlyc3QoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOyAvLyBXZSBkbyB0aGlzIGluIGAkbmV4dFRpY2soKWAgdG8gZW5zdXJlIGJ1dHRvbnMgaGF2ZSBmaW5pc2hlZCByZW5kZXJpbmcKCgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGJ0biA9IF90aGlzMy5nZXRCdXR0b25zKCkuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiAhaXNEaXNhYmxlZChlbCk7CiAgICAgICAgfSk7CgogICAgICAgIGF0dGVtcHRGb2N1cyhidG4pOwogICAgICB9KTsKICAgIH0sCiAgICBmb2N1c0xhc3Q6IGZ1bmN0aW9uIGZvY3VzTGFzdCgpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7IC8vIFdlIGRvIHRoaXMgaW4gYCRuZXh0VGljaygpYCB0byBlbnN1cmUgYnV0dG9ucyBoYXZlIGZpbmlzaGVkIHJlbmRlcmluZwoKCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYnRuID0gX3RoaXM0LmdldEJ1dHRvbnMoKS5yZXZlcnNlKCkuZmluZChmdW5jdGlvbiAoZWwpIHsKICAgICAgICAgIHJldHVybiAhaXNEaXNhYmxlZChlbCk7CiAgICAgICAgfSk7CgogICAgICAgIGF0dGVtcHRGb2N1cyhidG4pOwogICAgICB9KTsKICAgIH0sCiAgICBmb2N1c1ByZXY6IGZ1bmN0aW9uIGZvY3VzUHJldigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7IC8vIFdlIGRvIHRoaXMgaW4gYCRuZXh0VGljaygpYCB0byBlbnN1cmUgYnV0dG9ucyBoYXZlIGZpbmlzaGVkIHJlbmRlcmluZwoKCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgYnV0dG9ucyA9IF90aGlzNS5nZXRCdXR0b25zKCk7CgogICAgICAgIHZhciBpbmRleCA9IGJ1dHRvbnMuaW5kZXhPZihnZXRBY3RpdmVFbGVtZW50KCkpOwoKICAgICAgICBpZiAoaW5kZXggPiAwICYmICFpc0Rpc2FibGVkKGJ1dHRvbnNbaW5kZXggLSAxXSkpIHsKICAgICAgICAgIGF0dGVtcHRGb2N1cyhidXR0b25zW2luZGV4IC0gMV0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZm9jdXNOZXh0OiBmdW5jdGlvbiBmb2N1c05leHQoKSB7CiAgICAgIHZhciBfdGhpczYgPSB0aGlzOyAvLyBXZSBkbyB0aGlzIGluIGAkbmV4dFRpY2soKWAgdG8gZW5zdXJlIGJ1dHRvbnMgaGF2ZSBmaW5pc2hlZCByZW5kZXJpbmcKCgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGJ1dHRvbnMgPSBfdGhpczYuZ2V0QnV0dG9ucygpOwoKICAgICAgICB2YXIgaW5kZXggPSBidXR0b25zLmluZGV4T2YoZ2V0QWN0aXZlRWxlbWVudCgpKTsKCiAgICAgICAgaWYgKGluZGV4IDwgYnV0dG9ucy5sZW5ndGggLSAxICYmICFpc0Rpc2FibGVkKGJ1dHRvbnNbaW5kZXggKyAxXSkpIHsKICAgICAgICAgIGF0dGVtcHRGb2N1cyhidXR0b25zW2luZGV4ICsgMV0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICB2YXIgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkLAogICAgICAgIGxhYmVsUGFnZSA9IHRoaXMubGFiZWxQYWdlLAogICAgICAgIGFyaWFMYWJlbCA9IHRoaXMuYXJpYUxhYmVsLAogICAgICAgIGlzTmF2ID0gdGhpcy5pc05hdiwKICAgICAgICBudW1iZXJPZlBhZ2VzID0gdGhpcy5sb2NhbE51bWJlck9mUGFnZXMsCiAgICAgICAgY3VycmVudFBhZ2UgPSB0aGlzLmNvbXB1dGVkQ3VycmVudFBhZ2U7CiAgICB2YXIgcGFnZU51bWJlcnMgPSB0aGlzLnBhZ2VMaXN0Lm1hcChmdW5jdGlvbiAocCkgewogICAgICByZXR1cm4gcC5udW1iZXI7CiAgICB9KTsKICAgIHZhciBfdGhpcyRwYWdpbmF0aW9uUGFyYW0yID0gdGhpcy5wYWdpbmF0aW9uUGFyYW1zLAogICAgICAgIHNob3dGaXJzdERvdHMgPSBfdGhpcyRwYWdpbmF0aW9uUGFyYW0yLnNob3dGaXJzdERvdHMsCiAgICAgICAgc2hvd0xhc3REb3RzID0gX3RoaXMkcGFnaW5hdGlvblBhcmFtMi5zaG93TGFzdERvdHM7CiAgICB2YXIgZmlsbCA9IHRoaXMuYWxpZ24gPT09ICdmaWxsJzsKICAgIHZhciAkYnV0dG9ucyA9IFtdOyAvLyBIZWxwZXIgZnVuY3Rpb24gYW5kIGZsYWcKCiAgICB2YXIgaXNBY3RpdmVQYWdlID0gZnVuY3Rpb24gaXNBY3RpdmVQYWdlKHBhZ2VOdW1iZXIpIHsKICAgICAgcmV0dXJuIHBhZ2VOdW1iZXIgPT09IGN1cnJlbnRQYWdlOwogICAgfTsKCiAgICB2YXIgbm9DdXJyZW50UGFnZSA9IHRoaXMuY3VycmVudFBhZ2UgPCAxOyAvLyBGYWN0b3J5IGZ1bmN0aW9uIGZvciBwcmV2L25leHQvZmlyc3QvbGFzdCBidXR0b25zCgogICAgdmFyIG1ha2VFbmRCdG4gPSBmdW5jdGlvbiBtYWtlRW5kQnRuKGxpbmtUbywgYXJpYUxhYmVsLCBidG5TbG90LCBidG5UZXh0LCBidG5DbGFzcywgcGFnZVRlc3QsIGtleSkgewogICAgICB2YXIgaXNEaXNhYmxlZCA9IGRpc2FibGVkIHx8IGlzQWN0aXZlUGFnZShwYWdlVGVzdCkgfHwgbm9DdXJyZW50UGFnZSB8fCBsaW5rVG8gPCAxIHx8IGxpbmtUbyA+IG51bWJlck9mUGFnZXM7CiAgICAgIHZhciBwYWdlTnVtYmVyID0gbGlua1RvIDwgMSA/IDEgOiBsaW5rVG8gPiBudW1iZXJPZlBhZ2VzID8gbnVtYmVyT2ZQYWdlcyA6IGxpbmtUbzsKICAgICAgdmFyIHNjb3BlID0gewogICAgICAgIGRpc2FibGVkOiBpc0Rpc2FibGVkLAogICAgICAgIHBhZ2U6IHBhZ2VOdW1iZXIsCiAgICAgICAgaW5kZXg6IHBhZ2VOdW1iZXIgLSAxCiAgICAgIH07CiAgICAgIHZhciAkYnRuQ29udGVudCA9IF90aGlzNy5ub3JtYWxpemVTbG90KGJ0blNsb3QsIHNjb3BlKSB8fCB0b1N0cmluZyhidG5UZXh0KSB8fCBoKCk7CiAgICAgIHZhciAkaW5uZXIgPSBoKGlzRGlzYWJsZWQgPyAnc3BhbicgOiBpc05hdiA/IEJMaW5rIDogJ2J1dHRvbicsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3BhZ2UtbGluaycsCiAgICAgICAgImNsYXNzIjogewogICAgICAgICAgJ2ZsZXgtZ3Jvdy0xJzogIWlzTmF2ICYmICFpc0Rpc2FibGVkICYmIGZpbGwKICAgICAgICB9LAogICAgICAgIHByb3BzOiBpc0Rpc2FibGVkIHx8ICFpc05hdiA/IHt9IDogX3RoaXM3LmxpbmtQcm9wcyhsaW5rVG8pLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICByb2xlOiBpc05hdiA/IG51bGwgOiAnbWVudWl0ZW0nLAogICAgICAgICAgdHlwZTogaXNOYXYgfHwgaXNEaXNhYmxlZCA/IG51bGwgOiAnYnV0dG9uJywKICAgICAgICAgIHRhYmluZGV4OiBpc0Rpc2FibGVkIHx8IGlzTmF2ID8gbnVsbCA6ICctMScsCiAgICAgICAgICAnYXJpYS1sYWJlbCc6IGFyaWFMYWJlbCwKICAgICAgICAgICdhcmlhLWNvbnRyb2xzJzogX3RoaXM3LmFyaWFDb250cm9scyB8fCBudWxsLAogICAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiBpc0Rpc2FibGVkID8gJ3RydWUnIDogbnVsbAogICAgICAgIH0sCiAgICAgICAgb246IGlzRGlzYWJsZWQgPyB7fSA6IHsKICAgICAgICAgICchY2xpY2snOiBmdW5jdGlvbiBjbGljayhldmVudCkgewogICAgICAgICAgICBfdGhpczcub25DbGljayhldmVudCwgbGlua1RvKTsKICAgICAgICAgIH0sCiAgICAgICAgICBrZXlkb3duOiBvblNwYWNlS2V5CiAgICAgICAgfQogICAgICB9LCBbJGJ0bkNvbnRlbnRdKTsKICAgICAgcmV0dXJuIGgoJ2xpJywgewogICAgICAgIGtleToga2V5LAogICAgICAgIHN0YXRpY0NsYXNzOiAncGFnZS1pdGVtJywKICAgICAgICAiY2xhc3MiOiBbewogICAgICAgICAgZGlzYWJsZWQ6IGlzRGlzYWJsZWQsCiAgICAgICAgICAnZmxleC1maWxsJzogZmlsbCwKICAgICAgICAgICdkLWZsZXgnOiBmaWxsICYmICFpc05hdiAmJiAhaXNEaXNhYmxlZAogICAgICAgIH0sIGJ0bkNsYXNzXSwKICAgICAgICBhdHRyczogewogICAgICAgICAgcm9sZTogaXNOYXYgPyBudWxsIDogJ3ByZXNlbnRhdGlvbicsCiAgICAgICAgICAnYXJpYS1oaWRkZW4nOiBpc0Rpc2FibGVkID8gJ3RydWUnIDogbnVsbAogICAgICAgIH0KICAgICAgfSwgWyRpbm5lcl0pOwogICAgfTsgLy8gRWxsaXBzaXMgZmFjdG9yeQoKCiAgICB2YXIgbWFrZUVsbGlwc2lzID0gZnVuY3Rpb24gbWFrZUVsbGlwc2lzKGlzTGFzdCkgewogICAgICByZXR1cm4gaCgnbGknLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdwYWdlLWl0ZW0nLAogICAgICAgICJjbGFzcyI6IFsnZGlzYWJsZWQnLCAnYnYtZC14cy1kb3duLW5vbmUnLCBmaWxsID8gJ2ZsZXgtZmlsbCcgOiAnJywgX3RoaXM3LmVsbGlwc2lzQ2xhc3NdLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICByb2xlOiAnc2VwYXJhdG9yJwogICAgICAgIH0sCiAgICAgICAga2V5OiAiZWxsaXBzaXMtIi5jb25jYXQoaXNMYXN0ID8gJ2xhc3QnIDogJ2ZpcnN0JykKICAgICAgfSwgW2goJ3NwYW4nLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdwYWdlLWxpbmsnCiAgICAgIH0sIFtfdGhpczcubm9ybWFsaXplU2xvdChTTE9UX05BTUVfRUxMSVBTSVNfVEVYVCkgfHwgdG9TdHJpbmcoX3RoaXM3LmVsbGlwc2lzVGV4dCkgfHwgaCgpXSldKTsKICAgIH07IC8vIFBhZ2UgYnV0dG9uIGZhY3RvcnkKCgogICAgdmFyIG1ha2VQYWdlQnV0dG9uID0gZnVuY3Rpb24gbWFrZVBhZ2VCdXR0b24ocGFnZSwgaWR4KSB7CiAgICAgIHZhciBwYWdlTnVtYmVyID0gcGFnZS5udW1iZXI7CiAgICAgIHZhciBhY3RpdmUgPSBpc0FjdGl2ZVBhZ2UocGFnZU51bWJlcikgJiYgIW5vQ3VycmVudFBhZ2U7IC8vIEFjdGl2ZSBwYWdlIHdpbGwgaGF2ZSB0YWJpbmRleCBvZiAwLCBvciBpZiBubyBjdXJyZW50IHBhZ2UgYW5kIGZpcnN0IHBhZ2UgYnV0dG9uCgogICAgICB2YXIgdGFiSW5kZXggPSBkaXNhYmxlZCA/IG51bGwgOiBhY3RpdmUgfHwgbm9DdXJyZW50UGFnZSAmJiBpZHggPT09IDAgPyAnMCcgOiAnLTEnOwogICAgICB2YXIgYXR0cnMgPSB7CiAgICAgICAgcm9sZTogaXNOYXYgPyBudWxsIDogJ21lbnVpdGVtcmFkaW8nLAogICAgICAgIHR5cGU6IGlzTmF2IHx8IGRpc2FibGVkID8gbnVsbCA6ICdidXR0b24nLAogICAgICAgICdhcmlhLWRpc2FibGVkJzogZGlzYWJsZWQgPyAndHJ1ZScgOiBudWxsLAogICAgICAgICdhcmlhLWNvbnRyb2xzJzogX3RoaXM3LmFyaWFDb250cm9scyB8fCBudWxsLAogICAgICAgICdhcmlhLWxhYmVsJzogaGFzUHJvcEZ1bmN0aW9uKGxhYmVsUGFnZSkgPwogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgbGFiZWxQYWdlKHBhZ2VOdW1iZXIpIDogIiIuY29uY2F0KGlzRnVuY3Rpb24obGFiZWxQYWdlKSA/IGxhYmVsUGFnZSgpIDogbGFiZWxQYWdlLCAiICIpLmNvbmNhdChwYWdlTnVtYmVyKSwKICAgICAgICAnYXJpYS1jaGVja2VkJzogaXNOYXYgPyBudWxsIDogYWN0aXZlID8gJ3RydWUnIDogJ2ZhbHNlJywKICAgICAgICAnYXJpYS1jdXJyZW50JzogaXNOYXYgJiYgYWN0aXZlID8gJ3BhZ2UnIDogbnVsbCwKICAgICAgICAnYXJpYS1wb3NpbnNldCc6IGlzTmF2ID8gbnVsbCA6IHBhZ2VOdW1iZXIsCiAgICAgICAgJ2FyaWEtc2V0c2l6ZSc6IGlzTmF2ID8gbnVsbCA6IG51bWJlck9mUGFnZXMsCiAgICAgICAgLy8gQVJJQSAicm92aW5nIHRhYmluZGV4IiBtZXRob2QgKGV4Y2VwdCBpbiBgaXNOYXZgIG1vZGUpCiAgICAgICAgdGFiaW5kZXg6IGlzTmF2ID8gbnVsbCA6IHRhYkluZGV4CiAgICAgIH07CiAgICAgIHZhciBidG5Db250ZW50ID0gdG9TdHJpbmcoX3RoaXM3Lm1ha2VQYWdlKHBhZ2VOdW1iZXIpKTsKICAgICAgdmFyIHNjb3BlID0gewogICAgICAgIHBhZ2U6IHBhZ2VOdW1iZXIsCiAgICAgICAgaW5kZXg6IHBhZ2VOdW1iZXIgLSAxLAogICAgICAgIGNvbnRlbnQ6IGJ0bkNvbnRlbnQsCiAgICAgICAgYWN0aXZlOiBhY3RpdmUsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkCiAgICAgIH07CiAgICAgIHZhciAkaW5uZXIgPSBoKGRpc2FibGVkID8gJ3NwYW4nIDogaXNOYXYgPyBCTGluayA6ICdidXR0b24nLCB7CiAgICAgICAgcHJvcHM6IGRpc2FibGVkIHx8ICFpc05hdiA/IHt9IDogX3RoaXM3LmxpbmtQcm9wcyhwYWdlTnVtYmVyKSwKICAgICAgICBzdGF0aWNDbGFzczogJ3BhZ2UtbGluaycsCiAgICAgICAgImNsYXNzIjogewogICAgICAgICAgJ2ZsZXgtZ3Jvdy0xJzogIWlzTmF2ICYmICFkaXNhYmxlZCAmJiBmaWxsCiAgICAgICAgfSwKICAgICAgICBhdHRyczogYXR0cnMsCiAgICAgICAgb246IGRpc2FibGVkID8ge30gOiB7CiAgICAgICAgICAnIWNsaWNrJzogZnVuY3Rpb24gY2xpY2soZXZlbnQpIHsKICAgICAgICAgICAgX3RoaXM3Lm9uQ2xpY2soZXZlbnQsIHBhZ2VOdW1iZXIpOwogICAgICAgICAgfSwKICAgICAgICAgIGtleWRvd246IG9uU3BhY2VLZXkKICAgICAgICB9CiAgICAgIH0sIFtfdGhpczcubm9ybWFsaXplU2xvdChTTE9UX05BTUVfUEFHRSwgc2NvcGUpIHx8IGJ0bkNvbnRlbnRdKTsKICAgICAgcmV0dXJuIGgoJ2xpJywgewogICAgICAgIHN0YXRpY0NsYXNzOiAncGFnZS1pdGVtJywKICAgICAgICAiY2xhc3MiOiBbewogICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkLAogICAgICAgICAgYWN0aXZlOiBhY3RpdmUsCiAgICAgICAgICAnZmxleC1maWxsJzogZmlsbCwKICAgICAgICAgICdkLWZsZXgnOiBmaWxsICYmICFpc05hdiAmJiAhZGlzYWJsZWQKICAgICAgICB9LCBwYWdlLmNsYXNzZXMsIF90aGlzNy5wYWdlQ2xhc3NdLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICByb2xlOiBpc05hdiA/IG51bGwgOiAncHJlc2VudGF0aW9uJwogICAgICAgIH0sCiAgICAgICAga2V5OiAicGFnZS0iLmNvbmNhdChwYWdlTnVtYmVyKQogICAgICB9LCBbJGlubmVyXSk7CiAgICB9OyAvLyBHb3RvIGZpcnN0IHBhZ2UgYnV0dG9uCiAgICAvLyBEb24ndCByZW5kZXIgYnV0dG9uIHdoZW4gYGhpZGVHb3RvRW5kQnV0dG9uc2Agb3IgYGZpcnN0TnVtYmVyYCBpcyBzZXQKCgogICAgdmFyICRmaXJzdFBhZ2VCdG4gPSBoKCk7CgogICAgaWYgKCF0aGlzLmZpcnN0TnVtYmVyICYmICF0aGlzLmhpZGVHb3RvRW5kQnV0dG9ucykgewogICAgICAkZmlyc3RQYWdlQnRuID0gbWFrZUVuZEJ0bigxLCB0aGlzLmxhYmVsRmlyc3RQYWdlLCBTTE9UX05BTUVfRklSU1RfVEVYVCwgdGhpcy5maXJzdFRleHQsIHRoaXMuZmlyc3RDbGFzcywgMSwgJ3BhZ2luYXRpb24tZ290by1maXJzdCcpOwogICAgfQoKICAgICRidXR0b25zLnB1c2goJGZpcnN0UGFnZUJ0bik7IC8vIEdvdG8gcHJldmlvdXMgcGFnZSBidXR0b24KCiAgICAkYnV0dG9ucy5wdXNoKG1ha2VFbmRCdG4oY3VycmVudFBhZ2UgLSAxLCB0aGlzLmxhYmVsUHJldlBhZ2UsIFNMT1RfTkFNRV9QUkVWX1RFWFQsIHRoaXMucHJldlRleHQsIHRoaXMucHJldkNsYXNzLCAxLCAncGFnaW5hdGlvbi1nb3RvLXByZXYnKSk7IC8vIFNob3cgZmlyc3QgKDEpIGJ1dHRvbj8KCiAgICAkYnV0dG9ucy5wdXNoKHRoaXMuZmlyc3ROdW1iZXIgJiYgcGFnZU51bWJlcnNbMF0gIT09IDEgPyBtYWtlUGFnZUJ1dHRvbih7CiAgICAgIG51bWJlcjogMQogICAgfSwgMCkgOiBoKCkpOyAvLyBGaXJzdCBlbGxpcHNpcwoKICAgICRidXR0b25zLnB1c2goc2hvd0ZpcnN0RG90cyA/IG1ha2VFbGxpcHNpcyhmYWxzZSkgOiBoKCkpOyAvLyBJbmRpdmlkdWFsIHBhZ2UgbGlua3MKCiAgICB0aGlzLnBhZ2VMaXN0LmZvckVhY2goZnVuY3Rpb24gKHBhZ2UsIGlkeCkgewogICAgICB2YXIgb2Zmc2V0ID0gc2hvd0ZpcnN0RG90cyAmJiBfdGhpczcuZmlyc3ROdW1iZXIgJiYgcGFnZU51bWJlcnNbMF0gIT09IDEgPyAxIDogMDsKICAgICAgJGJ1dHRvbnMucHVzaChtYWtlUGFnZUJ1dHRvbihwYWdlLCBpZHggKyBvZmZzZXQpKTsKICAgIH0pOyAvLyBMYXN0IGVsbGlwc2lzCgogICAgJGJ1dHRvbnMucHVzaChzaG93TGFzdERvdHMgPyBtYWtlRWxsaXBzaXModHJ1ZSkgOiBoKCkpOyAvLyBTaG93IGxhc3QgcGFnZSBidXR0b24/CgogICAgJGJ1dHRvbnMucHVzaCh0aGlzLmxhc3ROdW1iZXIgJiYgcGFnZU51bWJlcnNbcGFnZU51bWJlcnMubGVuZ3RoIC0gMV0gIT09IG51bWJlck9mUGFnZXMgPyBtYWtlUGFnZUJ1dHRvbih7CiAgICAgIG51bWJlcjogbnVtYmVyT2ZQYWdlcwogICAgfSwgLTEpIDogaCgpKTsgLy8gR290byBuZXh0IHBhZ2UgYnV0dG9uCgogICAgJGJ1dHRvbnMucHVzaChtYWtlRW5kQnRuKGN1cnJlbnRQYWdlICsgMSwgdGhpcy5sYWJlbE5leHRQYWdlLCBTTE9UX05BTUVfTkVYVF9URVhULCB0aGlzLm5leHRUZXh0LCB0aGlzLm5leHRDbGFzcywgbnVtYmVyT2ZQYWdlcywgJ3BhZ2luYXRpb24tZ290by1uZXh0JykpOyAvLyBHb3RvIGxhc3QgcGFnZSBidXR0b24KICAgIC8vIERvbid0IHJlbmRlciBidXR0b24gd2hlbiBgaGlkZUdvdG9FbmRCdXR0b25zYCBvciBgbGFzdE51bWJlcmAgaXMgc2V0CgogICAgdmFyICRsYXN0UGFnZUJ0biA9IGgoKTsKCiAgICBpZiAoIXRoaXMubGFzdE51bWJlciAmJiAhdGhpcy5oaWRlR290b0VuZEJ1dHRvbnMpIHsKICAgICAgJGxhc3RQYWdlQnRuID0gbWFrZUVuZEJ0bihudW1iZXJPZlBhZ2VzLCB0aGlzLmxhYmVsTGFzdFBhZ2UsIFNMT1RfTkFNRV9MQVNUX1RFWFQsIHRoaXMubGFzdFRleHQsIHRoaXMubGFzdENsYXNzLCBudW1iZXJPZlBhZ2VzLCAncGFnaW5hdGlvbi1nb3RvLWxhc3QnKTsKICAgIH0KCiAgICAkYnV0dG9ucy5wdXNoKCRsYXN0UGFnZUJ0bik7IC8vIEFzc2VtYmxlIHRoZSBwYWdpbmF0aW9uIGJ1dHRvbnMKCiAgICB2YXIgJHBhZ2luYXRpb24gPSBoKCd1bCcsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdwYWdpbmF0aW9uJywKICAgICAgImNsYXNzIjogWydiLXBhZ2luYXRpb24nLCB0aGlzLmJ0blNpemUsIHRoaXMuYWxpZ25tZW50LCB0aGlzLnN0eWxlQ2xhc3NdLAogICAgICBhdHRyczogewogICAgICAgIHJvbGU6IGlzTmF2ID8gbnVsbCA6ICdtZW51YmFyJywKICAgICAgICAnYXJpYS1kaXNhYmxlZCc6IGRpc2FibGVkID8gJ3RydWUnIDogJ2ZhbHNlJywKICAgICAgICAnYXJpYS1sYWJlbCc6IGlzTmF2ID8gbnVsbCA6IGFyaWFMYWJlbCB8fCBudWxsCiAgICAgIH0sCiAgICAgIC8vIFdlIGRpc2FibGUga2V5Ym9hcmQgbGVmdC9yaWdodCBuYXYgd2hlbiBgPGItcGFnaW5hdGlvbi1uYXY+YAogICAgICBvbjogaXNOYXYgPyB7fSA6IHsKICAgICAgICBrZXlkb3duOiB0aGlzLmhhbmRsZUtleU5hdgogICAgICB9LAogICAgICByZWY6ICd1bCcKICAgIH0sICRidXR0b25zKTsgLy8gSWYgd2UgYXJlIGA8Yi1wYWdpbmF0aW9uLW5hdj5gLCB3cmFwIGluIGA8bmF2PmAgd3JhcHBlcgoKICAgIGlmIChpc05hdikgewogICAgICByZXR1cm4gaCgnbmF2JywgewogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAnYXJpYS1kaXNhYmxlZCc6IGRpc2FibGVkID8gJ3RydWUnIDogbnVsbCwKICAgICAgICAgICdhcmlhLWhpZGRlbic6IGRpc2FibGVkID8gJ3RydWUnIDogJ2ZhbHNlJywKICAgICAgICAgICdhcmlhLWxhYmVsJzogaXNOYXYgPyBhcmlhTGFiZWwgfHwgbnVsbCA6IG51bGwKICAgICAgICB9CiAgICAgIH0sIFskcGFnaW5hdGlvbl0pOwogICAgfQoKICAgIHJldHVybiAkcGFnaW5hdGlvbjsKICB9Cn0pOw=="},null]}