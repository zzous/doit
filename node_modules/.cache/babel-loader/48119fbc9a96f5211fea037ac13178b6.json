{"remainingRequest":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js!/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js!/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/time/time.js","dependencies":[{"path":"/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/time/time.js","mtime":1610263603568},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/cache-loader/dist/cjs.js","mtime":1582363961748},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js","mtime":1582363962038},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js","mtime":1585275399303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pcy1hcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydGllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKCnZhciBfd2F0Y2g7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmZ1bmN0aW9uIF9zbGljZWRUb0FycmF5KGFyciwgaSkgewogIHJldHVybiBfYXJyYXlXaXRoSG9sZXMoYXJyKSB8fCBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyLCBpKSB8fCBfbm9uSXRlcmFibGVSZXN0KCk7Cn0KCmZ1bmN0aW9uIF9ub25JdGVyYWJsZVJlc3QoKSB7CiAgdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsKfQoKZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgewogIGlmICghbykgcmV0dXJuOwogIGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOwogIHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsKICBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsKICBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOwogIGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7Cn0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7CiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7CgogIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgewogICAgYXJyMltpXSA9IGFycltpXTsKICB9CgogIHJldHVybiBhcnIyOwp9CgpmdW5jdGlvbiBfaXRlcmFibGVUb0FycmF5TGltaXQoYXJyLCBpKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgPT09ICJ1bmRlZmluZWQiIHx8ICEoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChhcnIpKSkgcmV0dXJuOwogIHZhciBfYXJyID0gW107CiAgdmFyIF9uID0gdHJ1ZTsKICB2YXIgX2QgPSBmYWxzZTsKICB2YXIgX2UgPSB1bmRlZmluZWQ7CgogIHRyeSB7CiAgICBmb3IgKHZhciBfaSA9IGFycltTeW1ib2wuaXRlcmF0b3JdKCksIF9zOyAhKF9uID0gKF9zID0gX2kubmV4dCgpKS5kb25lKTsgX24gPSB0cnVlKSB7CiAgICAgIF9hcnIucHVzaChfcy52YWx1ZSk7CgogICAgICBpZiAoaSAmJiBfYXJyLmxlbmd0aCA9PT0gaSkgYnJlYWs7CiAgICB9CiAgfSBjYXRjaCAoZXJyKSB7CiAgICBfZCA9IHRydWU7CiAgICBfZSA9IGVycjsKICB9IGZpbmFsbHkgewogICAgdHJ5IHsKICAgICAgaWYgKCFfbiAmJiBfaVsicmV0dXJuIl0gIT0gbnVsbCkgX2lbInJldHVybiJdKCk7CiAgICB9IGZpbmFsbHkgewogICAgICBpZiAoX2QpIHRocm93IF9lOwogICAgfQogIH0KCiAgcmV0dXJuIF9hcnI7Cn0KCmZ1bmN0aW9uIF9hcnJheVdpdGhIb2xlcyhhcnIpIHsKICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSByZXR1cm4gYXJyOwp9IC8vIEJUaW1lIGNvbnRyb2wgKG5vdCBmb3JtIGlucHV0IGNvbnRyb2wpCgoKaW1wb3J0IHsgVnVlIH0gZnJvbSAnLi4vLi4vdnVlJzsKaW1wb3J0IHsgTkFNRV9USU1FIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2NvbXBvbmVudHMnOwppbXBvcnQgeyBFVkVOVF9OQU1FX0NPTlRFWFQgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvZXZlbnRzJzsKaW1wb3J0IHsgQ09ERV9MRUZULCBDT0RFX1JJR0hUIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2tleS1jb2Rlcyc7CmltcG9ydCB7IFBST1BfVFlQRV9BUlJBWV9TVFJJTkcsIFBST1BfVFlQRV9CT09MRUFOLCBQUk9QX1RZUEVfTlVNQkVSX1NUUklORywgUFJPUF9UWVBFX1NUUklORyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9wcm9wcyc7CmltcG9ydCB7IFJYX1RJTUUgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvcmVnZXgnOwppbXBvcnQgeyBjb25jYXQgfSBmcm9tICcuLi8uLi91dGlscy9hcnJheSc7CmltcG9ydCB7IGNyZWF0ZURhdGUsIGNyZWF0ZURhdGVGb3JtYXR0ZXIgfSBmcm9tICcuLi8uLi91dGlscy9kYXRlJzsKaW1wb3J0IHsgYXR0ZW1wdEJsdXIsIGF0dGVtcHRGb2N1cywgY29udGFpbnMsIGdldEFjdGl2ZUVsZW1lbnQsIHJlcXVlc3RBRiB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbSc7CmltcG9ydCB7IHN0b3BFdmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50cyc7CmltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi4vLi4vdXRpbHMvaWRlbnRpdHknOwppbXBvcnQgeyBpc051bGwsIGlzVW5kZWZpbmVkT3JOdWxsIH0gZnJvbSAnLi4vLi4vdXRpbHMvaW5zcGVjdCc7CmltcG9ydCB7IGxvb3NlRXF1YWwgfSBmcm9tICcuLi8uLi91dGlscy9sb29zZS1lcXVhbCc7CmltcG9ydCB7IGlzTG9jYWxlUlRMIH0gZnJvbSAnLi4vLi4vdXRpbHMvbG9jYWxlJzsKaW1wb3J0IHsgbWFrZU1vZGVsTWl4aW4gfSBmcm9tICcuLi8uLi91dGlscy9tb2RlbCc7CmltcG9ydCB7IHRvSW50ZWdlciB9IGZyb20gJy4uLy4uL3V0aWxzL251bWJlcic7CmltcG9ydCB7IHBpY2ssIHNvcnRLZXlzIH0gZnJvbSAnLi4vLi4vdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgbWFrZVByb3AsIG1ha2VQcm9wc0NvbmZpZ3VyYWJsZSB9IGZyb20gJy4uLy4uL3V0aWxzL3Byb3BzJzsKaW1wb3J0IHsgdG9TdHJpbmcgfSBmcm9tICcuLi8uLi91dGlscy9zdHJpbmcnOwppbXBvcnQgeyBpZE1peGluLCBwcm9wcyBhcyBpZFByb3BzIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2lkJzsKaW1wb3J0IHsgbm9ybWFsaXplU2xvdE1peGluIH0gZnJvbSAnLi4vLi4vbWl4aW5zL25vcm1hbGl6ZS1zbG90JzsKaW1wb3J0IHsgQkZvcm1TcGluYnV0dG9uLCBwcm9wcyBhcyBCRm9ybVNwaW5idXR0b25Qcm9wcyB9IGZyb20gJy4uL2Zvcm0tc3BpbmJ1dHRvbi9mb3JtLXNwaW5idXR0b24nOwppbXBvcnQgeyBCSWNvbkNpcmNsZUZpbGwsIEJJY29uQ2hldnJvblVwIH0gZnJvbSAnLi4vLi4vaWNvbnMvaWNvbnMnOyAvLyAtLS0gQ29uc3RhbnRzIC0tLQoKdmFyIF9tYWtlTW9kZWxNaXhpbiA9IG1ha2VNb2RlbE1peGluKCd2YWx1ZScsIHsKICB0eXBlOiBQUk9QX1RZUEVfU1RSSU5HLAogIGRlZmF1bHRWYWx1ZTogJycKfSksCiAgICBtb2RlbE1peGluID0gX21ha2VNb2RlbE1peGluLm1peGluLAogICAgbW9kZWxQcm9wcyA9IF9tYWtlTW9kZWxNaXhpbi5wcm9wcywKICAgIE1PREVMX1BST1BfTkFNRSA9IF9tYWtlTW9kZWxNaXhpbi5wcm9wLAogICAgTU9ERUxfRVZFTlRfTkFNRSA9IF9tYWtlTW9kZWxNaXhpbi5ldmVudDsKCnZhciBOVU1FUklDID0gJ251bWVyaWMnOyAvLyAtLS0gSGVscGVyIG1ldGhvZHMgLS0tCgp2YXIgcGFkTGVmdFplcm9zID0gZnVuY3Rpb24gcGFkTGVmdFplcm9zKHZhbHVlKSB7CiAgcmV0dXJuICIwMCIuY29uY2F0KHZhbHVlIHx8ICcnKS5zbGljZSgtMik7Cn07Cgp2YXIgcGFyc2VITVMgPSBmdW5jdGlvbiBwYXJzZUhNUyh2YWx1ZSkgewogIHZhbHVlID0gdG9TdHJpbmcodmFsdWUpOwogIHZhciBoaCA9IG51bGwsCiAgICAgIG1tID0gbnVsbCwKICAgICAgc3MgPSBudWxsOwoKICBpZiAoUlhfVElNRS50ZXN0KHZhbHVlKSkgewogICAgOwoKICAgIHZhciBfdmFsdWUkc3BsaXQkbWFwID0gdmFsdWUuc3BsaXQoJzonKS5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgcmV0dXJuIHRvSW50ZWdlcih2LCBudWxsKTsKICAgIH0pOwoKICAgIHZhciBfdmFsdWUkc3BsaXQkbWFwMiA9IF9zbGljZWRUb0FycmF5KF92YWx1ZSRzcGxpdCRtYXAsIDMpOwoKICAgIGhoID0gX3ZhbHVlJHNwbGl0JG1hcDJbMF07CiAgICBtbSA9IF92YWx1ZSRzcGxpdCRtYXAyWzFdOwogICAgc3MgPSBfdmFsdWUkc3BsaXQkbWFwMlsyXTsKICB9CgogIHJldHVybiB7CiAgICBob3VyczogaXNVbmRlZmluZWRPck51bGwoaGgpID8gbnVsbCA6IGhoLAogICAgbWludXRlczogaXNVbmRlZmluZWRPck51bGwobW0pID8gbnVsbCA6IG1tLAogICAgc2Vjb25kczogaXNVbmRlZmluZWRPck51bGwoc3MpID8gbnVsbCA6IHNzLAogICAgYW1wbTogaXNVbmRlZmluZWRPck51bGwoaGgpIHx8IGhoIDwgMTIgPyAwIDogMQogIH07Cn07Cgp2YXIgZm9ybWF0SE1TID0gZnVuY3Rpb24gZm9ybWF0SE1TKF9yZWYpIHsKICB2YXIgaG91cnMgPSBfcmVmLmhvdXJzLAogICAgICBtaW51dGVzID0gX3JlZi5taW51dGVzLAogICAgICBzZWNvbmRzID0gX3JlZi5zZWNvbmRzOwogIHZhciByZXF1aXJlU2Vjb25kcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CgogIGlmIChpc051bGwoaG91cnMpIHx8IGlzTnVsbChtaW51dGVzKSB8fCByZXF1aXJlU2Vjb25kcyAmJiBpc051bGwoc2Vjb25kcykpIHsKICAgIHJldHVybiAnJzsKICB9CgogIHZhciBobXMgPSBbaG91cnMsIG1pbnV0ZXMsIHJlcXVpcmVTZWNvbmRzID8gc2Vjb25kcyA6IDBdOwogIHJldHVybiBobXMubWFwKHBhZExlZnRaZXJvcykuam9pbignOicpOwp9OyAvLyAtLS0gUHJvcHMgLS0tCgoKZXhwb3J0IHZhciBwcm9wcyA9IG1ha2VQcm9wc0NvbmZpZ3VyYWJsZShzb3J0S2V5cyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpZFByb3BzKSwgbW9kZWxQcm9wcyksIHBpY2soQkZvcm1TcGluYnV0dG9uUHJvcHMsIFsnbGFiZWxJbmNyZW1lbnQnLCAnbGFiZWxEZWNyZW1lbnQnXSkpLCB7fSwgewogIC8vIElEIG9mIGxhYmVsIGVsZW1lbnQKICBhcmlhTGFiZWxsZWRieTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORyksCiAgZGlzYWJsZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgaGlkZGVuOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIGhpZGVIZWFkZXI6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gRXhwbGljaXRseSBmb3JjZSAxMiBvciAyNCBob3VyIHRpbWUKICAvLyBEZWZhdWx0IGlzIHRvIHVzZSByZXNvbHZlZCBsb2NhbGUgZm9yIDEyLzI0IGhvdXIgZGlzcGxheQogIC8vIFRyaS1zdGF0ZTogYHRydWVgID0gMTIsIGBmYWxzZWAgPSAyNCwgYG51bGxgID0gYXV0bwogIGhvdXIxMjogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIG51bGwpLAogIGxhYmVsQW06IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdBTScpLAogIGxhYmVsQW1wbTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0FNL1BNJyksCiAgbGFiZWxIb3VyczogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0hvdXJzJyksCiAgbGFiZWxNaW51dGVzOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnTWludXRlcycpLAogIGxhYmVsTm9UaW1lU2VsZWN0ZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdObyB0aW1lIHNlbGVjdGVkJyksCiAgbGFiZWxQbTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ1BNJyksCiAgbGFiZWxTZWNvbmRzOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnU2Vjb25kcycpLAogIGxhYmVsU2VsZWN0ZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdTZWxlY3RlZCB0aW1lJyksCiAgbG9jYWxlOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfU1RSSU5HKSwKICBtaW51dGVzU3RlcDogbWFrZVByb3AoUFJPUF9UWVBFX05VTUJFUl9TVFJJTkcsIDEpLAogIHJlYWRvbmx5OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHNlY29uZHNTdGVwOiBtYWtlUHJvcChQUk9QX1RZUEVfTlVNQkVSX1NUUklORywgMSksCiAgLy8gSWYgYHRydWVgLCBzaG93IHRoZSBzZWNvbmQgc3BpbmJ1dHRvbgogIHNob3dTZWNvbmRzOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpCn0pKSwgTkFNRV9USU1FKTsgLy8gLS0tIE1haW4gY29tcG9uZW50IC0tLQovLyBAdnVlL2NvbXBvbmVudAoKZXhwb3J0IHZhciBCVGltZSA9IC8qI19fUFVSRV9fKi9WdWUuZXh0ZW5kKHsKICBuYW1lOiBOQU1FX1RJTUUsCiAgbWl4aW5zOiBbaWRNaXhpbiwgbW9kZWxNaXhpbiwgbm9ybWFsaXplU2xvdE1peGluXSwKICBwcm9wczogcHJvcHMsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBwYXJzZWQgPSBwYXJzZUhNUyh0aGlzW01PREVMX1BST1BfTkFNRV0gfHwgJycpOwogICAgcmV0dXJuIHsKICAgICAgLy8gU3BpbiBidXR0b24gbW9kZWxzCiAgICAgIG1vZGVsSG91cnM6IHBhcnNlZC5ob3VycywKICAgICAgbW9kZWxNaW51dGVzOiBwYXJzZWQubWludXRlcywKICAgICAgbW9kZWxTZWNvbmRzOiBwYXJzZWQuc2Vjb25kcywKICAgICAgbW9kZWxBbXBtOiBwYXJzZWQuYW1wbSwKICAgICAgLy8gSW50ZXJuYWwgZmxhZyB0byBlbmFibGUgYXJpYS1saXZlIHJlZ2lvbnMKICAgICAgaXNMaXZlOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb21wdXRlZEhNUzogZnVuY3Rpb24gY29tcHV0ZWRITVMoKSB7CiAgICAgIHZhciBob3VycyA9IHRoaXMubW9kZWxIb3VyczsKICAgICAgdmFyIG1pbnV0ZXMgPSB0aGlzLm1vZGVsTWludXRlczsKICAgICAgdmFyIHNlY29uZHMgPSB0aGlzLm1vZGVsU2Vjb25kczsKICAgICAgcmV0dXJuIGZvcm1hdEhNUyh7CiAgICAgICAgaG91cnM6IGhvdXJzLAogICAgICAgIG1pbnV0ZXM6IG1pbnV0ZXMsCiAgICAgICAgc2Vjb25kczogc2Vjb25kcwogICAgICB9LCB0aGlzLnNob3dTZWNvbmRzKTsKICAgIH0sCiAgICByZXNvbHZlZE9wdGlvbnM6IGZ1bmN0aW9uIHJlc29sdmVkT3B0aW9ucygpIHsKICAgICAgLy8gUmVzb2x2ZWQgbG9jYWxlIG9wdGlvbnMKICAgICAgdmFyIGxvY2FsZSA9IGNvbmNhdCh0aGlzLmxvY2FsZSkuZmlsdGVyKGlkZW50aXR5KTsKICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgaG91cjogTlVNRVJJQywKICAgICAgICBtaW51dGU6IE5VTUVSSUMsCiAgICAgICAgc2Vjb25kOiBOVU1FUklDCiAgICAgIH07CgogICAgICBpZiAoIWlzVW5kZWZpbmVkT3JOdWxsKHRoaXMuaG91cjEyKSkgewogICAgICAgIC8vIEZvcmNlIDEyIG9yIDI0IGhvdXIgY2xvY2sKICAgICAgICBvcHRpb25zLmhvdXIxMiA9ICEhdGhpcy5ob3VyMTI7CiAgICAgIH0KCiAgICAgIHZhciBkdGYgPSBuZXcgSW50bC5EYXRlVGltZUZvcm1hdChsb2NhbGUsIG9wdGlvbnMpOwogICAgICB2YXIgcmVzb2x2ZWQgPSBkdGYucmVzb2x2ZWRPcHRpb25zKCk7CiAgICAgIHZhciBob3VyMTIgPSByZXNvbHZlZC5ob3VyMTIgfHwgZmFsc2U7IC8vIElFIDExIGRvZXNuJ3QgcmVzb2x2ZSB0aGUgaG91ckN5Y2xlLCBzbyB3ZSBtYWtlCiAgICAgIC8vIGFuIGFzc3VtcHRpb24gYW5kIGZhbGwgYmFjayB0byBjb21tb24gdmFsdWVzCgogICAgICB2YXIgaG91ckN5Y2xlID0gcmVzb2x2ZWQuaG91ckN5Y2xlIHx8IChob3VyMTIgPyAnaDEyJyA6ICdoMjMnKTsKICAgICAgcmV0dXJuIHsKICAgICAgICBsb2NhbGU6IHJlc29sdmVkLmxvY2FsZSwKICAgICAgICBob3VyMTI6IGhvdXIxMiwKICAgICAgICBob3VyQ3ljbGU6IGhvdXJDeWNsZQogICAgICB9OwogICAgfSwKICAgIGNvbXB1dGVkTG9jYWxlOiBmdW5jdGlvbiBjb21wdXRlZExvY2FsZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZWRPcHRpb25zLmxvY2FsZTsKICAgIH0sCiAgICBjb21wdXRlZExhbmc6IGZ1bmN0aW9uIGNvbXB1dGVkTGFuZygpIHsKICAgICAgcmV0dXJuICh0aGlzLmNvbXB1dGVkTG9jYWxlIHx8ICcnKS5yZXBsYWNlKC8tdS0uKiQvLCAnJyk7CiAgICB9LAogICAgY29tcHV0ZWRSVEw6IGZ1bmN0aW9uIGNvbXB1dGVkUlRMKCkgewogICAgICByZXR1cm4gaXNMb2NhbGVSVEwodGhpcy5jb21wdXRlZExhbmcpOwogICAgfSwKICAgIGNvbXB1dGVkSG91ckN5Y2xlOiBmdW5jdGlvbiBjb21wdXRlZEhvdXJDeWNsZSgpIHsKICAgICAgLy8gaDExLCBoMTIsIGgyMywgb3IgaDI0CiAgICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0xvY2FsZS9ob3VyQ3ljbGUKICAgICAgLy8gaDEyIC0gSG91ciBzeXN0ZW0gdXNpbmcgMeKAkzEyLiBDb3JyZXNwb25kcyB0byAnaCcgaW4gcGF0dGVybnMuIFRoZSAxMiBob3VyIGNsb2NrLCB3aXRoIG1pZG5pZ2h0IHN0YXJ0aW5nIGF0IDEyOjAwIGFtCiAgICAgIC8vIGgyMyAtIEhvdXIgc3lzdGVtIHVzaW5nIDDigJMyMy4gQ29ycmVzcG9uZHMgdG8gJ0gnIGluIHBhdHRlcm5zLiBUaGUgMjQgaG91ciBjbG9jaywgd2l0aCBtaWRuaWdodCBzdGFydGluZyBhdCAwOjAwCiAgICAgIC8vIGgxMSAtIEhvdXIgc3lzdGVtIHVzaW5nIDDigJMxMS4gQ29ycmVzcG9uZHMgdG8gJ0snIGluIHBhdHRlcm5zLiBUaGUgMTIgaG91ciBjbG9jaywgd2l0aCBtaWRuaWdodCBzdGFydGluZyBhdCAwOjAwIGFtCiAgICAgIC8vIGgyNCAtIEhvdXIgc3lzdGVtIHVzaW5nIDHigJMyNC4gQ29ycmVzcG9uZHMgdG8gJ2snIGluIHBhdHRlcm4uIFRoZSAyNCBob3VyIGNsb2NrLCB3aXRoIG1pZG5pZ2h0IHN0YXJ0aW5nIGF0IDI0OjAwCiAgICAgIC8vIEZvciBoMTIgb3IgaDI0LCB3ZSB2aXN1YWxseSBmb3JtYXQgMDAgaG91cnMgYXMgMTIKICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZWRPcHRpb25zLmhvdXJDeWNsZTsKICAgIH0sCiAgICBpczEySG91cjogZnVuY3Rpb24gaXMxMkhvdXIoKSB7CiAgICAgIHJldHVybiAhIXRoaXMucmVzb2x2ZWRPcHRpb25zLmhvdXIxMjsKICAgIH0sCiAgICBjb250ZXh0OiBmdW5jdGlvbiBjb250ZXh0KCkgewogICAgICByZXR1cm4gewogICAgICAgIGxvY2FsZTogdGhpcy5jb21wdXRlZExvY2FsZSwKICAgICAgICBpc1JUTDogdGhpcy5jb21wdXRlZFJUTCwKICAgICAgICBob3VyQ3ljbGU6IHRoaXMuY29tcHV0ZWRIb3VyQ3ljbGUsCiAgICAgICAgaG91cjEyOiB0aGlzLmlzMTJIb3VyLAogICAgICAgIGhvdXJzOiB0aGlzLm1vZGVsSG91cnMsCiAgICAgICAgbWludXRlczogdGhpcy5tb2RlbE1pbnV0ZXMsCiAgICAgICAgc2Vjb25kczogdGhpcy5zaG93U2Vjb25kcyA/IHRoaXMubW9kZWxTZWNvbmRzIDogMCwKICAgICAgICB2YWx1ZTogdGhpcy5jb21wdXRlZEhNUywKICAgICAgICBmb3JtYXR0ZWQ6IHRoaXMuZm9ybWF0dGVkVGltZVN0cmluZwogICAgICB9OwogICAgfSwKICAgIHZhbHVlSWQ6IGZ1bmN0aW9uIHZhbHVlSWQoKSB7CiAgICAgIHJldHVybiB0aGlzLnNhZmVJZCgpIHx8IG51bGw7CiAgICB9LAogICAgY29tcHV0ZWRBcmlhTGFiZWxsZWRieTogZnVuY3Rpb24gY29tcHV0ZWRBcmlhTGFiZWxsZWRieSgpIHsKICAgICAgcmV0dXJuIFt0aGlzLmFyaWFMYWJlbGxlZGJ5LCB0aGlzLnZhbHVlSWRdLmZpbHRlcihpZGVudGl0eSkuam9pbignICcpIHx8IG51bGw7CiAgICB9LAogICAgdGltZUZvcm1hdHRlcjogZnVuY3Rpb24gdGltZUZvcm1hdHRlcigpIHsKICAgICAgLy8gUmV0dXJucyBhIGZvcm1hdHRlciBmdW5jdGlvbiByZWZlcmVuY2UKICAgICAgLy8gVGhlIGZvcm1hdHRlciBjb252ZXJ0cyB0aGUgdGltZSB0byBhIGxvY2FsaXplZCBzdHJpbmcKICAgICAgdmFyIG9wdGlvbnMgPSB7CiAgICAgICAgaG91cjEyOiB0aGlzLmlzMTJIb3VyLAogICAgICAgIGhvdXJDeWNsZTogdGhpcy5jb21wdXRlZEhvdXJDeWNsZSwKICAgICAgICBob3VyOiBOVU1FUklDLAogICAgICAgIG1pbnV0ZTogTlVNRVJJQywKICAgICAgICB0aW1lWm9uZTogJ1VUQycKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLnNob3dTZWNvbmRzKSB7CiAgICAgICAgb3B0aW9ucy5zZWNvbmQgPSBOVU1FUklDOwogICAgICB9IC8vIEZvcm1hdHMgdGhlIHRpbWUgYXMgYSBsb2NhbGl6ZWQgc3RyaW5nCgoKICAgICAgcmV0dXJuIGNyZWF0ZURhdGVGb3JtYXR0ZXIodGhpcy5jb21wdXRlZExvY2FsZSwgb3B0aW9ucyk7CiAgICB9LAogICAgbnVtYmVyRm9ybWF0dGVyOiBmdW5jdGlvbiBudW1iZXJGb3JtYXR0ZXIoKSB7CiAgICAgIC8vIFJldHVybnMgYSBmb3JtYXR0ZXIgZnVuY3Rpb24gcmVmZXJlbmNlCiAgICAgIC8vIFRoZSBmb3JtYXR0ZXIgYWx3YXlzIGZvcm1hdHMgYXMgMiBkaWdpdHMgYW5kIGlzIGxvY2FsaXplZAogICAgICB2YXIgbmYgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQodGhpcy5jb21wdXRlZExvY2FsZSwgewogICAgICAgIHN0eWxlOiAnZGVjaW1hbCcsCiAgICAgICAgbWluaW11bUludGVnZXJEaWdpdHM6IDIsCiAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAwLAogICAgICAgIG1heGltdW1GcmFjdGlvbkRpZ2l0czogMCwKICAgICAgICBub3RhdGlvbjogJ3N0YW5kYXJkJwogICAgICB9KTsKICAgICAgcmV0dXJuIG5mLmZvcm1hdDsKICAgIH0sCiAgICBmb3JtYXR0ZWRUaW1lU3RyaW5nOiBmdW5jdGlvbiBmb3JtYXR0ZWRUaW1lU3RyaW5nKCkgewogICAgICB2YXIgaG91cnMgPSB0aGlzLm1vZGVsSG91cnM7CiAgICAgIHZhciBtaW51dGVzID0gdGhpcy5tb2RlbE1pbnV0ZXM7CiAgICAgIHZhciBzZWNvbmRzID0gdGhpcy5zaG93U2Vjb25kcyA/IHRoaXMubW9kZWxTZWNvbmRzIHx8IDAgOiAwOwoKICAgICAgaWYgKHRoaXMuY29tcHV0ZWRITVMpIHsKICAgICAgICByZXR1cm4gdGhpcy50aW1lRm9ybWF0dGVyKGNyZWF0ZURhdGUoRGF0ZS5VVEMoMCwgMCwgMSwgaG91cnMsIG1pbnV0ZXMsIHNlY29uZHMpKSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmxhYmVsTm9UaW1lU2VsZWN0ZWQgfHwgJyAnOwogICAgfSwKICAgIHNwaW5TY29wZWRTbG90czogZnVuY3Rpb24gc3BpblNjb3BlZFNsb3RzKCkgewogICAgICB2YXIgaCA9IHRoaXMuJGNyZWF0ZUVsZW1lbnQ7CiAgICAgIHJldHVybiB7CiAgICAgICAgaW5jcmVtZW50OiBmdW5jdGlvbiBpbmNyZW1lbnQoX3JlZjIpIHsKICAgICAgICAgIHZhciBoYXNGb2N1cyA9IF9yZWYyLmhhc0ZvY3VzOwogICAgICAgICAgcmV0dXJuIGgoQkljb25DaGV2cm9uVXAsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBzY2FsZTogaGFzRm9jdXMgPyAxLjUgOiAxLjI1CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgZGVjcmVtZW50OiBmdW5jdGlvbiBkZWNyZW1lbnQoX3JlZjMpIHsKICAgICAgICAgIHZhciBoYXNGb2N1cyA9IF9yZWYzLmhhc0ZvY3VzOwogICAgICAgICAgcmV0dXJuIGgoQkljb25DaGV2cm9uVXAsIHsKICAgICAgICAgICAgcHJvcHM6IHsKICAgICAgICAgICAgICBmbGlwVjogdHJ1ZSwKICAgICAgICAgICAgICBzY2FsZTogaGFzRm9jdXMgPyAxLjUgOiAxLjI1CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICAgJ2FyaWEtaGlkZGVuJzogJ3RydWUnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfTsKICAgIH0KICB9LAogIHdhdGNoOiAoX3dhdGNoID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsIE1PREVMX1BST1BfTkFNRSwgZnVuY3Rpb24gKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSAmJiAhbG9vc2VFcXVhbChwYXJzZUhNUyhuZXdWYWx1ZSksIHBhcnNlSE1TKHRoaXMuY29tcHV0ZWRITVMpKSkgewogICAgICB2YXIgX3BhcnNlSE1TID0gcGFyc2VITVMobmV3VmFsdWUpLAogICAgICAgICAgaG91cnMgPSBfcGFyc2VITVMuaG91cnMsCiAgICAgICAgICBtaW51dGVzID0gX3BhcnNlSE1TLm1pbnV0ZXMsCiAgICAgICAgICBzZWNvbmRzID0gX3BhcnNlSE1TLnNlY29uZHMsCiAgICAgICAgICBhbXBtID0gX3BhcnNlSE1TLmFtcG07CgogICAgICB0aGlzLm1vZGVsSG91cnMgPSBob3VyczsKICAgICAgdGhpcy5tb2RlbE1pbnV0ZXMgPSBtaW51dGVzOwogICAgICB0aGlzLm1vZGVsU2Vjb25kcyA9IHNlY29uZHM7CiAgICAgIHRoaXMubW9kZWxBbXBtID0gYW1wbTsKICAgIH0KICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgImNvbXB1dGVkSE1TIiwgZnVuY3Rpb24gY29tcHV0ZWRITVMobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7CiAgICAgIHRoaXMuJGVtaXQoTU9ERUxfRVZFTlRfTkFNRSwgbmV3VmFsdWUpOwogICAgfQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAiY29udGV4dCIsIGZ1bmN0aW9uIGNvbnRleHQobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICBpZiAoIWxvb3NlRXF1YWwobmV3VmFsdWUsIG9sZFZhbHVlKSkgewogICAgICB0aGlzLiRlbWl0KEVWRU5UX05BTUVfQ09OVEVYVCwgbmV3VmFsdWUpOwogICAgfQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAibW9kZWxBbXBtIiwgZnVuY3Rpb24gbW9kZWxBbXBtKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBpZiAobmV3VmFsdWUgIT09IG9sZFZhbHVlKSB7CiAgICAgIHZhciBob3VycyA9IGlzTnVsbCh0aGlzLm1vZGVsSG91cnMpID8gMCA6IHRoaXMubW9kZWxIb3VyczsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChuZXdWYWx1ZSA9PT0gMCAmJiBob3VycyA+IDExKSB7CiAgICAgICAgICAvLyBTd2l0Y2hlZCB0byBBTQogICAgICAgICAgX3RoaXMubW9kZWxIb3VycyA9IGhvdXJzIC0gMTI7CiAgICAgICAgfSBlbHNlIGlmIChuZXdWYWx1ZSA9PT0gMSAmJiBob3VycyA8IDEyKSB7CiAgICAgICAgICAvLyBTd2l0Y2hlZCB0byBQTQogICAgICAgICAgX3RoaXMubW9kZWxIb3VycyA9IGhvdXJzICsgMTI7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgIm1vZGVsSG91cnMiLCBmdW5jdGlvbiBtb2RlbEhvdXJzKG5ld0hvdXJzLCBvbGRIb3VycykgewogICAgaWYgKG5ld0hvdXJzICE9PSBvbGRIb3VycykgewogICAgICB0aGlzLm1vZGVsQW1wbSA9IG5ld0hvdXJzID4gMTEgPyAxIDogMDsKICAgIH0KICB9KSwgX3dhdGNoKSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICBfdGhpczIuJGVtaXQoRVZFTlRfTkFNRV9DT05URVhULCBfdGhpczIuY29udGV4dCk7CiAgICB9KTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNldExpdmUodHJ1ZSk7CiAgfSwKCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBhY3RpdmF0ZWQ6IGZ1bmN0aW9uIGFjdGl2YXRlZCgpIHsKICAgIHRoaXMuc2V0TGl2ZSh0cnVlKTsKICB9LAoKICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogIGRlYWN0aXZhdGVkOiBmdW5jdGlvbiBkZWFjdGl2YXRlZCgpIHsKICAgIHRoaXMuc2V0TGl2ZShmYWxzZSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5zZXRMaXZlKGZhbHNlKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIFB1YmxpYyBtZXRob2RzCiAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7CiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkgewogICAgICAgIC8vIFdlIGZvY3VzIHRoZSBmaXJzdCBzcGluIGJ1dHRvbgogICAgICAgIGF0dGVtcHRGb2N1cyh0aGlzLiRyZWZzLnNwaW5uZXJzWzBdKTsKICAgICAgfQogICAgfSwKICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7CiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkgewogICAgICAgIHZhciBhY3RpdmVFbGVtZW50ID0gZ2V0QWN0aXZlRWxlbWVudCgpOwoKICAgICAgICBpZiAoY29udGFpbnModGhpcy4kZWwsIGFjdGl2ZUVsZW1lbnQpKSB7CiAgICAgICAgICBhdHRlbXB0Qmx1cihhY3RpdmVFbGVtZW50KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAvLyBGb3JtYXR0ZXJzIGZvciB0aGUgc3BpbiBidXR0b25zCiAgICBmb3JtYXRIb3VyczogZnVuY3Rpb24gZm9ybWF0SG91cnMoaGgpIHsKICAgICAgdmFyIGhvdXJDeWNsZSA9IHRoaXMuY29tcHV0ZWRIb3VyQ3ljbGU7IC8vIFdlIGFsd2F5cyBzdG9yZSAwLTIzLCBidXQgZm9ybWF0IGJhc2VkIG9uIGgxMS9oMTIvaDIzL2gyNCBmb3JtYXRzCgogICAgICBoaCA9IHRoaXMuaXMxMkhvdXIgJiYgaGggPiAxMiA/IGhoIC0gMTIgOiBoaDsgLy8gRGV0ZXJtaW5lIGhvdyAwMDowMCBhbmQgMTI6MDAgYXJlIHNob3duCgogICAgICBoaCA9IGhoID09PSAwICYmIGhvdXJDeWNsZSA9PT0gJ2gxMicgPyAxMiA6IGhoID09PSAwICYmIGhvdXJDeWNsZSA9PT0gJ2gyNCcgPwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAyNCA6IGhoID09PSAxMiAmJiBob3VyQ3ljbGUgPT09ICdoMTEnID8KICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgMCA6IGhoOwogICAgICByZXR1cm4gdGhpcy5udW1iZXJGb3JtYXR0ZXIoaGgpOwogICAgfSwKICAgIGZvcm1hdE1pbnV0ZXM6IGZ1bmN0aW9uIGZvcm1hdE1pbnV0ZXMobW0pIHsKICAgICAgcmV0dXJuIHRoaXMubnVtYmVyRm9ybWF0dGVyKG1tKTsKICAgIH0sCiAgICBmb3JtYXRTZWNvbmRzOiBmdW5jdGlvbiBmb3JtYXRTZWNvbmRzKHNzKSB7CiAgICAgIHJldHVybiB0aGlzLm51bWJlckZvcm1hdHRlcihzcyk7CiAgICB9LAogICAgZm9ybWF0QW1wbTogZnVuY3Rpb24gZm9ybWF0QW1wbShhbXBtKSB7CiAgICAgIC8vIFRoZXNlIHNob3VsZCBjb21lIGZyb20gbGFiZWwgcHJvcHM/Pz8KICAgICAgLy8gYGFtcG1gIHNob3VsZCBhbHdheXMgYmUgYSB2YWx1ZSBvZiBgMGAgb3IgYDFgCiAgICAgIHJldHVybiBhbXBtID09PSAwID8gdGhpcy5sYWJlbEFtIDogYW1wbSA9PT0gMSA/IHRoaXMubGFiZWxQbSA6ICcnOwogICAgfSwKICAgIC8vIFNwaW5idXR0b24gb24gY2hhbmdlIGhhbmRsZXJzCiAgICBzZXRIb3VyczogZnVuY3Rpb24gc2V0SG91cnModmFsdWUpIHsKICAgICAgdGhpcy5tb2RlbEhvdXJzID0gdmFsdWU7CiAgICB9LAogICAgc2V0TWludXRlczogZnVuY3Rpb24gc2V0TWludXRlcyh2YWx1ZSkgewogICAgICB0aGlzLm1vZGVsTWludXRlcyA9IHZhbHVlOwogICAgfSwKICAgIHNldFNlY29uZHM6IGZ1bmN0aW9uIHNldFNlY29uZHModmFsdWUpIHsKICAgICAgdGhpcy5tb2RlbFNlY29uZHMgPSB2YWx1ZTsKICAgIH0sCiAgICBzZXRBbXBtOiBmdW5jdGlvbiBzZXRBbXBtKHZhbHVlKSB7CiAgICAgIHRoaXMubW9kZWxBbXBtID0gdmFsdWU7CiAgICB9LAogICAgb25TcGluTGVmdFJpZ2h0OiBmdW5jdGlvbiBvblNwaW5MZWZ0UmlnaHQoKSB7CiAgICAgIHZhciBldmVudCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICAgIHZhciB0eXBlID0gZXZlbnQudHlwZSwKICAgICAgICAgIGtleUNvZGUgPSBldmVudC5rZXlDb2RlOwoKICAgICAgaWYgKCF0aGlzLmRpc2FibGVkICYmIHR5cGUgPT09ICdrZXlkb3duJyAmJiAoa2V5Q29kZSA9PT0gQ09ERV9MRUZUIHx8IGtleUNvZGUgPT09IENPREVfUklHSFQpKSB7CiAgICAgICAgc3RvcEV2ZW50KGV2ZW50KTsKICAgICAgICB2YXIgc3Bpbm5lcnMgPSB0aGlzLiRyZWZzLnNwaW5uZXJzIHx8IFtdOwogICAgICAgIHZhciBpbmRleCA9IHNwaW5uZXJzLm1hcChmdW5jdGlvbiAoY21wKSB7CiAgICAgICAgICByZXR1cm4gISFjbXAuaGFzRm9jdXM7CiAgICAgICAgfSkuaW5kZXhPZih0cnVlKTsKICAgICAgICBpbmRleCA9IGluZGV4ICsgKGtleUNvZGUgPT09IENPREVfTEVGVCA/IC0xIDogMSk7CiAgICAgICAgaW5kZXggPSBpbmRleCA+PSBzcGlubmVycy5sZW5ndGggPyAwIDogaW5kZXggPCAwID8gc3Bpbm5lcnMubGVuZ3RoIC0gMSA6IGluZGV4OwogICAgICAgIGF0dGVtcHRGb2N1cyhzcGlubmVyc1tpbmRleF0pOwogICAgICB9CiAgICB9LAogICAgc2V0TGl2ZTogZnVuY3Rpb24gc2V0TGl2ZShvbikgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIGlmIChvbikgewogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIHJlcXVlc3RBRihmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMy5pc0xpdmUgPSB0cnVlOwogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5pc0xpdmUgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KCgogICAgaWYgKHRoaXMuaGlkZGVuKSB7CiAgICAgIC8vIElmIGhpZGRlbiwgd2UganVzdCByZW5kZXIgYSBwbGFjZWhvbGRlciBjb21tZW50CiAgICAgIHJldHVybiBoKCk7CiAgICB9CgogICAgdmFyIHZhbHVlSWQgPSB0aGlzLnZhbHVlSWQ7CiAgICB2YXIgY29tcHV0ZWRBcmlhTGFiZWxsZWRieSA9IHRoaXMuY29tcHV0ZWRBcmlhTGFiZWxsZWRieTsKICAgIHZhciBzcGluSWRzID0gW107IC8vIEhlbHBlciBtZXRob2QgdG8gcmVuZGVyIGEgc3BpbmJ1dHRvbgoKICAgIHZhciBtYWtlU3BpbmJ1dHRvbiA9IGZ1bmN0aW9uIG1ha2VTcGluYnV0dG9uKGhhbmRsZXIsIGtleSwgY2xhc3NlcykgewogICAgICB2YXIgc3BpbmJ1dHRvblByb3BzID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB7fTsKICAgICAgdmFyIGlkID0gX3RoaXM0LnNhZmVJZCgiX3NwaW5idXR0b25fIi5jb25jYXQoa2V5LCAiXyIpKSB8fCBudWxsOwogICAgICBzcGluSWRzLnB1c2goaWQpOwogICAgICByZXR1cm4gaChCRm9ybVNwaW5idXR0b24sIHsKICAgICAgICAiY2xhc3MiOiBjbGFzc2VzLAogICAgICAgIHByb3BzOiBfb2JqZWN0U3ByZWFkKHsKICAgICAgICAgIGlkOiBpZCwKICAgICAgICAgIHBsYWNlaG9sZGVyOiAnLS0nLAogICAgICAgICAgdmVydGljYWw6IHRydWUsCiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIGRpc2FibGVkOiBfdGhpczQuZGlzYWJsZWQsCiAgICAgICAgICByZWFkb25seTogX3RoaXM0LnJlYWRvbmx5LAogICAgICAgICAgbG9jYWxlOiBfdGhpczQuY29tcHV0ZWRMb2NhbGUsCiAgICAgICAgICBsYWJlbEluY3JlbWVudDogX3RoaXM0LmxhYmVsSW5jcmVtZW50LAogICAgICAgICAgbGFiZWxEZWNyZW1lbnQ6IF90aGlzNC5sYWJlbERlY3JlbWVudCwKICAgICAgICAgIHdyYXA6IHRydWUsCiAgICAgICAgICBhcmlhQ29udHJvbHM6IHZhbHVlSWQsCiAgICAgICAgICBtaW46IDAKICAgICAgICB9LCBzcGluYnV0dG9uUHJvcHMpLAogICAgICAgIHNjb3BlZFNsb3RzOiBfdGhpczQuc3BpblNjb3BlZFNsb3RzLAogICAgICAgIG9uOiB7CiAgICAgICAgICAvLyBXZSB1c2UgYGNoYW5nZWAgZXZlbnQgdG8gbWluaW1pemUgU1IgdmVyYm9zaXR5CiAgICAgICAgICAvLyBBcyB0aGUgc3BpbmJ1dHRvbiB3aWxsIGFubm91bmNlIGVhY2ggdmFsdWUgY2hhbmdlCiAgICAgICAgICAvLyBhbmQgd2UgZG9uJ3Qgd2FudCB0aGUgZm9ybWF0dGVkIHRpbWUgdG8gYmUgYW5ub3VuY2VkCiAgICAgICAgICAvLyBvbiBlYWNoIHZhbHVlIGlucHV0IGlmIHJlcGVhdCBpcyBoYXBwZW5pbmcKICAgICAgICAgIGNoYW5nZTogaGFuZGxlcgogICAgICAgIH0sCiAgICAgICAga2V5OiBrZXksCiAgICAgICAgcmVmOiAnc3Bpbm5lcnMnLAogICAgICAgIHJlZkluRm9yOiB0cnVlCiAgICAgIH0pOwogICAgfTsgLy8gSGVscGVyIG1ldGhvZCB0byByZXR1cm4gYSAiY29sb24iIHNlcGFyYXRvcgoKCiAgICB2YXIgbWFrZUNvbG9uID0gZnVuY3Rpb24gbWFrZUNvbG9uKCkgewogICAgICByZXR1cm4gaCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAnZC1mbGV4IGZsZXgtY29sdW1uJywKICAgICAgICAiY2xhc3MiOiB7CiAgICAgICAgICAndGV4dC1tdXRlZCc6IF90aGlzNC5kaXNhYmxlZCB8fCBfdGhpczQucmVhZG9ubHkKICAgICAgICB9LAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAnYXJpYS1oaWRkZW4nOiAndHJ1ZScKICAgICAgICB9CiAgICAgIH0sIFtoKEJJY29uQ2lyY2xlRmlsbCwgewogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBzaGlmdFY6IDQsCiAgICAgICAgICBzY2FsZTogMC41CiAgICAgICAgfQogICAgICB9KSwgaChCSWNvbkNpcmNsZUZpbGwsIHsKICAgICAgICBwcm9wczogewogICAgICAgICAgc2hpZnRWOiAtNCwKICAgICAgICAgIHNjYWxlOiAwLjUKICAgICAgICB9CiAgICAgIH0pXSk7CiAgICB9OwoKICAgIHZhciAkc3Bpbm5lcnMgPSBbXTsgLy8gSG91cnMKCiAgICAkc3Bpbm5lcnMucHVzaChtYWtlU3BpbmJ1dHRvbih0aGlzLnNldEhvdXJzLCAnaG91cnMnLCAnYi10aW1lLWhvdXJzJywgewogICAgICB2YWx1ZTogdGhpcy5tb2RlbEhvdXJzLAogICAgICBtYXg6IDIzLAogICAgICBzdGVwOiAxLAogICAgICBmb3JtYXR0ZXJGbjogdGhpcy5mb3JtYXRIb3VycywKICAgICAgYXJpYUxhYmVsOiB0aGlzLmxhYmVsSG91cnMKICAgIH0pKTsgLy8gU3BhY2VyCgogICAgJHNwaW5uZXJzLnB1c2gobWFrZUNvbG9uKCkpOyAvLyBNaW51dGVzCgogICAgJHNwaW5uZXJzLnB1c2gobWFrZVNwaW5idXR0b24odGhpcy5zZXRNaW51dGVzLCAnbWludXRlcycsICdiLXRpbWUtbWludXRlcycsIHsKICAgICAgdmFsdWU6IHRoaXMubW9kZWxNaW51dGVzLAogICAgICBtYXg6IDU5LAogICAgICBzdGVwOiB0aGlzLm1pbnV0ZXNTdGVwIHx8IDEsCiAgICAgIGZvcm1hdHRlckZuOiB0aGlzLmZvcm1hdE1pbnV0ZXMsCiAgICAgIGFyaWFMYWJlbDogdGhpcy5sYWJlbE1pbnV0ZXMKICAgIH0pKTsKCiAgICBpZiAodGhpcy5zaG93U2Vjb25kcykgewogICAgICAvLyBTcGFjZXIKICAgICAgJHNwaW5uZXJzLnB1c2gobWFrZUNvbG9uKCkpOyAvLyBTZWNvbmRzCgogICAgICAkc3Bpbm5lcnMucHVzaChtYWtlU3BpbmJ1dHRvbih0aGlzLnNldFNlY29uZHMsICdzZWNvbmRzJywgJ2ItdGltZS1zZWNvbmRzJywgewogICAgICAgIHZhbHVlOiB0aGlzLm1vZGVsU2Vjb25kcywKICAgICAgICBtYXg6IDU5LAogICAgICAgIHN0ZXA6IHRoaXMuc2Vjb25kc1N0ZXAgfHwgMSwKICAgICAgICBmb3JtYXR0ZXJGbjogdGhpcy5mb3JtYXRTZWNvbmRzLAogICAgICAgIGFyaWFMYWJlbDogdGhpcy5sYWJlbFNlY29uZHMKICAgICAgfSkpOwogICAgfSAvLyBBTS9QTSA/CgoKICAgIGlmICh0aGlzLmlzMTJIb3VyKSB7CiAgICAgIC8vIFRPRE86CiAgICAgIC8vICAgSWYgbG9jYWxlIGlzIFJUTCwgdW5zaGlmdCB0aGlzIGluc3RlYWQgb2YgcHVzaD8KICAgICAgLy8gICBBbmQgc3dpdGNoIGNsYXNzIGBtbC0yYCB0byBgbXItMmAKICAgICAgLy8gICBOb3RlIHNvbWUgTFRSIGxvY2FsZXMgKGkuZS4gemgpIGFsc28gcGxhY2UgQU0vUE0gdG8gdGhlIGxlZnQKICAgICAgJHNwaW5uZXJzLnB1c2gobWFrZVNwaW5idXR0b24odGhpcy5zZXRBbXBtLCAnYW1wbScsICdiLXRpbWUtYW1wbScsIHsKICAgICAgICB2YWx1ZTogdGhpcy5tb2RlbEFtcG0sCiAgICAgICAgbWF4OiAxLAogICAgICAgIGZvcm1hdHRlckZuOiB0aGlzLmZvcm1hdEFtcG0sCiAgICAgICAgYXJpYUxhYmVsOiB0aGlzLmxhYmVsQW1wbSwKICAgICAgICAvLyBXZSBzZXQgYHJlcXVpcmVkYCBhcyBgZmFsc2VgLCBzaW5jZSB0aGlzIGFsd2F5cyBoYXMgYSB2YWx1ZQogICAgICAgIHJlcXVpcmVkOiBmYWxzZQogICAgICB9KSk7CiAgICB9IC8vIEFzc2VtYmxlIHNwaW5uZXJzCgoKICAgICRzcGlubmVycyA9IGgoJ2RpdicsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1jZW50ZXIgbXgtYXV0bycsCiAgICAgIGF0dHJzOiB7CiAgICAgICAgcm9sZTogJ2dyb3VwJywKICAgICAgICB0YWJpbmRleDogdGhpcy5kaXNhYmxlZCB8fCB0aGlzLnJlYWRvbmx5ID8gbnVsbCA6ICctMScsCiAgICAgICAgJ2FyaWEtbGFiZWxsZWRieSc6IGNvbXB1dGVkQXJpYUxhYmVsbGVkYnkKICAgICAgfSwKICAgICAgb246IHsKICAgICAgICBrZXlkb3duOiB0aGlzLm9uU3BpbkxlZnRSaWdodCwKICAgICAgICBjbGljazoKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIGZ1bmN0aW9uIGNsaWNrKGV2ZW50KSB7CiAgICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7CiAgICAgICAgICAgIF90aGlzNC5mb2N1cygpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwgJHNwaW5uZXJzKTsgLy8gU2VsZWN0ZWQgdHlwZSBkaXNwbGF5CgogICAgdmFyICR2YWx1ZSA9IGgoJ291dHB1dCcsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdmb3JtLWNvbnRyb2wgZm9ybS1jb250cm9sLXNtIHRleHQtY2VudGVyJywKICAgICAgImNsYXNzIjogewogICAgICAgIGRpc2FibGVkOiB0aGlzLmRpc2FibGVkIHx8IHRoaXMucmVhZG9ubHkKICAgICAgfSwKICAgICAgYXR0cnM6IHsKICAgICAgICBpZDogdmFsdWVJZCwKICAgICAgICByb2xlOiAnc3RhdHVzJywKICAgICAgICAiZm9yIjogc3Bpbklkcy5maWx0ZXIoaWRlbnRpdHkpLmpvaW4oJyAnKSB8fCBudWxsLAogICAgICAgIHRhYmluZGV4OiB0aGlzLmRpc2FibGVkID8gbnVsbCA6ICctMScsCiAgICAgICAgJ2FyaWEtbGl2ZSc6IHRoaXMuaXNMaXZlID8gJ3BvbGl0ZScgOiAnb2ZmJywKICAgICAgICAnYXJpYS1hdG9taWMnOiAndHJ1ZScKICAgICAgfSwKICAgICAgb246IHsKICAgICAgICAvLyBUcmFuc2ZlciBmb2N1cy9jbGljayB0byBmb2N1cyBob3VycyBzcGlubmVyCiAgICAgICAgY2xpY2s6IHRoaXMuZm9jdXMsCiAgICAgICAgZm9jdXM6IHRoaXMuZm9jdXMKICAgICAgfQogICAgfSwgW2goJ2JkaScsIHRoaXMuZm9ybWF0dGVkVGltZVN0cmluZyksIHRoaXMuY29tcHV0ZWRITVMgPyBoKCdzcGFuJywgewogICAgICBzdGF0aWNDbGFzczogJ3NyLW9ubHknCiAgICB9LCAiICgiLmNvbmNhdCh0aGlzLmxhYmVsU2VsZWN0ZWQsICIpICIpKSA6ICcnXSk7CiAgICB2YXIgJGhlYWRlciA9IGgoJ2hlYWRlcicsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdiLXRpbWUtaGVhZGVyJywKICAgICAgImNsYXNzIjogewogICAgICAgICdzci1vbmx5JzogdGhpcy5oaWRlSGVhZGVyCiAgICAgIH0KICAgIH0sIFskdmFsdWVdKTsgLy8gT3B0aW9uYWwgYm90dG9tIHNsb3QKCiAgICB2YXIgJHNsb3QgPSB0aGlzLm5vcm1hbGl6ZVNsb3QoKTsKICAgICRzbG90ID0gJHNsb3QgPyBoKCdmb290ZXInLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnYi10aW1lLWZvb3RlcicKICAgIH0sICRzbG90KSA6IGgoKTsKICAgIHJldHVybiBoKCdkaXYnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnYi10aW1lIGQtaW5saW5lLWZsZXggZmxleC1jb2x1bW4gdGV4dC1jZW50ZXInLAogICAgICBhdHRyczogewogICAgICAgIHJvbGU6ICdncm91cCcsCiAgICAgICAgbGFuZzogdGhpcy5jb21wdXRlZExhbmcgfHwgbnVsbCwKICAgICAgICAnYXJpYS1sYWJlbGxlZGJ5JzogY29tcHV0ZWRBcmlhTGFiZWxsZWRieSB8fCBudWxsLAogICAgICAgICdhcmlhLWRpc2FibGVkJzogdGhpcy5kaXNhYmxlZCA/ICd0cnVlJyA6IG51bGwsCiAgICAgICAgJ2FyaWEtcmVhZG9ubHknOiB0aGlzLnJlYWRvbmx5ICYmICF0aGlzLmRpc2FibGVkID8gJ3RydWUnIDogbnVsbAogICAgICB9CiAgICB9LCBbJGhlYWRlciwgJHNwaW5uZXJzLCAkc2xvdF0pOwogIH0KfSk7"},null]}