{"remainingRequest":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js!/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js","dependencies":[{"path":"/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js","mtime":1610263603568},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/cache-loader/dist/cjs.js","mtime":1582363961748},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js","mtime":1585275399303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pcy1hcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4iOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5kYXRlLnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnRpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZGVmaW5lLXByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yIjsKCnZhciBfd2F0Y2g7CgpmdW5jdGlvbiBfdG9Db25zdW1hYmxlQXJyYXkoYXJyKSB7CiAgcmV0dXJuIF9hcnJheVdpdGhvdXRIb2xlcyhhcnIpIHx8IF9pdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkoYXJyKSB8fCBfbm9uSXRlcmFibGVTcHJlYWQoKTsKfQoKZnVuY3Rpb24gX25vbkl0ZXJhYmxlU3ByZWFkKCkgewogIHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOwp9CgpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7CiAgaWYgKCFvKSByZXR1cm47CiAgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7CiAgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOwogIGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOwogIGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7CiAgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsKfQoKZnVuY3Rpb24gX2l0ZXJhYmxlVG9BcnJheShpdGVyKSB7CiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoaXRlcikpIHJldHVybiBBcnJheS5mcm9tKGl0ZXIpOwp9CgpmdW5jdGlvbiBfYXJyYXlXaXRob3V0SG9sZXMoYXJyKSB7CiAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KGFycik7Cn0KCmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7CiAgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7CgogIGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgewogICAgYXJyMltpXSA9IGFycltpXTsKICB9CgogIHJldHVybiBhcnIyOwp9CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0gLy8gVGFnZ2VkIGlucHV0IGZvcm0gY29udHJvbAovLyBCYXNlZCBsb29zZWx5IG9uIGh0dHBzOi8vYWRhbXdhdGhhbi5tZS9yZW5kZXJsZXNzLWNvbXBvbmVudHMtaW4tdnVlanMvCgoKaW1wb3J0IHsgVnVlIH0gZnJvbSAnLi4vLi4vdnVlJzsKaW1wb3J0IHsgTkFNRV9GT1JNX1RBR1MgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvY29tcG9uZW50cyc7CmltcG9ydCB7IEVWRU5UX05BTUVfVEFHX1NUQVRFLCBFVkVOVF9PUFRJT05TX1BBU1NJVkUsIEhPT0tfRVZFTlRfTkFNRV9CRUZPUkVfREVTVFJPWSB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9ldmVudHMnOwppbXBvcnQgeyBDT0RFX0JBQ0tTUEFDRSwgQ09ERV9ERUxFVEUsIENPREVfRU5URVIgfSBmcm9tICcuLi8uLi9jb25zdGFudHMva2V5LWNvZGVzJzsKaW1wb3J0IHsgUFJPUF9UWVBFX0FSUkFZLCBQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORywgUFJPUF9UWVBFX0FSUkFZX1NUUklORywgUFJPUF9UWVBFX0JPT0xFQU4sIFBST1BfVFlQRV9GVU5DVElPTiwgUFJPUF9UWVBFX05VTUJFUiwgUFJPUF9UWVBFX09CSkVDVCwgUFJPUF9UWVBFX1NUUklORyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9wcm9wcyc7CmltcG9ydCB7IFJYX1NQQUNFUyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9yZWdleCc7CmltcG9ydCB7IFNMT1RfTkFNRV9ERUZBVUxULCBTTE9UX05BTUVfQUREX0JVVFRPTl9URVhUIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Nsb3RzJzsKaW1wb3J0IHsgYXJyYXlJbmNsdWRlcywgY29uY2F0IH0gZnJvbSAnLi4vLi4vdXRpbHMvYXJyYXknOwppbXBvcnQgeyBjc3NFc2NhcGUgfSBmcm9tICcuLi8uLi91dGlscy9jc3MtZXNjYXBlJzsKaW1wb3J0IHsgYXR0ZW1wdEJsdXIsIGF0dGVtcHRGb2N1cywgY2xvc2VzdCwgaXNBY3RpdmVFbGVtZW50LCBtYXRjaGVzLCByZXF1ZXN0QUYsIHNlbGVjdCB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbSc7CmltcG9ydCB7IGV2ZW50T24sIGV2ZW50T2ZmLCBzdG9wRXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9ldmVudHMnOwppbXBvcnQgeyBpZGVudGl0eSB9IGZyb20gJy4uLy4uL3V0aWxzL2lkZW50aXR5JzsKaW1wb3J0IHsgaXNFdmVudCwgaXNOdW1iZXIsIGlzU3RyaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvaW5zcGVjdCc7CmltcG9ydCB7IGxvb3NlRXF1YWwgfSBmcm9tICcuLi8uLi91dGlscy9sb29zZS1lcXVhbCc7CmltcG9ydCB7IG1ha2VNb2RlbE1peGluIH0gZnJvbSAnLi4vLi4vdXRpbHMvbW9kZWwnOwppbXBvcnQgeyBwaWNrLCBzb3J0S2V5cyB9IGZyb20gJy4uLy4uL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGhhc1Byb3BGdW5jdGlvbiwgbWFrZVByb3AsIG1ha2VQcm9wc0NvbmZpZ3VyYWJsZSB9IGZyb20gJy4uLy4uL3V0aWxzL3Byb3BzJzsKaW1wb3J0IHsgZXNjYXBlUmVnRXhwLCB0b1N0cmluZywgdHJpbSwgdHJpbUxlZnQgfSBmcm9tICcuLi8uLi91dGlscy9zdHJpbmcnOwppbXBvcnQgeyBmb3JtQ29udHJvbE1peGluLCBwcm9wcyBhcyBmb3JtQ29udHJvbFByb3BzIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2Zvcm0tY29udHJvbCc7CmltcG9ydCB7IGZvcm1TaXplTWl4aW4sIHByb3BzIGFzIGZvcm1TaXplUHJvcHMgfSBmcm9tICcuLi8uLi9taXhpbnMvZm9ybS1zaXplJzsKaW1wb3J0IHsgZm9ybVN0YXRlTWl4aW4sIHByb3BzIGFzIGZvcm1TdGF0ZVByb3BzIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2Zvcm0tc3RhdGUnOwppbXBvcnQgeyBpZE1peGluLCBwcm9wcyBhcyBpZFByb3BzIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2lkJzsKaW1wb3J0IHsgbm9ybWFsaXplU2xvdE1peGluIH0gZnJvbSAnLi4vLi4vbWl4aW5zL25vcm1hbGl6ZS1zbG90JzsKaW1wb3J0IHsgQkJ1dHRvbiB9IGZyb20gJy4uL2J1dHRvbi9idXR0b24nOwppbXBvcnQgeyBCRm9ybUludmFsaWRGZWVkYmFjayB9IGZyb20gJy4uL2Zvcm0vZm9ybS1pbnZhbGlkLWZlZWRiYWNrJzsKaW1wb3J0IHsgQkZvcm1UZXh0IH0gZnJvbSAnLi4vZm9ybS9mb3JtLXRleHQnOwppbXBvcnQgeyBCRm9ybVRhZyB9IGZyb20gJy4vZm9ybS10YWcnOyAvLyAtLS0gQ29uc3RhbnRzIC0tLQoKdmFyIF9tYWtlTW9kZWxNaXhpbiA9IG1ha2VNb2RlbE1peGluKCd2YWx1ZScsIHsKICB0eXBlOiBQUk9QX1RZUEVfQVJSQVksCiAgZGVmYXVsdFZhbHVlOiBbXQp9KSwKICAgIG1vZGVsTWl4aW4gPSBfbWFrZU1vZGVsTWl4aW4ubWl4aW4sCiAgICBtb2RlbFByb3BzID0gX21ha2VNb2RlbE1peGluLnByb3BzLAogICAgTU9ERUxfUFJPUF9OQU1FID0gX21ha2VNb2RlbE1peGluLnByb3AsCiAgICBNT0RFTF9FVkVOVF9OQU1FID0gX21ha2VNb2RlbE1peGluLmV2ZW50OyAvLyBTdXBwb3J0ZWQgaW5wdXQgdHlwZXMgKGZvciBidWlsdCBpbiBpbnB1dCkKCgp2YXIgVFlQRVMgPSBbJ3RleHQnLCAnZW1haWwnLCAndGVsJywgJ3VybCcsICdudW1iZXInXTsgLy8gRGVmYXVsdCBpZ25vcmUgaW5wdXQgZm9jdXMgc2VsZWN0b3IKCnZhciBERUZBVUxUX0lOUFVUX0ZPQ1VTX1NFTEVDVE9SID0gWycuYi1mb3JtLXRhZycsICdidXR0b24nLCAnaW5wdXQnLCAnc2VsZWN0J10uam9pbignICcpOyAvLyAtLS0gSGVscGVyIG1ldGhvZHMgLS0tCi8vIEVzY2FwZSBzcGVjaWFsIGNoYXJzIGluIHN0cmluZyBhbmQgcmVwbGFjZQovLyBjb250aWd1b3VzIHNwYWNlcyB3aXRoIGEgd2hpdGVzcGFjZSBtYXRjaAoKdmFyIGVzY2FwZVJlZ0V4cENoYXJzID0gZnVuY3Rpb24gZXNjYXBlUmVnRXhwQ2hhcnMoc3RyKSB7CiAgcmV0dXJuIGVzY2FwZVJlZ0V4cChzdHIpLnJlcGxhY2UoUlhfU1BBQ0VTLCAnXFxzJyk7Cn07IC8vIFJlbW92ZSBsZWFkaW5nL3RyYWlsaW5nIHNwYWNlcyBmcm9tIGFycmF5IG9mIHRhZ3MgYW5kIHJlbW92ZSBkdXBsaWNhdGVzCgoKdmFyIGNsZWFuVGFncyA9IGZ1bmN0aW9uIGNsZWFuVGFncyh0YWdzKSB7CiAgcmV0dXJuIGNvbmNhdCh0YWdzKS5tYXAoZnVuY3Rpb24gKHRhZykgewogICAgcmV0dXJuIHRyaW0odG9TdHJpbmcodGFnKSk7CiAgfSkuZmlsdGVyKGZ1bmN0aW9uICh0YWcsIGluZGV4LCBhcnIpIHsKICAgIHJldHVybiB0YWcubGVuZ3RoID4gMCAmJiBhcnIuaW5kZXhPZih0YWcpID09PSBpbmRleDsKICB9KTsKfTsgLy8gUHJvY2Vzc2VzIGFuIGlucHV0L2NoYW5nZSBldmVudCwgbm9ybWFsaXppbmcgc3RyaW5nIG9yIGV2ZW50IGFyZ3VtZW50CgoKdmFyIHByb2Nlc3NFdmVudFZhbHVlID0gZnVuY3Rpb24gcHJvY2Vzc0V2ZW50VmFsdWUoZXZlbnQpIHsKICByZXR1cm4gaXNTdHJpbmcoZXZlbnQpID8gZXZlbnQgOiBpc0V2ZW50KGV2ZW50KSA/IGV2ZW50LnRhcmdldC52YWx1ZSB8fCAnJyA6ICcnOwp9OyAvLyBSZXR1cm5zIGEgZnJlc2ggZW1wdHkgYHRhZ3NTdGF0ZWAgb2JqZWN0CgoKdmFyIGNsZWFuVGFnc1N0YXRlID0gZnVuY3Rpb24gY2xlYW5UYWdzU3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIGFsbDogW10sCiAgICB2YWxpZDogW10sCiAgICBpbnZhbGlkOiBbXSwKICAgIGR1cGxpY2F0ZTogW10KICB9Owp9OyAvLyAtLS0gUHJvcHMgLS0tCgoKdmFyIHByb3BzID0gbWFrZVByb3BzQ29uZmlndXJhYmxlKHNvcnRLZXlzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBpZFByb3BzKSwgbW9kZWxQcm9wcyksIGZvcm1Db250cm9sUHJvcHMpLCBmb3JtU2l6ZVByb3BzKSwgZm9ybVN0YXRlUHJvcHMpLCB7fSwgewogIGFkZEJ1dHRvblRleHQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdBZGQnKSwKICBhZGRCdXR0b25WYXJpYW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnb3V0bGluZS1zZWNvbmRhcnknKSwKICAvLyBFbmFibGUgY2hhbmdlIGV2ZW50IHRyaWdnZXJpbmcgdGFnIGFkZGl0aW9uCiAgLy8gSGFuZHkgaWYgdXNpbmcgPHNlbGVjdD4gYXMgdGhlIGlucHV0CiAgYWRkT25DaGFuZ2U6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgZHVwbGljYXRlVGFnVGV4dDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0R1cGxpY2F0ZSB0YWcocyknKSwKICAvLyBEaXNhYmxlIHRoZSBpbnB1dCBmb2N1cyBiZWhhdmlvciB3aGVuIGNsaWNraW5nCiAgLy8gb24gZWxlbWVudCBtYXRjaGluZyB0aGUgc2VsZWN0b3IgKG9yIHNlbGVjdG9ycykKICBpZ25vcmVJbnB1dEZvY3VzU2VsZWN0b3I6IG1ha2VQcm9wKFBST1BfVFlQRV9BUlJBWV9TVFJJTkcsIERFRkFVTFRfSU5QVVRfRk9DVVNfU0VMRUNUT1IpLAogIC8vIEFkZGl0aW9uYWwgYXR0cmlidXRlcyB0byBhZGQgdG8gdGhlIGlucHV0IGVsZW1lbnQKICBpbnB1dEF0dHJzOiBtYWtlUHJvcChQUk9QX1RZUEVfT0JKRUNULCB7fSksCiAgaW5wdXRDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIGlucHV0SWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogIGlucHV0VHlwZTogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ3RleHQnLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgIHJldHVybiBhcnJheUluY2x1ZGVzKFRZUEVTLCB2YWx1ZSk7CiAgfSksCiAgaW52YWxpZFRhZ1RleHQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdJbnZhbGlkIHRhZyhzKScpLAogIGxpbWl0OiBtYWtlUHJvcChQUk9QX1RZUEVfTlVNQkVSKSwKICBsaW1pdFRhZ3NUZXh0OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnVGFnIGxpbWl0IHJlYWNoZWQnKSwKICAvLyBEaXNhYmxlIEVOVEVSIGtleSBmcm9tIHRyaWdnZXJpbmcgdGFnIGFkZGl0aW9uCiAgbm9BZGRPbkVudGVyOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIERpc2FibGUgdGhlIGZvY3VzIHJpbmcgb24gdGhlIHJvb3QgZWxlbWVudAogIG5vT3V0ZXJGb2N1czogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBub1RhZ1JlbW92ZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBwbGFjZWhvbGRlcjogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ0FkZCB0YWcuLi4nKSwKICAvLyBFbmFibGUgZGVsZXRpbmcgbGFzdCB0YWcgaW4gbGlzdCB3aGVuIENPREVfQkFDS1NQQUNFIGlzCiAgLy8gcHJlc3NlZCBhbmQgaW5wdXQgaXMgZW1wdHkKICByZW1vdmVPbkRlbGV0ZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICAvLyBDaGFyYWN0ZXIgKG9yIGNoYXJhY3RlcnMpIHRoYXQgdHJpZ2dlciBhZGRpbmcgdGFncwogIHNlcGFyYXRvcjogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX1NUUklORyksCiAgdGFnQ2xhc3M6IG1ha2VQcm9wKFBST1BfVFlQRV9BUlJBWV9PQkpFQ1RfU1RSSU5HKSwKICB0YWdQaWxsczogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICB0YWdSZW1vdmVMYWJlbDogbWFrZVByb3AoUFJPUF9UWVBFX1NUUklORywgJ1JlbW92ZSB0YWcnKSwKICB0YWdSZW1vdmVkTGFiZWw6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdUYWcgcmVtb3ZlZCcpLAogIHRhZ1ZhbGlkYXRvcjogbWFrZVByb3AoUFJPUF9UWVBFX0ZVTkNUSU9OKSwKICB0YWdWYXJpYW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnc2Vjb25kYXJ5JykKfSkpLCBOQU1FX0ZPUk1fVEFHUyk7IC8vIC0tLSBNYWluIGNvbXBvbmVudCAtLS0KLy8gQHZ1ZS9jb21wb25lbnQKCmV4cG9ydCB2YXIgQkZvcm1UYWdzID0gLyojX19QVVJFX18qL1Z1ZS5leHRlbmQoewogIG5hbWU6IE5BTUVfRk9STV9UQUdTLAogIG1peGluczogW2lkTWl4aW4sIG1vZGVsTWl4aW4sIGZvcm1Db250cm9sTWl4aW4sIGZvcm1TaXplTWl4aW4sIGZvcm1TdGF0ZU1peGluLCBub3JtYWxpemVTbG90TWl4aW5dLAogIHByb3BzOiBwcm9wcywKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaGFzRm9jdXM6IGZhbHNlLAogICAgICBuZXdUYWc6ICcnLAogICAgICB0YWdzOiBbXSwKICAgICAgLy8gVGFncyB0aGF0IHdlcmUgcmVtb3ZlZAogICAgICByZW1vdmVkVGFnczogW10sCiAgICAgIC8vIFBvcHVsYXRlZCB3aGVuIHRhZ3MgYXJlIHBhcnNlZAogICAgICB0YWdzU3RhdGU6IGNsZWFuVGFnc1N0YXRlKCkKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29tcHV0ZWRJbnB1dElkOiBmdW5jdGlvbiBjb21wdXRlZElucHV0SWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlucHV0SWQgfHwgdGhpcy5zYWZlSWQoJ19faW5wdXRfXycpOwogICAgfSwKICAgIGNvbXB1dGVkSW5wdXRUeXBlOiBmdW5jdGlvbiBjb21wdXRlZElucHV0VHlwZSgpIHsKICAgICAgLy8gV2Ugb25seSBhbGxvdyBjZXJ0YWluIHR5cGVzCiAgICAgIHJldHVybiBhcnJheUluY2x1ZGVzKFRZUEVTLCB0aGlzLmlucHV0VHlwZSkgPyB0aGlzLmlucHV0VHlwZSA6ICd0ZXh0JzsKICAgIH0sCiAgICBjb21wdXRlZElucHV0QXR0cnM6IGZ1bmN0aW9uIGNvbXB1dGVkSW5wdXRBdHRycygpIHsKICAgICAgdmFyIGRpc2FibGVkID0gdGhpcy5kaXNhYmxlZCwKICAgICAgICAgIGZvcm0gPSB0aGlzLmZvcm07CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHRoaXMuaW5wdXRBdHRycyksIHt9LCB7CiAgICAgICAgLy8gTXVzdCBoYXZlIGF0dHJpYnV0ZXMKICAgICAgICBpZDogdGhpcy5jb21wdXRlZElucHV0SWQsCiAgICAgICAgdmFsdWU6IHRoaXMubmV3VGFnLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICBmb3JtOiBmb3JtCiAgICAgIH0pOwogICAgfSwKICAgIGNvbXB1dGVkSW5wdXRIYW5kbGVyczogZnVuY3Rpb24gY29tcHV0ZWRJbnB1dEhhbmRsZXJzKCkgewogICAgICByZXR1cm4gewogICAgICAgIGlucHV0OiB0aGlzLm9uSW5wdXRJbnB1dCwKICAgICAgICBjaGFuZ2U6IHRoaXMub25JbnB1dENoYW5nZSwKICAgICAgICBrZXlkb3duOiB0aGlzLm9uSW5wdXRLZXlkb3duLAogICAgICAgIHJlc2V0OiB0aGlzLnJlc2V0CiAgICAgIH07CiAgICB9LAogICAgY29tcHV0ZWRTZXBhcmF0b3I6IGZ1bmN0aW9uIGNvbXB1dGVkU2VwYXJhdG9yKCkgewogICAgICAvLyBNZXJnZSB0aGUgYXJyYXkgaW50byBhIHN0cmluZwogICAgICByZXR1cm4gY29uY2F0KHRoaXMuc2VwYXJhdG9yKS5maWx0ZXIoaXNTdHJpbmcpLmZpbHRlcihpZGVudGl0eSkuam9pbignJyk7CiAgICB9LAogICAgY29tcHV0ZWRTZXBhcmF0b3JSZWdFeHA6IGZ1bmN0aW9uIGNvbXB1dGVkU2VwYXJhdG9yUmVnRXhwKCkgewogICAgICAvLyBXZSB1c2UgYSBjb21wdXRlZCBwcm9wIGhlcmUgdG8gcHJlY29tcGlsZSB0aGUgUmVnRXhwCiAgICAgIC8vIFRoZSBSZWdFeHAgaXMgYSBjaGFyYWN0ZXIgY2xhc3MgUkUgaW4gdGhlIGZvcm0gb2YgYC9bYWJjXSsvYAogICAgICAvLyB3aGVyZSBhLCBiLCBhbmQgYyBhcmUgdGhlIHZhbGlkIHNlcGFyYXRvciBjaGFyYWN0ZXJzCiAgICAgIC8vIC0+IGB0YWdzID0gc3RyLnNwbGl0KC9bYWJjXSsvKS5maWx0ZXIodCA9PiB0KWAKICAgICAgdmFyIHNlcGFyYXRvciA9IHRoaXMuY29tcHV0ZWRTZXBhcmF0b3I7CiAgICAgIHJldHVybiBzZXBhcmF0b3IgPyBuZXcgUmVnRXhwKCJbIi5jb25jYXQoZXNjYXBlUmVnRXhwQ2hhcnMoc2VwYXJhdG9yKSwgIl0rIikpIDogbnVsbDsKICAgIH0sCiAgICBjb21wdXRlZEpvaW5lcjogZnVuY3Rpb24gY29tcHV0ZWRKb2luZXIoKSB7CiAgICAgIC8vIFdoZW4gdGFnKHMpIGFyZSBpbnZhbGlkIG9yIGR1cGxpY2F0ZSwgd2UgbGVhdmUgdGhlbQogICAgICAvLyBpbiB0aGUgaW5wdXQgc28gdGhhdCB0aGUgdXNlciBjYW4gc2VlIHRoZW0KICAgICAgLy8gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgdGFnIGluIHRoZSBpbnB1dCwgd2UgdXNlIHRoZQogICAgICAvLyBmaXJzdCBzZXBhcmF0b3IgY2hhcmFjdGVyIGFzIHRoZSBzZXBhcmF0b3IgaW4gdGhlIGlucHV0CiAgICAgIC8vIFdlIGFwcGVuZCBhIHNwYWNlIGlmIHRoZSBmaXJzdCBzZXBhcmF0b3IgaXMgbm90IGEgc3BhY2UKICAgICAgdmFyIGpvaW5lciA9IHRoaXMuY29tcHV0ZWRTZXBhcmF0b3IuY2hhckF0KDApOwogICAgICByZXR1cm4gam9pbmVyICE9PSAnICcgPyAiIi5jb25jYXQoam9pbmVyLCAiICIpIDogam9pbmVyOwogICAgfSwKICAgIGNvbXB1dGVJZ25vcmVJbnB1dEZvY3VzU2VsZWN0b3I6IGZ1bmN0aW9uIGNvbXB1dGVJZ25vcmVJbnB1dEZvY3VzU2VsZWN0b3IoKSB7CiAgICAgIC8vIE5vcm1hbGl6ZSB0byBhbiBzaW5nbGUgc2VsZWN0b3Igd2l0aCBzZWxlY3RvcnMgc2VwYXJhdGVkIGJ5IGAsYAogICAgICByZXR1cm4gY29uY2F0KHRoaXMuaWdub3JlSW5wdXRGb2N1c1NlbGVjdG9yKS5maWx0ZXIoaWRlbnRpdHkpLmpvaW4oJywnKS50cmltKCk7CiAgICB9LAogICAgZGlzYWJsZUFkZEJ1dHRvbjogZnVuY3Rpb24gZGlzYWJsZUFkZEJ1dHRvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsgLy8gSWYgJ0FkZCcgYnV0dG9uIHNob3VsZCBiZSBkaXNhYmxlZAogICAgICAvLyBJZiB0aGUgaW5wdXQgY29udGFpbnMgYXQgbGVhc3Qgb25lIHRhZyB0aGF0IGNhbgogICAgICAvLyBiZSBhZGRlZCwgdGhlbiB0aGUgJ0FkZCcgYnV0dG9uIHNob3VsZCBiZSBlbmFibGVkCgoKICAgICAgdmFyIG5ld1RhZyA9IHRyaW0odGhpcy5uZXdUYWcpOwogICAgICByZXR1cm4gbmV3VGFnID09PSAnJyB8fCAhdGhpcy5zcGxpdFRhZ3MobmV3VGFnKS5zb21lKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuICFhcnJheUluY2x1ZGVzKF90aGlzLnRhZ3MsIHQpICYmIF90aGlzLnZhbGlkYXRlVGFnKHQpOwogICAgICB9KTsKICAgIH0sCiAgICBkdXBsaWNhdGVUYWdzOiBmdW5jdGlvbiBkdXBsaWNhdGVUYWdzKCkgewogICAgICByZXR1cm4gdGhpcy50YWdzU3RhdGUuZHVwbGljYXRlOwogICAgfSwKICAgIGhhc0R1cGxpY2F0ZVRhZ3M6IGZ1bmN0aW9uIGhhc0R1cGxpY2F0ZVRhZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmR1cGxpY2F0ZVRhZ3MubGVuZ3RoID4gMDsKICAgIH0sCiAgICBpbnZhbGlkVGFnczogZnVuY3Rpb24gaW52YWxpZFRhZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnRhZ3NTdGF0ZS5pbnZhbGlkOwogICAgfSwKICAgIGhhc0ludmFsaWRUYWdzOiBmdW5jdGlvbiBoYXNJbnZhbGlkVGFncygpIHsKICAgICAgcmV0dXJuIHRoaXMuaW52YWxpZFRhZ3MubGVuZ3RoID4gMDsKICAgIH0sCiAgICBpc0xpbWl0UmVhY2hlZDogZnVuY3Rpb24gaXNMaW1pdFJlYWNoZWQoKSB7CiAgICAgIHZhciBsaW1pdCA9IHRoaXMubGltaXQ7CiAgICAgIHJldHVybiBpc051bWJlcihsaW1pdCkgJiYgbGltaXQgPj0gMCAmJiB0aGlzLnRhZ3MubGVuZ3RoID49IGxpbWl0OwogICAgfQogIH0sCiAgd2F0Y2g6IChfd2F0Y2ggPSB7fSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgTU9ERUxfUFJPUF9OQU1FLCBmdW5jdGlvbiAobmV3VmFsdWUpIHsKICAgIHRoaXMudGFncyA9IGNsZWFuVGFncyhuZXdWYWx1ZSk7CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICJ0YWdzIiwgZnVuY3Rpb24gdGFncyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIC8vIFVwZGF0ZSB0aGUgYHYtbW9kZWxgIChpZiBpdCBkaWZmZXJzIGZyb20gdGhlIHZhbHVlIHByb3ApCiAgICBpZiAoIWxvb3NlRXF1YWwobmV3VmFsdWUsIHRoaXNbTU9ERUxfUFJPUF9OQU1FXSkpIHsKICAgICAgdGhpcy4kZW1pdChNT0RFTF9FVkVOVF9OQU1FLCBuZXdWYWx1ZSk7CiAgICB9CgogICAgaWYgKCFsb29zZUVxdWFsKG5ld1ZhbHVlLCBvbGRWYWx1ZSkpIHsKICAgICAgbmV3VmFsdWUgPSBjb25jYXQobmV3VmFsdWUpLmZpbHRlcihpZGVudGl0eSk7CiAgICAgIG9sZFZhbHVlID0gY29uY2F0KG9sZFZhbHVlKS5maWx0ZXIoaWRlbnRpdHkpOwogICAgICB0aGlzLnJlbW92ZWRUYWdzID0gb2xkVmFsdWUuZmlsdGVyKGZ1bmN0aW9uIChvbGQpIHsKICAgICAgICByZXR1cm4gIWFycmF5SW5jbHVkZXMobmV3VmFsdWUsIG9sZCk7CiAgICAgIH0pOwogICAgfQogIH0pLCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCAidGFnc1N0YXRlIiwgZnVuY3Rpb24gdGFnc1N0YXRlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgLy8gRW1pdCBhIHRhZy1zdGF0ZSBldmVudCB3aGVuIHRoZSBgdGFnc1N0YXRlYCBvYmplY3QgY2hhbmdlcwogICAgaWYgKCFsb29zZUVxdWFsKG5ld1ZhbHVlLCBvbGRWYWx1ZSkpIHsKICAgICAgdGhpcy4kZW1pdChFVkVOVF9OQU1FX1RBR19TVEFURSwgbmV3VmFsdWUudmFsaWQsIG5ld1ZhbHVlLmludmFsaWQsIG5ld1ZhbHVlLmR1cGxpY2F0ZSk7CiAgICB9CiAgfSksIF93YXRjaCksCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIFdlIGRvIHRoaXMgaW4gY3JlYXRlZCB0byBtYWtlIHN1cmUgYW4gaW5wdXQgZXZlbnQgZW1pdHMKICAgIC8vIGlmIHRoZSBjbGVhbmVkIHRhZ3MgYXJlIG5vdCBlcXVhbCB0byB0aGUgdmFsdWUgcHJvcAogICAgdGhpcy50YWdzID0gY2xlYW5UYWdzKHRoaXNbTU9ERUxfUFJPUF9OQU1FXSk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7IC8vIExpc3RlbiBmb3IgZm9ybSByZXNldCBldmVudHMsIHRvIHJlc2V0IHRoZSB0YWdzIGlucHV0CgoKICAgIHZhciAkZm9ybSA9IGNsb3Nlc3QoJ2Zvcm0nLCB0aGlzLiRlbCk7CgogICAgaWYgKCRmb3JtKSB7CiAgICAgIGV2ZW50T24oJGZvcm0sICdyZXNldCcsIHRoaXMucmVzZXQsIEVWRU5UX09QVElPTlNfUEFTU0lWRSk7CiAgICAgIHRoaXMuJG9uKEhPT0tfRVZFTlRfTkFNRV9CRUZPUkVfREVTVFJPWSwgZnVuY3Rpb24gKCkgewogICAgICAgIGV2ZW50T2ZmKCRmb3JtLCAncmVzZXQnLCBfdGhpczIucmVzZXQsIEVWRU5UX09QVElPTlNfUEFTU0lWRSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkVGFnOiBmdW5jdGlvbiBhZGRUYWcobmV3VGFnKSB7CiAgICAgIG5ld1RhZyA9IGlzU3RyaW5nKG5ld1RhZykgPyBuZXdUYWcgOiB0aGlzLm5ld1RhZzsKICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KCiAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8IHRyaW0obmV3VGFnKSA9PT0gJycgfHwgdGhpcy5pc0xpbWl0UmVhY2hlZCkgewogICAgICAgIC8vIEVhcmx5IGV4aXQKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBwYXJzZWQgPSB0aGlzLnBhcnNlVGFncyhuZXdUYWcpOyAvLyBBZGQgYW55IG5ldyB0YWdzIHRvIHRoZSBgdGFnc2AgYXJyYXksIG9yIGlmIHRoZQogICAgICAvLyBhcnJheSBvZiBgYWxsVGFnc2AgaXMgZW1wdHksIHdlIGNsZWFyIHRoZSBpbnB1dAoKICAgICAgaWYgKHBhcnNlZC52YWxpZC5sZW5ndGggPiAwIHx8IHBhcnNlZC5hbGwubGVuZ3RoID09PSAwKSB7CiAgICAgICAgLy8gQ2xlYXIgdGhlIHVzZXIgaW5wdXQgZWxlbWVudCAoYW5kIGxlYXZlIGluIGFueSBpbnZhbGlkL2R1cGxpY2F0ZSB0YWcocykKCiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmOiBmdWxsIHRlc3RpbmcgdG8gYmUgYWRkZWQgbGF0ZXIgKi8KICAgICAgICBpZiAobWF0Y2hlcyh0aGlzLmdldElucHV0KCksICdzZWxlY3QnKSkgewogICAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBpcyBuZWVkZWQgdG8gcHJvcGVybHkKICAgICAgICAgIC8vIHdvcmsgd2l0aCBgPHNlbGVjdD5gIGVsZW1lbnRzCiAgICAgICAgICB0aGlzLm5ld1RhZyA9ICcnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2YXIgaW52YWxpZEFuZER1cGxpY2F0ZXMgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHBhcnNlZC5pbnZhbGlkKSwgX3RvQ29uc3VtYWJsZUFycmF5KHBhcnNlZC5kdXBsaWNhdGUpKTsKICAgICAgICAgIHRoaXMubmV3VGFnID0gcGFyc2VkLmFsbC5maWx0ZXIoZnVuY3Rpb24gKHRhZykgewogICAgICAgICAgICByZXR1cm4gYXJyYXlJbmNsdWRlcyhpbnZhbGlkQW5kRHVwbGljYXRlcywgdGFnKTsKICAgICAgICAgIH0pLmpvaW4odGhpcy5jb21wdXRlZEpvaW5lcikuY29uY2F0KGludmFsaWRBbmREdXBsaWNhdGVzLmxlbmd0aCA+IDAgPyB0aGlzLmNvbXB1dGVkSm9pbmVyLmNoYXJBdCgwKSA6ICcnKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChwYXJzZWQudmFsaWQubGVuZ3RoID4gMCkgewogICAgICAgIC8vIFdlIGFkZCB0aGUgbmV3IHRhZ3MgaW4gb25lIGF0b21pYyBvcGVyYXRpb24KICAgICAgICAvLyB0byB0cmlnZ2VyIHJlYWN0aXZpdHkgb25jZSAoaW5zdGVhZCBvZiBvbmNlIHBlciB0YWcpCiAgICAgICAgLy8gV2UgZG8gdGhpcyBhZnRlciB3ZSB1cGRhdGUgdGhlIG5ldyB0YWcgaW5wdXQgdmFsdWUKICAgICAgICAvLyBgY29uY2F0KClgIGNhbiBiZSBmYXN0ZXIgdGhhbiBhcnJheSBzcHJlYWQsIHdoZW4gYm90aCBhcmdzIGFyZSBhcnJheXMKICAgICAgICB0aGlzLnRhZ3MgPSBjb25jYXQodGhpcy50YWdzLCBwYXJzZWQudmFsaWQpOwogICAgICB9CgogICAgICB0aGlzLnRhZ3NTdGF0ZSA9IHBhcnNlZDsgLy8gQXR0ZW1wdCB0byByZS1mb2N1cyB0aGUgaW5wdXQgKHNwZWNpZmljYWxseSBmb3Igd2hlbiB1c2luZyB0aGUgQWRkCiAgICAgIC8vIGJ1dHRvbiwgYXMgdGhlIGJ1dHRvbiBkaXNhcHBlYXJzIGFmdGVyIHN1Y2Nlc3NmdWxseSBhZGRpbmcgYSB0YWcKCiAgICAgIHRoaXMuZm9jdXMoKTsKICAgIH0sCiAgICByZW1vdmVUYWc6IGZ1bmN0aW9uIHJlbW92ZVRhZyh0YWcpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgoKICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0gLy8gVE9ETzoKICAgICAgLy8gICBBZGQgYG9uUmVtb3ZlVGFnKHRhZylgIHVzZXIgbWV0aG9kLCB3aGljaCBpZiByZXR1cm5zIGBmYWxzZWAKICAgICAgLy8gICB3aWxsIHByZXZlbnQgdGhlIHRhZyBmcm9tIGJlaW5nIHJlbW92ZWQgKGkuZS4gY29uZmlybWF0aW9uKQogICAgICAvLyAgIE9yIGVtaXQgY2FuY2VsYWJsZSBgQnZFdmVudGAKCgogICAgICB0aGlzLnRhZ3MgPSB0aGlzLnRhZ3MuZmlsdGVyKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgcmV0dXJuIHQgIT09IHRhZzsKICAgICAgfSk7IC8vIFJldHVybiBmb2N1cyB0byB0aGUgaW5wdXQgKGlmIHBvc3NpYmxlKQoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5mb2N1cygpOwogICAgICB9KTsKICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOwoKICAgICAgdGhpcy5uZXdUYWcgPSAnJzsKICAgICAgdGhpcy50YWdzID0gW107CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczQucmVtb3ZlZFRhZ3MgPSBbXTsKICAgICAgICBfdGhpczQudGFnc1N0YXRlID0gY2xlYW5UYWdzU3RhdGUoKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gLS0tIElucHV0IGVsZW1lbnQgZXZlbnQgaGFuZGxlcnMgLS0tCiAgICBvbklucHV0SW5wdXQ6IGZ1bmN0aW9uIG9uSW5wdXRJbnB1dChldmVudCkgewogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogaGFyZCB0byB0ZXN0IGNvbXBvc2l0aW9uIGV2ZW50cyAqLwogICAgICBpZiAodGhpcy5kaXNhYmxlZCB8fCBpc0V2ZW50KGV2ZW50KSAmJiBldmVudC50YXJnZXQuY29tcG9zaW5nKSB7CiAgICAgICAgLy8gYGV2ZW50LnRhcmdldC5jb21wb3NpbmdgIGlzIHNldCBieSBWdWUgKGB2LW1vZGVsYCBkaXJlY3RpdmUpCiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS9ibG9iL2Rldi9zcmMvcGxhdGZvcm1zL3dlYi9ydW50aW1lL2RpcmVjdGl2ZXMvbW9kZWwuanMKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBuZXdUYWcgPSBwcm9jZXNzRXZlbnRWYWx1ZShldmVudCk7CiAgICAgIHZhciBzZXBhcmF0b3JSZSA9IHRoaXMuY29tcHV0ZWRTZXBhcmF0b3JSZWdFeHA7CgogICAgICBpZiAodGhpcy5uZXdUYWcgIT09IG5ld1RhZykgewogICAgICAgIHRoaXMubmV3VGFnID0gbmV3VGFnOwogICAgICB9IC8vIFdlIGlnbm9yZSBsZWFkaW5nIHdoaXRlc3BhY2UgZm9yIHRoZSBmb2xsb3dpbmcKCgogICAgICBuZXdUYWcgPSB0cmltTGVmdChuZXdUYWcpOwoKICAgICAgaWYgKHNlcGFyYXRvclJlICYmIHNlcGFyYXRvclJlLnRlc3QobmV3VGFnLnNsaWNlKC0xKSkpIHsKICAgICAgICAvLyBBIHRyYWlsaW5nIHNlcGFyYXRvciBjaGFyYWN0ZXIgd2FzIGVudGVyZWQsIHNvIGFkZCB0aGUgdGFnKHMpCiAgICAgICAgLy8gTm90ZTogTW9yZSB0aGFuIG9uZSB0YWcgb24gaW5wdXQgZXZlbnQgaXMgcG9zc2libGUgdmlhIGNvcHkvcGFzdGUKICAgICAgICB0aGlzLmFkZFRhZygpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIFZhbGlkYXRlIChwYXJzZSB0YWdzKSBvbiBpbnB1dCBldmVudAogICAgICAgIHRoaXMudGFnc1N0YXRlID0gbmV3VGFnID09PSAnJyA/IGNsZWFuVGFnc1N0YXRlKCkgOiB0aGlzLnBhcnNlVGFncyhuZXdUYWcpOwogICAgICB9CiAgICB9LAogICAgb25JbnB1dENoYW5nZTogZnVuY3Rpb24gb25JbnB1dENoYW5nZShldmVudCkgewogICAgICAvLyBDaGFuZ2UgaXMgdHJpZ2dlcmVkIG9uIGA8aW5wdXQ+YCBibHVyLCBvciBgPHNlbGVjdD5gIHNlbGVjdGVkCiAgICAgIC8vIFRoaXMgZXZlbnQgaXMgb3B0LWluCiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCAmJiB0aGlzLmFkZE9uQ2hhbmdlKSB7CiAgICAgICAgdmFyIG5ld1RhZyA9IHByb2Nlc3NFdmVudFZhbHVlKGV2ZW50KTsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwoKICAgICAgICBpZiAodGhpcy5uZXdUYWcgIT09IG5ld1RhZykgewogICAgICAgICAgdGhpcy5uZXdUYWcgPSBuZXdUYWc7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmFkZFRhZygpOwogICAgICB9CiAgICB9LAogICAgb25JbnB1dEtleWRvd246IGZ1bmN0aW9uIG9uSW5wdXRLZXlkb3duKGV2ZW50KSB7CiAgICAgIC8vIEVhcmx5IGV4aXQKCiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgIGlmICh0aGlzLmRpc2FibGVkIHx8ICFpc0V2ZW50KGV2ZW50KSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGtleUNvZGUgPSBldmVudC5rZXlDb2RlOwogICAgICB2YXIgdmFsdWUgPSBldmVudC50YXJnZXQudmFsdWUgfHwgJyc7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlOiB0ZXN0aW5nIHRvIGJlIGFkZGVkIGxhdGVyICovCgogICAgICBpZiAoIXRoaXMubm9BZGRPbkVudGVyICYmIGtleUNvZGUgPT09IENPREVfRU5URVIpIHsKICAgICAgICAvLyBBdHRlbXB0IHRvIGFkZCB0aGUgdGFnIHdoZW4gdXNlciBwcmVzc2VzIGVudGVyCiAgICAgICAgc3RvcEV2ZW50KGV2ZW50LCB7CiAgICAgICAgICBwcm9wYWdhdGlvbjogZmFsc2UKICAgICAgICB9KTsKICAgICAgICB0aGlzLmFkZFRhZygpOwogICAgICB9IGVsc2UgaWYgKHRoaXMucmVtb3ZlT25EZWxldGUgJiYgKGtleUNvZGUgPT09IENPREVfQkFDS1NQQUNFIHx8IGtleUNvZGUgPT09IENPREVfREVMRVRFKSAmJiB2YWx1ZSA9PT0gJycpIHsKICAgICAgICAvLyBSZW1vdmUgdGhlIGxhc3QgdGFnIGlmIHRoZSB1c2VyIHByZXNzZWQgYmFja3NwYWNlL2RlbGV0ZSBhbmQgdGhlIGlucHV0IGlzIGVtcHR5CiAgICAgICAgc3RvcEV2ZW50KGV2ZW50LCB7CiAgICAgICAgICBwcm9wYWdhdGlvbjogZmFsc2UKICAgICAgICB9KTsKICAgICAgICB0aGlzLnRhZ3MgPSB0aGlzLnRhZ3Muc2xpY2UoMCwgLTEpOwogICAgICB9CiAgICB9LAogICAgLy8gLS0tIFdyYXBwZXIgZXZlbnQgaGFuZGxlcnMgLS0tCiAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIGlnbm9yZUZvY3VzU2VsZWN0b3IgPSB0aGlzLmNvbXB1dGVJZ25vcmVJbnB1dEZvY3VzU2VsZWN0b3I7CiAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7CgogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgIWlzQWN0aXZlRWxlbWVudCh0YXJnZXQpICYmICghaWdub3JlRm9jdXNTZWxlY3RvciB8fCAhY2xvc2VzdChpZ25vcmVGb2N1c1NlbGVjdG9yLCB0YXJnZXQsIHRydWUpKSkgewogICAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzNS5mb2N1cygpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25Gb2N1c2luOiBmdW5jdGlvbiBvbkZvY3VzaW4oKSB7CiAgICAgIHRoaXMuaGFzRm9jdXMgPSB0cnVlOwogICAgfSwKICAgIG9uRm9jdXNvdXQ6IGZ1bmN0aW9uIG9uRm9jdXNvdXQoKSB7CiAgICAgIHRoaXMuaGFzRm9jdXMgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVBdXRvZm9jdXM6IGZ1bmN0aW9uIGhhbmRsZUF1dG9mb2N1cygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVxdWVzdEFGKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChfdGhpczYuYXV0b2ZvY3VzICYmICFfdGhpczYuZGlzYWJsZWQpIHsKICAgICAgICAgICAgX3RoaXM2LmZvY3VzKCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIC0tLSBQdWJsaWMgbWV0aG9kcyAtLS0KICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHsKICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgYXR0ZW1wdEZvY3VzKHRoaXMuZ2V0SW5wdXQoKSk7CiAgICAgIH0KICAgIH0sCiAgICBibHVyOiBmdW5jdGlvbiBibHVyKCkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHsKICAgICAgICBhdHRlbXB0Qmx1cih0aGlzLmdldElucHV0KCkpOwogICAgICB9CiAgICB9LAogICAgLy8gLS0tIFByaXZhdGUgbWV0aG9kcyAtLS0KICAgIHNwbGl0VGFnczogZnVuY3Rpb24gc3BsaXRUYWdzKG5ld1RhZykgewogICAgICAvLyBTcGxpdCB0aGUgaW5wdXQgaW50byBhbiBhcnJheSBvZiByYXcgdGFncwogICAgICBuZXdUYWcgPSB0b1N0cmluZyhuZXdUYWcpOwogICAgICB2YXIgc2VwYXJhdG9yUmUgPSB0aGlzLmNvbXB1dGVkU2VwYXJhdG9yUmVnRXhwOyAvLyBTcGxpdCB0aGUgdGFnKHMpIHZpYSB0aGUgb3B0aW9uYWwgc2VwYXJhdG9yCiAgICAgIC8vIE5vcm1hbGx5IG9ubHkgYSBzaW5nbGUgdGFnIGlzIHByb3ZpZGVkLCBidXQgY29weS9wYXN0ZQogICAgICAvLyBjYW4gZW50ZXIgbXVsdGlwbGUgdGFncyBpbiBhIHNpbmdsZSBvcGVyYXRpb24KCiAgICAgIHJldHVybiAoc2VwYXJhdG9yUmUgPyBuZXdUYWcuc3BsaXQoc2VwYXJhdG9yUmUpIDogW25ld1RhZ10pLm1hcCh0cmltKS5maWx0ZXIoaWRlbnRpdHkpOwogICAgfSwKICAgIHBhcnNlVGFnczogZnVuY3Rpb24gcGFyc2VUYWdzKG5ld1RhZykgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsgLy8gVGFrZXMgYG5ld1RhZ2AgdmFsdWUgYW5kIHBhcnNlcyBpdCBpbnRvIGB2YWxpZFRhZ3NgLAogICAgICAvLyBgaW52YWxpZFRhZ3NgLCBhbmQgZHVwbGljYXRlIHRhZ3MgYXMgYW4gb2JqZWN0CiAgICAgIC8vIFNwbGl0IHRoZSBpbnB1dCBpbnRvIHJhdyB0YWdzCgoKICAgICAgdmFyIHRhZ3MgPSB0aGlzLnNwbGl0VGFncyhuZXdUYWcpOyAvLyBCYXNlIHJlc3VsdHMKCiAgICAgIHZhciBwYXJzZWQgPSB7CiAgICAgICAgYWxsOiB0YWdzLAogICAgICAgIHZhbGlkOiBbXSwKICAgICAgICBpbnZhbGlkOiBbXSwKICAgICAgICBkdXBsaWNhdGU6IFtdCiAgICAgIH07IC8vIFBhcnNlIHRoZSB1bmlxdWUgdGFncwoKICAgICAgdGFncy5mb3JFYWNoKGZ1bmN0aW9uICh0YWcpIHsKICAgICAgICBpZiAoYXJyYXlJbmNsdWRlcyhfdGhpczcudGFncywgdGFnKSB8fCBhcnJheUluY2x1ZGVzKHBhcnNlZC52YWxpZCwgdGFnKSkgewogICAgICAgICAgLy8gVW5pcXVlIGR1cGxpY2F0ZSB0YWdzCiAgICAgICAgICBpZiAoIWFycmF5SW5jbHVkZXMocGFyc2VkLmR1cGxpY2F0ZSwgdGFnKSkgewogICAgICAgICAgICBwYXJzZWQuZHVwbGljYXRlLnB1c2godGFnKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgaWYgKF90aGlzNy52YWxpZGF0ZVRhZyh0YWcpKSB7CiAgICAgICAgICAvLyBXZSBvbmx5IGFkZCB1bmlxdWUvdmFsaWQgdGFncwogICAgICAgICAgcGFyc2VkLnZhbGlkLnB1c2godGFnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gVW5pcXVlIGludmFsaWQgdGFncwogICAgICAgICAgaWYgKCFhcnJheUluY2x1ZGVzKHBhcnNlZC5pbnZhbGlkLCB0YWcpKSB7CiAgICAgICAgICAgIHBhcnNlZC5pbnZhbGlkLnB1c2godGFnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcGFyc2VkOwogICAgfSwKICAgIHZhbGlkYXRlVGFnOiBmdW5jdGlvbiB2YWxpZGF0ZVRhZyh0YWcpIHsKICAgICAgdmFyIHRhZ1ZhbGlkYXRvciA9IHRoaXMudGFnVmFsaWRhdG9yOwogICAgICByZXR1cm4gaGFzUHJvcEZ1bmN0aW9uKHRhZ1ZhbGlkYXRvcikgPyB0YWdWYWxpZGF0b3IodGFnKSA6IHRydWU7CiAgICB9LAogICAgZ2V0SW5wdXQ6IGZ1bmN0aW9uIGdldElucHV0KCkgewogICAgICAvLyBSZXR1cm5zIHRoZSBpbnB1dCBlbGVtZW50IHJlZmVyZW5jZSAob3IgbnVsbCBpZiBub3QgZm91bmQpCiAgICAgIC8vIFdlIG5lZWQgdG8gZXNjYXBlIGBjb21wdXRlZElucHV0SWRgIHNpbmNlIGl0IGNhbiBiZSB1c2VyLXByb3ZpZGVkCiAgICAgIHJldHVybiBzZWxlY3QoIiMiLmNvbmNhdChjc3NFc2NhcGUodGhpcy5jb21wdXRlZElucHV0SWQpKSwgdGhpcy4kZWwpOwogICAgfSwKICAgIC8vIERlZmF1bHQgVXNlciBJbnRlcmZhY2UgcmVuZGVyCiAgICBkZWZhdWx0UmVuZGVyOiBmdW5jdGlvbiBkZWZhdWx0UmVuZGVyKF9yZWYpIHsKICAgICAgdmFyIGFkZEJ1dHRvblRleHQgPSBfcmVmLmFkZEJ1dHRvblRleHQsCiAgICAgICAgICBhZGRCdXR0b25WYXJpYW50ID0gX3JlZi5hZGRCdXR0b25WYXJpYW50LAogICAgICAgICAgYWRkVGFnID0gX3JlZi5hZGRUYWcsCiAgICAgICAgICBkaXNhYmxlQWRkQnV0dG9uID0gX3JlZi5kaXNhYmxlQWRkQnV0dG9uLAogICAgICAgICAgZGlzYWJsZWQgPSBfcmVmLmRpc2FibGVkLAogICAgICAgICAgZHVwbGljYXRlVGFnVGV4dCA9IF9yZWYuZHVwbGljYXRlVGFnVGV4dCwKICAgICAgICAgIGlucHV0QXR0cnMgPSBfcmVmLmlucHV0QXR0cnMsCiAgICAgICAgICBpbnB1dENsYXNzID0gX3JlZi5pbnB1dENsYXNzLAogICAgICAgICAgaW5wdXRIYW5kbGVycyA9IF9yZWYuaW5wdXRIYW5kbGVycywKICAgICAgICAgIGlucHV0VHlwZSA9IF9yZWYuaW5wdXRUeXBlLAogICAgICAgICAgaW52YWxpZFRhZ1RleHQgPSBfcmVmLmludmFsaWRUYWdUZXh0LAogICAgICAgICAgaXNEdXBsaWNhdGUgPSBfcmVmLmlzRHVwbGljYXRlLAogICAgICAgICAgaXNJbnZhbGlkID0gX3JlZi5pc0ludmFsaWQsCiAgICAgICAgICBpc0xpbWl0UmVhY2hlZCA9IF9yZWYuaXNMaW1pdFJlYWNoZWQsCiAgICAgICAgICBsaW1pdFRhZ3NUZXh0ID0gX3JlZi5saW1pdFRhZ3NUZXh0LAogICAgICAgICAgbm9UYWdSZW1vdmUgPSBfcmVmLm5vVGFnUmVtb3ZlLAogICAgICAgICAgcGxhY2Vob2xkZXIgPSBfcmVmLnBsYWNlaG9sZGVyLAogICAgICAgICAgcmVtb3ZlVGFnID0gX3JlZi5yZW1vdmVUYWcsCiAgICAgICAgICB0YWdDbGFzcyA9IF9yZWYudGFnQ2xhc3MsCiAgICAgICAgICB0YWdQaWxscyA9IF9yZWYudGFnUGlsbHMsCiAgICAgICAgICB0YWdSZW1vdmVMYWJlbCA9IF9yZWYudGFnUmVtb3ZlTGFiZWwsCiAgICAgICAgICB0YWdWYXJpYW50ID0gX3JlZi50YWdWYXJpYW50LAogICAgICAgICAgdGFncyA9IF9yZWYudGFnczsKICAgICAgdmFyIGggPSB0aGlzLiRjcmVhdGVFbGVtZW50OyAvLyBNYWtlIHRoZSBsaXN0IG9mIHRhZ3MKCiAgICAgIHZhciAkdGFncyA9IHRhZ3MubWFwKGZ1bmN0aW9uICh0YWcpIHsKICAgICAgICB0YWcgPSB0b1N0cmluZyh0YWcpOwogICAgICAgIHJldHVybiBoKEJGb3JtVGFnLCB7CiAgICAgICAgICAiY2xhc3MiOiB0YWdDbGFzcywKICAgICAgICAgIC8vIGBCRm9ybVRhZ2Agd2lsbCBhdXRvIGdlbmVyYXRlIGFuIElECiAgICAgICAgICAvLyBzbyB3ZSBkbyBub3QgbmVlZCB0byBzZXQgdGhlIElEIHByb3AKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICAgICAgbm9SZW1vdmU6IG5vVGFnUmVtb3ZlLAogICAgICAgICAgICBwaWxsOiB0YWdQaWxscywKICAgICAgICAgICAgcmVtb3ZlTGFiZWw6IHRhZ1JlbW92ZUxhYmVsLAogICAgICAgICAgICB0YWc6ICdsaScsCiAgICAgICAgICAgIHRpdGxlOiB0YWcsCiAgICAgICAgICAgIHZhcmlhbnQ6IHRhZ1ZhcmlhbnQKICAgICAgICAgIH0sCiAgICAgICAgICBvbjogewogICAgICAgICAgICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVtb3ZlVGFnKHRhZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBrZXk6ICJ0YWdzXyIuY29uY2F0KHRhZykKICAgICAgICB9LCB0YWcpOwogICAgICB9KTsgLy8gRmVlZGJhY2sgSURzIGlmIG5lZWRlZAoKICAgICAgdmFyIGludmFsaWRGZWVkYmFja0lkID0gaW52YWxpZFRhZ1RleHQgJiYgaXNJbnZhbGlkID8gdGhpcy5zYWZlSWQoJ19faW52YWxpZF9mZWVkYmFja19fJykgOiBudWxsOwogICAgICB2YXIgZHVwbGljYXRlRmVlZGJhY2tJZCA9IGR1cGxpY2F0ZVRhZ1RleHQgJiYgaXNEdXBsaWNhdGUgPyB0aGlzLnNhZmVJZCgnX19kdXBsaWNhdGVfZmVlZGJhY2tfXycpIDogbnVsbDsKICAgICAgdmFyIGxpbWl0RmVlZGJhY2tJZCA9IGxpbWl0VGFnc1RleHQgJiYgaXNMaW1pdFJlYWNoZWQgPyB0aGlzLnNhZmVJZCgnX19saW1pdF9mZWVkYmFja19fJykgOiBudWxsOyAvLyBDb21wdXRlIHRoZSBgYXJpYS1kZXNjcmliZWRieWAgYXR0cmlidXRlIHZhbHVlCgogICAgICB2YXIgYXJpYURlc2NyaWJlZGJ5ID0gW2lucHV0QXR0cnNbJ2FyaWEtZGVzY3JpYmVkYnknXSwgaW52YWxpZEZlZWRiYWNrSWQsIGR1cGxpY2F0ZUZlZWRiYWNrSWQsIGxpbWl0RmVlZGJhY2tJZF0uZmlsdGVyKGlkZW50aXR5KS5qb2luKCcgJyk7IC8vIElucHV0CgogICAgICB2YXIgJGlucHV0ID0gaCgnaW5wdXQnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdiLWZvcm0tdGFncy1pbnB1dCB3LTEwMCBmbGV4LWdyb3ctMSBwLTAgbS0wIGJnLXRyYW5zcGFyZW50IGJvcmRlci0wJywKICAgICAgICAiY2xhc3MiOiBpbnB1dENsYXNzLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICBvdXRsaW5lOiAwLAogICAgICAgICAgbWluV2lkdGg6ICc1cmVtJwogICAgICAgIH0sCiAgICAgICAgYXR0cnM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgaW5wdXRBdHRycyksIHt9LCB7CiAgICAgICAgICAnYXJpYS1kZXNjcmliZWRieSc6IGFyaWFEZXNjcmliZWRieSB8fCBudWxsLAogICAgICAgICAgdHlwZTogaW5wdXRUeXBlLAogICAgICAgICAgcGxhY2Vob2xkZXI6IHBsYWNlaG9sZGVyIHx8IG51bGwKICAgICAgICB9KSwKICAgICAgICBkb21Qcm9wczogewogICAgICAgICAgdmFsdWU6IGlucHV0QXR0cnMudmFsdWUKICAgICAgICB9LAogICAgICAgIG9uOiBpbnB1dEhhbmRsZXJzLAogICAgICAgIC8vIERpcmVjdGl2ZSBuZWVkZWQgdG8gZ2V0IGBldmVudC50YXJnZXQuY29tcG9zaW5nYCBzZXQgKGlmIG5lZWRlZCkKICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgbmFtZTogJ21vZGVsJywKICAgICAgICAgIHZhbHVlOiBpbnB1dEF0dHJzLnZhbHVlCiAgICAgICAgfV0sCiAgICAgICAgcmVmOiAnaW5wdXQnCiAgICAgIH0pOyAvLyBBZGQgYnV0dG9uCgogICAgICB2YXIgJGJ1dHRvbiA9IGgoQkJ1dHRvbiwgewogICAgICAgIHN0YXRpY0NsYXNzOiAnYi1mb3JtLXRhZ3MtYnV0dG9uIHB5LTAnLAogICAgICAgICJjbGFzcyI6IHsKICAgICAgICAgIC8vIE9ubHkgc2hvdyB0aGUgYnV0dG9uIGlmIHRoZSB0YWcgY2FuIGJlIGFkZGVkCiAgICAgICAgICAvLyBXZSB1c2UgdGhlIGBpbnZpc2libGVgIGNsYXNzIGluc3RlYWQgb2Ygbm90IHJlbmRlcmluZwogICAgICAgICAgLy8gdGhlIGJ1dHRvbiwgc28gdGhhdCB3ZSBtYWludGFpbiBsYXlvdXQgdG8gcHJldmVudAogICAgICAgICAgLy8gdGhlIHVzZXIgaW5wdXQgZnJvbSBqdW1waW5nIGFyb3VuZAogICAgICAgICAgaW52aXNpYmxlOiBkaXNhYmxlQWRkQnV0dG9uCiAgICAgICAgfSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgZm9udFNpemU6ICc5MCUnCiAgICAgICAgfSwKICAgICAgICBwcm9wczogewogICAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVBZGRCdXR0b24gfHwgaXNMaW1pdFJlYWNoZWQsCiAgICAgICAgICB2YXJpYW50OiBhZGRCdXR0b25WYXJpYW50CiAgICAgICAgfSwKICAgICAgICBvbjogewogICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICByZXR1cm4gYWRkVGFnKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICByZWY6ICdidXR0b24nCiAgICAgIH0sIFt0aGlzLm5vcm1hbGl6ZVNsb3QoU0xPVF9OQU1FX0FERF9CVVRUT05fVEVYVCkgfHwgYWRkQnV0dG9uVGV4dF0pOyAvLyBJRCBvZiB0aGUgdGFncyArIGlucHV0IGA8dWw+YCBsaXN0CiAgICAgIC8vIE5vdGUgd2UgY291bGQgY29uY2F0ZW5hdGUgYGlucHV0QXR0cnMuaWRgIHdpdGggJ19fdGFnX2xpc3RfXycKICAgICAgLy8gYnV0IGBpbnB1dElkYCBtYXkgYmUgYG51bGxgIHVudGlsIGFmdGVyIG1vdW50CiAgICAgIC8vIGBzYWZlSWQoKWAgcmV0dXJucyBgbnVsbGAsIGlmIG5vIHVzZXIgcHJvdmlkZWQgSUQsCiAgICAgIC8vIHVudGlsIGFmdGVyIG1vdW50IHdoZW4gYSB1bmlxdWUgSUQgaXMgZ2VuZXJhdGVkCgogICAgICB2YXIgdGFnTGlzdElkID0gdGhpcy5zYWZlSWQoJ19fdGFnX2xpc3RfXycpOwogICAgICB2YXIgJGZpZWxkID0gaCgnbGknLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdiLWZyb20tdGFncy1maWVsZCBmbGV4LWdyb3ctMScsCiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIHJvbGU6ICdub25lJywKICAgICAgICAgICdhcmlhLWxpdmUnOiAnb2ZmJywKICAgICAgICAgICdhcmlhLWNvbnRyb2xzJzogdGFnTGlzdElkCiAgICAgICAgfSwKICAgICAgICBrZXk6ICd0YWdzX2ZpZWxkJwogICAgICB9LCBbaCgnZGl2JywgewogICAgICAgIHN0YXRpY0NsYXNzOiAnZC1mbGV4JywKICAgICAgICBhdHRyczogewogICAgICAgICAgcm9sZTogJ2dyb3VwJwogICAgICAgIH0KICAgICAgfSwgWyRpbnB1dCwgJGJ1dHRvbl0pXSk7IC8vIFdyYXAgaW4gYW4gdW5vcmRlcmVkIGxpc3QgZWxlbWVudCAod2UgdXNlIGEgbGlzdCBmb3IgYWNjZXNzaWJpbGl0eSkKCiAgICAgIHZhciAkdWwgPSBoKCd1bCcsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2ItZm9ybS10YWdzLWxpc3QgbGlzdC11bnN0eWxlZCBtYi0wIGQtZmxleCBmbGV4LXdyYXAgYWxpZ24taXRlbXMtY2VudGVyJywKICAgICAgICBhdHRyczogewogICAgICAgICAgaWQ6IHRhZ0xpc3RJZAogICAgICAgIH0sCiAgICAgICAga2V5OiAndGFnc19saXN0JwogICAgICB9LCBbJHRhZ3MsICRmaWVsZF0pOyAvLyBBc3NlbWJsZSB0aGUgZmVlZGJhY2sKCiAgICAgIHZhciAkZmVlZGJhY2sgPSBoKCk7CgogICAgICBpZiAoaW52YWxpZFRhZ1RleHQgfHwgZHVwbGljYXRlVGFnVGV4dCB8fCBsaW1pdFRhZ3NUZXh0KSB7CiAgICAgICAgLy8gQWRkIGFuIGFyaWEgbGl2ZSByZWdpb24gZm9yIHRoZSBpbnZhbGlkL2R1cGxpY2F0ZSB0YWcKICAgICAgICAvLyBtZXNzYWdlcyBpZiB0aGUgdXNlciBoYXMgbm90IGRpc2FibGVkIHRoZSBtZXNzYWdlcwogICAgICAgIHZhciBqb2luZXIgPSB0aGlzLmNvbXB1dGVkSm9pbmVyOyAvLyBJbnZhbGlkIHRhZyBmZWVkYmFjayBpZiBuZWVkZWQgKGVycm9yKQoKICAgICAgICB2YXIgJGludmFsaWQgPSBoKCk7CgogICAgICAgIGlmIChpbnZhbGlkRmVlZGJhY2tJZCkgewogICAgICAgICAgJGludmFsaWQgPSBoKEJGb3JtSW52YWxpZEZlZWRiYWNrLCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgaWQ6IGludmFsaWRGZWVkYmFja0lkLAogICAgICAgICAgICAgIGZvcmNlU2hvdzogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBrZXk6ICd0YWdzX2ludmFsaWRfZmVlZGJhY2snCiAgICAgICAgICB9LCBbdGhpcy5pbnZhbGlkVGFnVGV4dCwgJzogJywgdGhpcy5pbnZhbGlkVGFncy5qb2luKGpvaW5lcildKTsKICAgICAgICB9IC8vIER1cGxpY2F0ZSB0YWcgZmVlZGJhY2sgaWYgbmVlZGVkICh3YXJuaW5nLCBub3QgZXJyb3IpCgoKICAgICAgICB2YXIgJGR1cGxpY2F0ZSA9IGgoKTsKCiAgICAgICAgaWYgKGR1cGxpY2F0ZUZlZWRiYWNrSWQpIHsKICAgICAgICAgICRkdXBsaWNhdGUgPSBoKEJGb3JtVGV4dCwgewogICAgICAgICAgICBwcm9wczogewogICAgICAgICAgICAgIGlkOiBkdXBsaWNhdGVGZWVkYmFja0lkCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtleTogJ3RhZ3NfZHVwbGljYXRlX2ZlZWRiYWNrJwogICAgICAgICAgfSwgW3RoaXMuZHVwbGljYXRlVGFnVGV4dCwgJzogJywgdGhpcy5kdXBsaWNhdGVUYWdzLmpvaW4oam9pbmVyKV0pOwogICAgICAgIH0gLy8gTGltaXQgdGFncyBmZWVkYmFjayBpZiBuZWVkZWQgKHdhcm5pbmcsIG5vdCBlcnJvcikKCgogICAgICAgIHZhciAkbGltaXQgPSBoKCk7CgogICAgICAgIGlmIChsaW1pdEZlZWRiYWNrSWQpIHsKICAgICAgICAgICRsaW1pdCA9IGgoQkZvcm1UZXh0LCB7CiAgICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgICAgaWQ6IGxpbWl0RmVlZGJhY2tJZAogICAgICAgICAgICB9LAogICAgICAgICAgICBrZXk6ICd0YWdzX2xpbWl0X2ZlZWRiYWNrJwogICAgICAgICAgfSwgW2xpbWl0VGFnc1RleHRdKTsKICAgICAgICB9CgogICAgICAgICRmZWVkYmFjayA9IGgoJ2RpdicsIHsKICAgICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAgICdhcmlhLWxpdmUnOiAncG9saXRlJywKICAgICAgICAgICAgJ2FyaWEtYXRvbWljJzogJ3RydWUnCiAgICAgICAgICB9LAogICAgICAgICAga2V5OiAndGFnc19mZWVkYmFjaycKICAgICAgICB9LCBbJGludmFsaWQsICRkdXBsaWNhdGUsICRsaW1pdF0pOwogICAgICB9IC8vIFJldHVybiB0aGUgY29udGVudAoKCiAgICAgIHJldHVybiBbJHVsLCAkZmVlZGJhY2tdOwogICAgfQogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgdmFyIG5hbWUgPSB0aGlzLm5hbWUsCiAgICAgICAgZGlzYWJsZWQgPSB0aGlzLmRpc2FibGVkLAogICAgICAgIHJlcXVpcmVkID0gdGhpcy5yZXF1aXJlZCwKICAgICAgICBmb3JtID0gdGhpcy5mb3JtLAogICAgICAgIHRhZ3MgPSB0aGlzLnRhZ3MsCiAgICAgICAgY29tcHV0ZWRJbnB1dElkID0gdGhpcy5jb21wdXRlZElucHV0SWQsCiAgICAgICAgaGFzRm9jdXMgPSB0aGlzLmhhc0ZvY3VzLAogICAgICAgIG5vT3V0ZXJGb2N1cyA9IHRoaXMubm9PdXRlckZvY3VzOyAvLyBTY29wZWQgc2xvdCBwcm9wZXJ0aWVzCgogICAgdmFyIHNjb3BlID0gX29iamVjdFNwcmVhZCh7CiAgICAgIC8vIEFycmF5IG9mIHRhZ3MgKHNoYWxsb3cgY29weSB0byBwcmV2ZW50IG11dGF0aW9ucykKICAgICAgdGFnczogdGFncy5zbGljZSgpLAogICAgICAvLyA8aW5wdXQ+IHYtYmluZDppbnB1dEF0dHJzCiAgICAgIGlucHV0QXR0cnM6IHRoaXMuY29tcHV0ZWRJbnB1dEF0dHJzLAogICAgICAvLyBXZSBkb24ndCBpbmNsdWRlIHRoaXMgaW4gdGhlIGF0dHJzLCBhcyB1c2VycyBtYXkgd2FudCB0byBvdmVycmlkZSB0aGlzCiAgICAgIGlucHV0VHlwZTogdGhpcy5jb21wdXRlZElucHV0VHlwZSwKICAgICAgLy8gPGlucHV0PiB2LW9uOmlucHV0SGFuZGxlcnMKICAgICAgaW5wdXRIYW5kbGVyczogdGhpcy5jb21wdXRlZElucHV0SGFuZGxlcnMsCiAgICAgIC8vIE1ldGhvZHMKICAgICAgcmVtb3ZlVGFnOiB0aGlzLnJlbW92ZVRhZywKICAgICAgYWRkVGFnOiB0aGlzLmFkZFRhZywKICAgICAgcmVzZXQ6IHRoaXMucmVzZXQsCiAgICAgIC8vIDxpbnB1dD4gOmlkPSJpbnB1dElkIgogICAgICBpbnB1dElkOiBjb21wdXRlZElucHV0SWQsCiAgICAgIC8vIEludmFsaWQvRHVwbGljYXRlIHN0YXRlIGluZm9ybWF0aW9uCiAgICAgIGlzSW52YWxpZDogdGhpcy5oYXNJbnZhbGlkVGFncywKICAgICAgaW52YWxpZFRhZ3M6IHRoaXMuaW52YWxpZFRhZ3Muc2xpY2UoKSwKICAgICAgaXNEdXBsaWNhdGU6IHRoaXMuaGFzRHVwbGljYXRlVGFncywKICAgICAgZHVwbGljYXRlVGFnczogdGhpcy5kdXBsaWNhdGVUYWdzLnNsaWNlKCksCiAgICAgIGlzTGltaXRSZWFjaGVkOiB0aGlzLmlzTGltaXRSZWFjaGVkLAogICAgICAvLyBJZiB0aGUgJ0FkZCcgYnV0dG9uIHNob3VsZCBiZSBkaXNhYmxlZAogICAgICBkaXNhYmxlQWRkQnV0dG9uOiB0aGlzLmRpc2FibGVBZGRCdXR0b24KICAgIH0sIHBpY2sodGhpcy4kcHJvcHMsIFsnYWRkQnV0dG9uVGV4dCcsICdhZGRCdXR0b25WYXJpYW50JywgJ2Rpc2FibGVkJywgJ2R1cGxpY2F0ZVRhZ1RleHQnLCAnZm9ybScsICdpbnB1dENsYXNzJywgJ2ludmFsaWRUYWdUZXh0JywgJ2xpbWl0JywgJ2xpbWl0VGFnc1RleHQnLCAnbm9UYWdSZW1vdmUnLCAncGxhY2Vob2xkZXInLCAncmVxdWlyZWQnLCAnc2VwYXJhdG9yJywgJ3NpemUnLCAnc3RhdGUnLCAndGFnQ2xhc3MnLCAndGFnUGlsbHMnLCAndGFnUmVtb3ZlTGFiZWwnLCAndGFnVmFyaWFudCddKSk7IC8vIEdlbmVyYXRlIHRoZSB1c2VyIGludGVyZmFjZQoKCiAgICB2YXIgJGNvbnRlbnQgPSB0aGlzLm5vcm1hbGl6ZVNsb3QoU0xPVF9OQU1FX0RFRkFVTFQsIHNjb3BlKSB8fCB0aGlzLmRlZmF1bHRSZW5kZXIoc2NvcGUpOyAvLyBHZW5lcmF0ZSB0aGUgYGFyaWEtbGl2ZWAgcmVnaW9uIGZvciB0aGUgY3VycmVudCB2YWx1ZShzKQoKICAgIHZhciAkb3V0cHV0ID0gaCgnb3V0cHV0JywgewogICAgICBzdGF0aWNDbGFzczogJ3NyLW9ubHknLAogICAgICBhdHRyczogewogICAgICAgIGlkOiB0aGlzLnNhZmVJZCgnX19zZWxlY3RlZF90YWdzX18nKSwKICAgICAgICByb2xlOiAnc3RhdHVzJywKICAgICAgICAiZm9yIjogY29tcHV0ZWRJbnB1dElkLAogICAgICAgICdhcmlhLWxpdmUnOiBoYXNGb2N1cyA/ICdwb2xpdGUnIDogJ29mZicsCiAgICAgICAgJ2FyaWEtYXRvbWljJzogJ3RydWUnLAogICAgICAgICdhcmlhLXJlbGV2YW50JzogJ2FkZGl0aW9ucyB0ZXh0JwogICAgICB9CiAgICB9LCB0aGlzLnRhZ3Muam9pbignLCAnKSk7IC8vIFJlbW92ZWQgdGFnIGxpdmUgcmVnaW9uCgogICAgdmFyICRyZW1vdmVkID0gaCgnZGl2JywgewogICAgICBzdGF0aWNDbGFzczogJ3NyLW9ubHknLAogICAgICBhdHRyczogewogICAgICAgIGlkOiB0aGlzLnNhZmVJZCgnX19yZW1vdmVkX3RhZ3NfXycpLAogICAgICAgIHJvbGU6ICdzdGF0dXMnLAogICAgICAgICdhcmlhLWxpdmUnOiBoYXNGb2N1cyA/ICdhc3NlcnRpdmUnIDogJ29mZicsCiAgICAgICAgJ2FyaWEtYXRvbWljJzogJ3RydWUnCiAgICAgIH0KICAgIH0sIHRoaXMucmVtb3ZlZFRhZ3MubGVuZ3RoID4gMCA/ICIoIi5jb25jYXQodGhpcy50YWdSZW1vdmVkTGFiZWwsICIpICIpLmNvbmNhdCh0aGlzLnJlbW92ZWRUYWdzLmpvaW4oJywgJykpIDogJycpOyAvLyBBZGQgaGlkZGVuIGlucHV0cyBmb3IgZm9ybSBzdWJtaXNzaW9uCgogICAgdmFyICRoaWRkZW4gPSBoKCk7CgogICAgaWYgKG5hbWUgJiYgIWRpc2FibGVkKSB7CiAgICAgIC8vIFdlIGFkZCBoaWRkZW4gaW5wdXRzIGZvciBlYWNoIHRhZyBpZiBhIG5hbWUgaXMgcHJvdmlkZWQKICAgICAgLy8gV2hlbiB0aGVyZSBhcmUgY3VycmVudGx5IG5vIHRhZ3MsIGEgdmlzdWFsbHkgaGlkZGVuIGlucHV0CiAgICAgIC8vIHdpdGggZW1wdHkgdmFsdWUgaXMgcmVuZGVyZWQgZm9yIHByb3BlciByZXF1aXJlZCBoYW5kbGluZwogICAgICB2YXIgaGFzVGFncyA9IHRhZ3MubGVuZ3RoID4gMDsKICAgICAgJGhpZGRlbiA9IChoYXNUYWdzID8gdGFncyA6IFsnJ10pLm1hcChmdW5jdGlvbiAodGFnKSB7CiAgICAgICAgcmV0dXJuIGgoJ2lucHV0JywgewogICAgICAgICAgImNsYXNzIjogewogICAgICAgICAgICAnc3Itb25seSc6ICFoYXNUYWdzCiAgICAgICAgICB9LAogICAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICAgdHlwZTogaGFzVGFncyA/ICdoaWRkZW4nIDogJ3RleHQnLAogICAgICAgICAgICB2YWx1ZTogdGFnLAogICAgICAgICAgICByZXF1aXJlZDogcmVxdWlyZWQsCiAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgIGZvcm06IGZvcm0KICAgICAgICAgIH0sCiAgICAgICAgICBrZXk6ICJ0YWdfaW5wdXRfIi5jb25jYXQodGFnKQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0gLy8gUmV0dXJuIHRoZSByZW5kZXJlZCBvdXRwdXQKCgogICAgcmV0dXJuIGgoJ2RpdicsIHsKICAgICAgc3RhdGljQ2xhc3M6ICdiLWZvcm0tdGFncyBmb3JtLWNvbnRyb2wgaC1hdXRvJywKICAgICAgImNsYXNzIjogW3sKICAgICAgICBmb2N1czogaGFzRm9jdXMgJiYgIW5vT3V0ZXJGb2N1cyAmJiAhZGlzYWJsZWQsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkCiAgICAgIH0sIHRoaXMuc2l6ZUZvcm1DbGFzcywgdGhpcy5zdGF0ZUNsYXNzXSwKICAgICAgYXR0cnM6IHsKICAgICAgICBpZDogdGhpcy5zYWZlSWQoKSwKICAgICAgICByb2xlOiAnZ3JvdXAnLAogICAgICAgIHRhYmluZGV4OiBkaXNhYmxlZCB8fCBub091dGVyRm9jdXMgPyBudWxsIDogJy0xJywKICAgICAgICAnYXJpYS1kZXNjcmliZWRieSc6IHRoaXMuc2FmZUlkKCdfX3NlbGVjdGVkX3RhZ3NfXycpCiAgICAgIH0sCiAgICAgIG9uOiB7CiAgICAgICAgY2xpY2s6IHRoaXMub25DbGljaywKICAgICAgICBmb2N1c2luOiB0aGlzLm9uRm9jdXNpbiwKICAgICAgICBmb2N1c291dDogdGhpcy5vbkZvY3Vzb3V0CiAgICAgIH0KICAgIH0sIFskb3V0cHV0LCAkcmVtb3ZlZCwgJGNvbnRlbnQsICRoaWRkZW5dKTsKICB9Cn0pOw=="},{"version":3,"sources":["/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/form-tags/form-tags.js"],"names":["_watch","_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","arguments","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","obj","value","configurable","writable","Vue","NAME_FORM_TAGS","EVENT_NAME_TAG_STATE","EVENT_OPTIONS_PASSIVE","HOOK_EVENT_NAME_BEFORE_DESTROY","CODE_BACKSPACE","CODE_DELETE","CODE_ENTER","PROP_TYPE_ARRAY","PROP_TYPE_ARRAY_OBJECT_STRING","PROP_TYPE_ARRAY_STRING","PROP_TYPE_BOOLEAN","PROP_TYPE_FUNCTION","PROP_TYPE_NUMBER","PROP_TYPE_OBJECT","PROP_TYPE_STRING","RX_SPACES","SLOT_NAME_DEFAULT","SLOT_NAME_ADD_BUTTON_TEXT","arrayIncludes","concat","cssEscape","attemptBlur","attemptFocus","closest","isActiveElement","matches","requestAF","select","eventOn","eventOff","stopEvent","identity","isEvent","isNumber","isString","looseEqual","makeModelMixin","pick","sortKeys","hasPropFunction","makeProp","makePropsConfigurable","escapeRegExp","trim","trimLeft","formControlMixin","props","formControlProps","formSizeMixin","formSizeProps","formStateMixin","formStateProps","idMixin","idProps","normalizeSlotMixin","BButton","BFormInvalidFeedback","BFormText","BFormTag","_makeModelMixin","type","defaultValue","modelMixin","mixin","modelProps","MODEL_PROP_NAME","prop","MODEL_EVENT_NAME","event","TYPES","DEFAULT_INPUT_FOCUS_SELECTOR","join","escapeRegExpChars","str","replace","cleanTags","tags","map","tag","index","indexOf","processEventValue","cleanTagsState","all","valid","invalid","duplicate","addButtonText","addButtonVariant","addOnChange","duplicateTagText","ignoreInputFocusSelector","inputAttrs","inputClass","inputId","inputType","invalidTagText","limit","limitTagsText","noAddOnEnter","noOuterFocus","noTagRemove","placeholder","removeOnDelete","separator","tagClass","tagPills","tagRemoveLabel","tagRemovedLabel","tagValidator","tagVariant","BFormTags","extend","mixins","data","hasFocus","newTag","removedTags","tagsState","computed","computedInputId","safeId","computedInputType","computedInputAttrs","disabled","form","id","computedInputHandlers","input","onInputInput","change","onInputChange","keydown","onInputKeydown","reset","computedSeparator","computedSeparatorRegExp","RegExp","computedJoiner","joiner","charAt","computeIgnoreInputFocusSelector","disableAddButton","_this","splitTags","some","t","validateTag","duplicateTags","hasDuplicateTags","invalidTags","hasInvalidTags","isLimitReached","watch","newValue","oldValue","$emit","old","created","mounted","_this2","$form","$el","$on","methods","addTag","parsed","parseTags","getInput","invalidAndDuplicates","focus","removeTag","_this3","$nextTick","_this4","composing","separatorRe","keyCode","propagation","onClick","_this5","ignoreFocusSelector","onFocusin","onFocusout","handleAutofocus","_this6","autofocus","blur","split","_this7","defaultRender","_ref","inputHandlers","isDuplicate","isInvalid","h","$createElement","$tags","noRemove","pill","removeLabel","title","variant","on","remove","invalidFeedbackId","duplicateFeedbackId","limitFeedbackId","ariaDescribedby","$input","staticClass","style","outline","minWidth","attrs","domProps","directives","ref","$button","invisible","fontSize","click","normalizeSlot","tagListId","$field","role","$ul","$feedback","$invalid","forceShow","$duplicate","$limit","render","required","scope","$props","$content","$output","$removed","$hidden","hasTags","sizeFormClass","stateClass","tabindex","focusin","focusout"],"mappings":"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","sourcesContent":["var _watch;\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Tagged input form control\n// Based loosely on https://adamwathan.me/renderless-components-in-vuejs/\nimport { Vue } from '../../vue';\nimport { NAME_FORM_TAGS } from '../../constants/components';\nimport { EVENT_NAME_TAG_STATE, EVENT_OPTIONS_PASSIVE, HOOK_EVENT_NAME_BEFORE_DESTROY } from '../../constants/events';\nimport { CODE_BACKSPACE, CODE_DELETE, CODE_ENTER } from '../../constants/key-codes';\nimport { PROP_TYPE_ARRAY, PROP_TYPE_ARRAY_OBJECT_STRING, PROP_TYPE_ARRAY_STRING, PROP_TYPE_BOOLEAN, PROP_TYPE_FUNCTION, PROP_TYPE_NUMBER, PROP_TYPE_OBJECT, PROP_TYPE_STRING } from '../../constants/props';\nimport { RX_SPACES } from '../../constants/regex';\nimport { SLOT_NAME_DEFAULT, SLOT_NAME_ADD_BUTTON_TEXT } from '../../constants/slots';\nimport { arrayIncludes, concat } from '../../utils/array';\nimport { cssEscape } from '../../utils/css-escape';\nimport { attemptBlur, attemptFocus, closest, isActiveElement, matches, requestAF, select } from '../../utils/dom';\nimport { eventOn, eventOff, stopEvent } from '../../utils/events';\nimport { identity } from '../../utils/identity';\nimport { isEvent, isNumber, isString } from '../../utils/inspect';\nimport { looseEqual } from '../../utils/loose-equal';\nimport { makeModelMixin } from '../../utils/model';\nimport { pick, sortKeys } from '../../utils/object';\nimport { hasPropFunction, makeProp, makePropsConfigurable } from '../../utils/props';\nimport { escapeRegExp, toString, trim, trimLeft } from '../../utils/string';\nimport { formControlMixin, props as formControlProps } from '../../mixins/form-control';\nimport { formSizeMixin, props as formSizeProps } from '../../mixins/form-size';\nimport { formStateMixin, props as formStateProps } from '../../mixins/form-state';\nimport { idMixin, props as idProps } from '../../mixins/id';\nimport { normalizeSlotMixin } from '../../mixins/normalize-slot';\nimport { BButton } from '../button/button';\nimport { BFormInvalidFeedback } from '../form/form-invalid-feedback';\nimport { BFormText } from '../form/form-text';\nimport { BFormTag } from './form-tag'; // --- Constants ---\n\nvar _makeModelMixin = makeModelMixin('value', {\n  type: PROP_TYPE_ARRAY,\n  defaultValue: []\n}),\n    modelMixin = _makeModelMixin.mixin,\n    modelProps = _makeModelMixin.props,\n    MODEL_PROP_NAME = _makeModelMixin.prop,\n    MODEL_EVENT_NAME = _makeModelMixin.event; // Supported input types (for built in input)\n\n\nvar TYPES = ['text', 'email', 'tel', 'url', 'number']; // Default ignore input focus selector\n\nvar DEFAULT_INPUT_FOCUS_SELECTOR = ['.b-form-tag', 'button', 'input', 'select'].join(' '); // --- Helper methods ---\n// Escape special chars in string and replace\n// contiguous spaces with a whitespace match\n\nvar escapeRegExpChars = function escapeRegExpChars(str) {\n  return escapeRegExp(str).replace(RX_SPACES, '\\\\s');\n}; // Remove leading/trailing spaces from array of tags and remove duplicates\n\n\nvar cleanTags = function cleanTags(tags) {\n  return concat(tags).map(function (tag) {\n    return trim(toString(tag));\n  }).filter(function (tag, index, arr) {\n    return tag.length > 0 && arr.indexOf(tag) === index;\n  });\n}; // Processes an input/change event, normalizing string or event argument\n\n\nvar processEventValue = function processEventValue(event) {\n  return isString(event) ? event : isEvent(event) ? event.target.value || '' : '';\n}; // Returns a fresh empty `tagsState` object\n\n\nvar cleanTagsState = function cleanTagsState() {\n  return {\n    all: [],\n    valid: [],\n    invalid: [],\n    duplicate: []\n  };\n}; // --- Props ---\n\n\nvar props = makePropsConfigurable(sortKeys(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread(_objectSpread({}, idProps), modelProps), formControlProps), formSizeProps), formStateProps), {}, {\n  addButtonText: makeProp(PROP_TYPE_STRING, 'Add'),\n  addButtonVariant: makeProp(PROP_TYPE_STRING, 'outline-secondary'),\n  // Enable change event triggering tag addition\n  // Handy if using <select> as the input\n  addOnChange: makeProp(PROP_TYPE_BOOLEAN, false),\n  duplicateTagText: makeProp(PROP_TYPE_STRING, 'Duplicate tag(s)'),\n  // Disable the input focus behavior when clicking\n  // on element matching the selector (or selectors)\n  ignoreInputFocusSelector: makeProp(PROP_TYPE_ARRAY_STRING, DEFAULT_INPUT_FOCUS_SELECTOR),\n  // Additional attributes to add to the input element\n  inputAttrs: makeProp(PROP_TYPE_OBJECT, {}),\n  inputClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  inputId: makeProp(PROP_TYPE_STRING),\n  inputType: makeProp(PROP_TYPE_STRING, 'text', function (value) {\n    return arrayIncludes(TYPES, value);\n  }),\n  invalidTagText: makeProp(PROP_TYPE_STRING, 'Invalid tag(s)'),\n  limit: makeProp(PROP_TYPE_NUMBER),\n  limitTagsText: makeProp(PROP_TYPE_STRING, 'Tag limit reached'),\n  // Disable ENTER key from triggering tag addition\n  noAddOnEnter: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Disable the focus ring on the root element\n  noOuterFocus: makeProp(PROP_TYPE_BOOLEAN, false),\n  noTagRemove: makeProp(PROP_TYPE_BOOLEAN, false),\n  placeholder: makeProp(PROP_TYPE_STRING, 'Add tag...'),\n  // Enable deleting last tag in list when CODE_BACKSPACE is\n  // pressed and input is empty\n  removeOnDelete: makeProp(PROP_TYPE_BOOLEAN, false),\n  // Character (or characters) that trigger adding tags\n  separator: makeProp(PROP_TYPE_ARRAY_STRING),\n  tagClass: makeProp(PROP_TYPE_ARRAY_OBJECT_STRING),\n  tagPills: makeProp(PROP_TYPE_BOOLEAN, false),\n  tagRemoveLabel: makeProp(PROP_TYPE_STRING, 'Remove tag'),\n  tagRemovedLabel: makeProp(PROP_TYPE_STRING, 'Tag removed'),\n  tagValidator: makeProp(PROP_TYPE_FUNCTION),\n  tagVariant: makeProp(PROP_TYPE_STRING, 'secondary')\n})), NAME_FORM_TAGS); // --- Main component ---\n// @vue/component\n\nexport var BFormTags = /*#__PURE__*/Vue.extend({\n  name: NAME_FORM_TAGS,\n  mixins: [idMixin, modelMixin, formControlMixin, formSizeMixin, formStateMixin, normalizeSlotMixin],\n  props: props,\n  data: function data() {\n    return {\n      hasFocus: false,\n      newTag: '',\n      tags: [],\n      // Tags that were removed\n      removedTags: [],\n      // Populated when tags are parsed\n      tagsState: cleanTagsState()\n    };\n  },\n  computed: {\n    computedInputId: function computedInputId() {\n      return this.inputId || this.safeId('__input__');\n    },\n    computedInputType: function computedInputType() {\n      // We only allow certain types\n      return arrayIncludes(TYPES, this.inputType) ? this.inputType : 'text';\n    },\n    computedInputAttrs: function computedInputAttrs() {\n      var disabled = this.disabled,\n          form = this.form;\n      return _objectSpread(_objectSpread({}, this.inputAttrs), {}, {\n        // Must have attributes\n        id: this.computedInputId,\n        value: this.newTag,\n        disabled: disabled,\n        form: form\n      });\n    },\n    computedInputHandlers: function computedInputHandlers() {\n      return {\n        input: this.onInputInput,\n        change: this.onInputChange,\n        keydown: this.onInputKeydown,\n        reset: this.reset\n      };\n    },\n    computedSeparator: function computedSeparator() {\n      // Merge the array into a string\n      return concat(this.separator).filter(isString).filter(identity).join('');\n    },\n    computedSeparatorRegExp: function computedSeparatorRegExp() {\n      // We use a computed prop here to precompile the RegExp\n      // The RegExp is a character class RE in the form of `/[abc]+/`\n      // where a, b, and c are the valid separator characters\n      // -> `tags = str.split(/[abc]+/).filter(t => t)`\n      var separator = this.computedSeparator;\n      return separator ? new RegExp(\"[\".concat(escapeRegExpChars(separator), \"]+\")) : null;\n    },\n    computedJoiner: function computedJoiner() {\n      // When tag(s) are invalid or duplicate, we leave them\n      // in the input so that the user can see them\n      // If there are more than one tag in the input, we use the\n      // first separator character as the separator in the input\n      // We append a space if the first separator is not a space\n      var joiner = this.computedSeparator.charAt(0);\n      return joiner !== ' ' ? \"\".concat(joiner, \" \") : joiner;\n    },\n    computeIgnoreInputFocusSelector: function computeIgnoreInputFocusSelector() {\n      // Normalize to an single selector with selectors separated by `,`\n      return concat(this.ignoreInputFocusSelector).filter(identity).join(',').trim();\n    },\n    disableAddButton: function disableAddButton() {\n      var _this = this;\n\n      // If 'Add' button should be disabled\n      // If the input contains at least one tag that can\n      // be added, then the 'Add' button should be enabled\n      var newTag = trim(this.newTag);\n      return newTag === '' || !this.splitTags(newTag).some(function (t) {\n        return !arrayIncludes(_this.tags, t) && _this.validateTag(t);\n      });\n    },\n    duplicateTags: function duplicateTags() {\n      return this.tagsState.duplicate;\n    },\n    hasDuplicateTags: function hasDuplicateTags() {\n      return this.duplicateTags.length > 0;\n    },\n    invalidTags: function invalidTags() {\n      return this.tagsState.invalid;\n    },\n    hasInvalidTags: function hasInvalidTags() {\n      return this.invalidTags.length > 0;\n    },\n    isLimitReached: function isLimitReached() {\n      var limit = this.limit;\n      return isNumber(limit) && limit >= 0 && this.tags.length >= limit;\n    }\n  },\n  watch: (_watch = {}, _defineProperty(_watch, MODEL_PROP_NAME, function (newValue) {\n    this.tags = cleanTags(newValue);\n  }), _defineProperty(_watch, \"tags\", function tags(newValue, oldValue) {\n    // Update the `v-model` (if it differs from the value prop)\n    if (!looseEqual(newValue, this[MODEL_PROP_NAME])) {\n      this.$emit(MODEL_EVENT_NAME, newValue);\n    }\n\n    if (!looseEqual(newValue, oldValue)) {\n      newValue = concat(newValue).filter(identity);\n      oldValue = concat(oldValue).filter(identity);\n      this.removedTags = oldValue.filter(function (old) {\n        return !arrayIncludes(newValue, old);\n      });\n    }\n  }), _defineProperty(_watch, \"tagsState\", function tagsState(newValue, oldValue) {\n    // Emit a tag-state event when the `tagsState` object changes\n    if (!looseEqual(newValue, oldValue)) {\n      this.$emit(EVENT_NAME_TAG_STATE, newValue.valid, newValue.invalid, newValue.duplicate);\n    }\n  }), _watch),\n  created: function created() {\n    // We do this in created to make sure an input event emits\n    // if the cleaned tags are not equal to the value prop\n    this.tags = cleanTags(this[MODEL_PROP_NAME]);\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    // Listen for form reset events, to reset the tags input\n    var $form = closest('form', this.$el);\n\n    if ($form) {\n      eventOn($form, 'reset', this.reset, EVENT_OPTIONS_PASSIVE);\n      this.$on(HOOK_EVENT_NAME_BEFORE_DESTROY, function () {\n        eventOff($form, 'reset', _this2.reset, EVENT_OPTIONS_PASSIVE);\n      });\n    }\n  },\n  methods: {\n    addTag: function addTag(newTag) {\n      newTag = isString(newTag) ? newTag : this.newTag;\n      /* istanbul ignore next */\n\n      if (this.disabled || trim(newTag) === '' || this.isLimitReached) {\n        // Early exit\n        return;\n      }\n\n      var parsed = this.parseTags(newTag); // Add any new tags to the `tags` array, or if the\n      // array of `allTags` is empty, we clear the input\n\n      if (parsed.valid.length > 0 || parsed.all.length === 0) {\n        // Clear the user input element (and leave in any invalid/duplicate tag(s)\n\n        /* istanbul ignore if: full testing to be added later */\n        if (matches(this.getInput(), 'select')) {\n          // The following is needed to properly\n          // work with `<select>` elements\n          this.newTag = '';\n        } else {\n          var invalidAndDuplicates = [].concat(_toConsumableArray(parsed.invalid), _toConsumableArray(parsed.duplicate));\n          this.newTag = parsed.all.filter(function (tag) {\n            return arrayIncludes(invalidAndDuplicates, tag);\n          }).join(this.computedJoiner).concat(invalidAndDuplicates.length > 0 ? this.computedJoiner.charAt(0) : '');\n        }\n      }\n\n      if (parsed.valid.length > 0) {\n        // We add the new tags in one atomic operation\n        // to trigger reactivity once (instead of once per tag)\n        // We do this after we update the new tag input value\n        // `concat()` can be faster than array spread, when both args are arrays\n        this.tags = concat(this.tags, parsed.valid);\n      }\n\n      this.tagsState = parsed; // Attempt to re-focus the input (specifically for when using the Add\n      // button, as the button disappears after successfully adding a tag\n\n      this.focus();\n    },\n    removeTag: function removeTag(tag) {\n      var _this3 = this;\n\n      /* istanbul ignore next */\n      if (this.disabled) {\n        return;\n      } // TODO:\n      //   Add `onRemoveTag(tag)` user method, which if returns `false`\n      //   will prevent the tag from being removed (i.e. confirmation)\n      //   Or emit cancelable `BvEvent`\n\n\n      this.tags = this.tags.filter(function (t) {\n        return t !== tag;\n      }); // Return focus to the input (if possible)\n\n      this.$nextTick(function () {\n        _this3.focus();\n      });\n    },\n    reset: function reset() {\n      var _this4 = this;\n\n      this.newTag = '';\n      this.tags = [];\n      this.$nextTick(function () {\n        _this4.removedTags = [];\n        _this4.tagsState = cleanTagsState();\n      });\n    },\n    // --- Input element event handlers ---\n    onInputInput: function onInputInput(event) {\n      /* istanbul ignore next: hard to test composition events */\n      if (this.disabled || isEvent(event) && event.target.composing) {\n        // `event.target.composing` is set by Vue (`v-model` directive)\n        // https://github.com/vuejs/vue/blob/dev/src/platforms/web/runtime/directives/model.js\n        return;\n      }\n\n      var newTag = processEventValue(event);\n      var separatorRe = this.computedSeparatorRegExp;\n\n      if (this.newTag !== newTag) {\n        this.newTag = newTag;\n      } // We ignore leading whitespace for the following\n\n\n      newTag = trimLeft(newTag);\n\n      if (separatorRe && separatorRe.test(newTag.slice(-1))) {\n        // A trailing separator character was entered, so add the tag(s)\n        // Note: More than one tag on input event is possible via copy/paste\n        this.addTag();\n      } else {\n        // Validate (parse tags) on input event\n        this.tagsState = newTag === '' ? cleanTagsState() : this.parseTags(newTag);\n      }\n    },\n    onInputChange: function onInputChange(event) {\n      // Change is triggered on `<input>` blur, or `<select>` selected\n      // This event is opt-in\n      if (!this.disabled && this.addOnChange) {\n        var newTag = processEventValue(event);\n        /* istanbul ignore next */\n\n        if (this.newTag !== newTag) {\n          this.newTag = newTag;\n        }\n\n        this.addTag();\n      }\n    },\n    onInputKeydown: function onInputKeydown(event) {\n      // Early exit\n\n      /* istanbul ignore next */\n      if (this.disabled || !isEvent(event)) {\n        return;\n      }\n\n      var keyCode = event.keyCode;\n      var value = event.target.value || '';\n      /* istanbul ignore else: testing to be added later */\n\n      if (!this.noAddOnEnter && keyCode === CODE_ENTER) {\n        // Attempt to add the tag when user presses enter\n        stopEvent(event, {\n          propagation: false\n        });\n        this.addTag();\n      } else if (this.removeOnDelete && (keyCode === CODE_BACKSPACE || keyCode === CODE_DELETE) && value === '') {\n        // Remove the last tag if the user pressed backspace/delete and the input is empty\n        stopEvent(event, {\n          propagation: false\n        });\n        this.tags = this.tags.slice(0, -1);\n      }\n    },\n    // --- Wrapper event handlers ---\n    onClick: function onClick(event) {\n      var _this5 = this;\n\n      var ignoreFocusSelector = this.computeIgnoreInputFocusSelector;\n      var target = event.target;\n\n      if (!this.disabled && !isActiveElement(target) && (!ignoreFocusSelector || !closest(ignoreFocusSelector, target, true))) {\n        this.$nextTick(function () {\n          _this5.focus();\n        });\n      }\n    },\n    onFocusin: function onFocusin() {\n      this.hasFocus = true;\n    },\n    onFocusout: function onFocusout() {\n      this.hasFocus = false;\n    },\n    handleAutofocus: function handleAutofocus() {\n      var _this6 = this;\n\n      this.$nextTick(function () {\n        requestAF(function () {\n          if (_this6.autofocus && !_this6.disabled) {\n            _this6.focus();\n          }\n        });\n      });\n    },\n    // --- Public methods ---\n    focus: function focus() {\n      if (!this.disabled) {\n        attemptFocus(this.getInput());\n      }\n    },\n    blur: function blur() {\n      if (!this.disabled) {\n        attemptBlur(this.getInput());\n      }\n    },\n    // --- Private methods ---\n    splitTags: function splitTags(newTag) {\n      // Split the input into an array of raw tags\n      newTag = toString(newTag);\n      var separatorRe = this.computedSeparatorRegExp; // Split the tag(s) via the optional separator\n      // Normally only a single tag is provided, but copy/paste\n      // can enter multiple tags in a single operation\n\n      return (separatorRe ? newTag.split(separatorRe) : [newTag]).map(trim).filter(identity);\n    },\n    parseTags: function parseTags(newTag) {\n      var _this7 = this;\n\n      // Takes `newTag` value and parses it into `validTags`,\n      // `invalidTags`, and duplicate tags as an object\n      // Split the input into raw tags\n      var tags = this.splitTags(newTag); // Base results\n\n      var parsed = {\n        all: tags,\n        valid: [],\n        invalid: [],\n        duplicate: []\n      }; // Parse the unique tags\n\n      tags.forEach(function (tag) {\n        if (arrayIncludes(_this7.tags, tag) || arrayIncludes(parsed.valid, tag)) {\n          // Unique duplicate tags\n          if (!arrayIncludes(parsed.duplicate, tag)) {\n            parsed.duplicate.push(tag);\n          }\n        } else if (_this7.validateTag(tag)) {\n          // We only add unique/valid tags\n          parsed.valid.push(tag);\n        } else {\n          // Unique invalid tags\n          if (!arrayIncludes(parsed.invalid, tag)) {\n            parsed.invalid.push(tag);\n          }\n        }\n      });\n      return parsed;\n    },\n    validateTag: function validateTag(tag) {\n      var tagValidator = this.tagValidator;\n      return hasPropFunction(tagValidator) ? tagValidator(tag) : true;\n    },\n    getInput: function getInput() {\n      // Returns the input element reference (or null if not found)\n      // We need to escape `computedInputId` since it can be user-provided\n      return select(\"#\".concat(cssEscape(this.computedInputId)), this.$el);\n    },\n    // Default User Interface render\n    defaultRender: function defaultRender(_ref) {\n      var addButtonText = _ref.addButtonText,\n          addButtonVariant = _ref.addButtonVariant,\n          addTag = _ref.addTag,\n          disableAddButton = _ref.disableAddButton,\n          disabled = _ref.disabled,\n          duplicateTagText = _ref.duplicateTagText,\n          inputAttrs = _ref.inputAttrs,\n          inputClass = _ref.inputClass,\n          inputHandlers = _ref.inputHandlers,\n          inputType = _ref.inputType,\n          invalidTagText = _ref.invalidTagText,\n          isDuplicate = _ref.isDuplicate,\n          isInvalid = _ref.isInvalid,\n          isLimitReached = _ref.isLimitReached,\n          limitTagsText = _ref.limitTagsText,\n          noTagRemove = _ref.noTagRemove,\n          placeholder = _ref.placeholder,\n          removeTag = _ref.removeTag,\n          tagClass = _ref.tagClass,\n          tagPills = _ref.tagPills,\n          tagRemoveLabel = _ref.tagRemoveLabel,\n          tagVariant = _ref.tagVariant,\n          tags = _ref.tags;\n      var h = this.$createElement; // Make the list of tags\n\n      var $tags = tags.map(function (tag) {\n        tag = toString(tag);\n        return h(BFormTag, {\n          class: tagClass,\n          // `BFormTag` will auto generate an ID\n          // so we do not need to set the ID prop\n          props: {\n            disabled: disabled,\n            noRemove: noTagRemove,\n            pill: tagPills,\n            removeLabel: tagRemoveLabel,\n            tag: 'li',\n            title: tag,\n            variant: tagVariant\n          },\n          on: {\n            remove: function remove() {\n              return removeTag(tag);\n            }\n          },\n          key: \"tags_\".concat(tag)\n        }, tag);\n      }); // Feedback IDs if needed\n\n      var invalidFeedbackId = invalidTagText && isInvalid ? this.safeId('__invalid_feedback__') : null;\n      var duplicateFeedbackId = duplicateTagText && isDuplicate ? this.safeId('__duplicate_feedback__') : null;\n      var limitFeedbackId = limitTagsText && isLimitReached ? this.safeId('__limit_feedback__') : null; // Compute the `aria-describedby` attribute value\n\n      var ariaDescribedby = [inputAttrs['aria-describedby'], invalidFeedbackId, duplicateFeedbackId, limitFeedbackId].filter(identity).join(' '); // Input\n\n      var $input = h('input', {\n        staticClass: 'b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0',\n        class: inputClass,\n        style: {\n          outline: 0,\n          minWidth: '5rem'\n        },\n        attrs: _objectSpread(_objectSpread({}, inputAttrs), {}, {\n          'aria-describedby': ariaDescribedby || null,\n          type: inputType,\n          placeholder: placeholder || null\n        }),\n        domProps: {\n          value: inputAttrs.value\n        },\n        on: inputHandlers,\n        // Directive needed to get `event.target.composing` set (if needed)\n        directives: [{\n          name: 'model',\n          value: inputAttrs.value\n        }],\n        ref: 'input'\n      }); // Add button\n\n      var $button = h(BButton, {\n        staticClass: 'b-form-tags-button py-0',\n        class: {\n          // Only show the button if the tag can be added\n          // We use the `invisible` class instead of not rendering\n          // the button, so that we maintain layout to prevent\n          // the user input from jumping around\n          invisible: disableAddButton\n        },\n        style: {\n          fontSize: '90%'\n        },\n        props: {\n          disabled: disableAddButton || isLimitReached,\n          variant: addButtonVariant\n        },\n        on: {\n          click: function click() {\n            return addTag();\n          }\n        },\n        ref: 'button'\n      }, [this.normalizeSlot(SLOT_NAME_ADD_BUTTON_TEXT) || addButtonText]); // ID of the tags + input `<ul>` list\n      // Note we could concatenate `inputAttrs.id` with '__tag_list__'\n      // but `inputId` may be `null` until after mount\n      // `safeId()` returns `null`, if no user provided ID,\n      // until after mount when a unique ID is generated\n\n      var tagListId = this.safeId('__tag_list__');\n      var $field = h('li', {\n        staticClass: 'b-from-tags-field flex-grow-1',\n        attrs: {\n          role: 'none',\n          'aria-live': 'off',\n          'aria-controls': tagListId\n        },\n        key: 'tags_field'\n      }, [h('div', {\n        staticClass: 'd-flex',\n        attrs: {\n          role: 'group'\n        }\n      }, [$input, $button])]); // Wrap in an unordered list element (we use a list for accessibility)\n\n      var $ul = h('ul', {\n        staticClass: 'b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center',\n        attrs: {\n          id: tagListId\n        },\n        key: 'tags_list'\n      }, [$tags, $field]); // Assemble the feedback\n\n      var $feedback = h();\n\n      if (invalidTagText || duplicateTagText || limitTagsText) {\n        // Add an aria live region for the invalid/duplicate tag\n        // messages if the user has not disabled the messages\n        var joiner = this.computedJoiner; // Invalid tag feedback if needed (error)\n\n        var $invalid = h();\n\n        if (invalidFeedbackId) {\n          $invalid = h(BFormInvalidFeedback, {\n            props: {\n              id: invalidFeedbackId,\n              forceShow: true\n            },\n            key: 'tags_invalid_feedback'\n          }, [this.invalidTagText, ': ', this.invalidTags.join(joiner)]);\n        } // Duplicate tag feedback if needed (warning, not error)\n\n\n        var $duplicate = h();\n\n        if (duplicateFeedbackId) {\n          $duplicate = h(BFormText, {\n            props: {\n              id: duplicateFeedbackId\n            },\n            key: 'tags_duplicate_feedback'\n          }, [this.duplicateTagText, ': ', this.duplicateTags.join(joiner)]);\n        } // Limit tags feedback if needed (warning, not error)\n\n\n        var $limit = h();\n\n        if (limitFeedbackId) {\n          $limit = h(BFormText, {\n            props: {\n              id: limitFeedbackId\n            },\n            key: 'tags_limit_feedback'\n          }, [limitTagsText]);\n        }\n\n        $feedback = h('div', {\n          attrs: {\n            'aria-live': 'polite',\n            'aria-atomic': 'true'\n          },\n          key: 'tags_feedback'\n        }, [$invalid, $duplicate, $limit]);\n      } // Return the content\n\n\n      return [$ul, $feedback];\n    }\n  },\n  render: function render(h) {\n    var name = this.name,\n        disabled = this.disabled,\n        required = this.required,\n        form = this.form,\n        tags = this.tags,\n        computedInputId = this.computedInputId,\n        hasFocus = this.hasFocus,\n        noOuterFocus = this.noOuterFocus; // Scoped slot properties\n\n    var scope = _objectSpread({\n      // Array of tags (shallow copy to prevent mutations)\n      tags: tags.slice(),\n      // <input> v-bind:inputAttrs\n      inputAttrs: this.computedInputAttrs,\n      // We don't include this in the attrs, as users may want to override this\n      inputType: this.computedInputType,\n      // <input> v-on:inputHandlers\n      inputHandlers: this.computedInputHandlers,\n      // Methods\n      removeTag: this.removeTag,\n      addTag: this.addTag,\n      reset: this.reset,\n      // <input> :id=\"inputId\"\n      inputId: computedInputId,\n      // Invalid/Duplicate state information\n      isInvalid: this.hasInvalidTags,\n      invalidTags: this.invalidTags.slice(),\n      isDuplicate: this.hasDuplicateTags,\n      duplicateTags: this.duplicateTags.slice(),\n      isLimitReached: this.isLimitReached,\n      // If the 'Add' button should be disabled\n      disableAddButton: this.disableAddButton\n    }, pick(this.$props, ['addButtonText', 'addButtonVariant', 'disabled', 'duplicateTagText', 'form', 'inputClass', 'invalidTagText', 'limit', 'limitTagsText', 'noTagRemove', 'placeholder', 'required', 'separator', 'size', 'state', 'tagClass', 'tagPills', 'tagRemoveLabel', 'tagVariant'])); // Generate the user interface\n\n\n    var $content = this.normalizeSlot(SLOT_NAME_DEFAULT, scope) || this.defaultRender(scope); // Generate the `aria-live` region for the current value(s)\n\n    var $output = h('output', {\n      staticClass: 'sr-only',\n      attrs: {\n        id: this.safeId('__selected_tags__'),\n        role: 'status',\n        for: computedInputId,\n        'aria-live': hasFocus ? 'polite' : 'off',\n        'aria-atomic': 'true',\n        'aria-relevant': 'additions text'\n      }\n    }, this.tags.join(', ')); // Removed tag live region\n\n    var $removed = h('div', {\n      staticClass: 'sr-only',\n      attrs: {\n        id: this.safeId('__removed_tags__'),\n        role: 'status',\n        'aria-live': hasFocus ? 'assertive' : 'off',\n        'aria-atomic': 'true'\n      }\n    }, this.removedTags.length > 0 ? \"(\".concat(this.tagRemovedLabel, \") \").concat(this.removedTags.join(', ')) : ''); // Add hidden inputs for form submission\n\n    var $hidden = h();\n\n    if (name && !disabled) {\n      // We add hidden inputs for each tag if a name is provided\n      // When there are currently no tags, a visually hidden input\n      // with empty value is rendered for proper required handling\n      var hasTags = tags.length > 0;\n      $hidden = (hasTags ? tags : ['']).map(function (tag) {\n        return h('input', {\n          class: {\n            'sr-only': !hasTags\n          },\n          attrs: {\n            type: hasTags ? 'hidden' : 'text',\n            value: tag,\n            required: required,\n            name: name,\n            form: form\n          },\n          key: \"tag_input_\".concat(tag)\n        });\n      });\n    } // Return the rendered output\n\n\n    return h('div', {\n      staticClass: 'b-form-tags form-control h-auto',\n      class: [{\n        focus: hasFocus && !noOuterFocus && !disabled,\n        disabled: disabled\n      }, this.sizeFormClass, this.stateClass],\n      attrs: {\n        id: this.safeId(),\n        role: 'group',\n        tabindex: disabled || noOuterFocus ? null : '-1',\n        'aria-describedby': this.safeId('__selected_tags__')\n      },\n      on: {\n        click: this.onClick,\n        focusin: this.onFocusin,\n        focusout: this.onFocusout\n      }\n    }, [$output, $removed, $content, $hidden]);\n  }\n});"]}]}