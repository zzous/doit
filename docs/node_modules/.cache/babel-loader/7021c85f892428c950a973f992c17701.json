{"remainingRequest":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js!/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js!/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/tabs/tabs.js","dependencies":[{"path":"/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/tabs/tabs.js","mtime":1610263603568},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/cache-loader/dist/cjs.js","mtime":1582363961748},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js","mtime":1582363962038},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js","mtime":1585275399303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJldmVyc2UiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydGllcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5kZWZpbmUtcHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5saW5rIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNtYWxsIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Cgp2YXIgX3dhdGNoOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgppbXBvcnQgeyBDT01QT05FTlRfVUlEX0tFWSwgVnVlIH0gZnJvbSAnLi4vLi4vdnVlJzsKaW1wb3J0IHsgTkFNRV9UQUJTLCBOQU1FX1RBQl9CVVRUT05fSEVMUEVSIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2NvbXBvbmVudHMnOwppbXBvcnQgeyBJU19CUk9XU0VSIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2Vudic7CmltcG9ydCB7IEVWRU5UX05BTUVfQUNUSVZBVEVfVEFCLCBFVkVOVF9OQU1FX0NIQU5HRUQsIEVWRU5UX05BTUVfQ0xJQ0ssIEVWRU5UX05BTUVfRklSU1QsIEVWRU5UX05BTUVfTEFTVCwgRVZFTlRfTkFNRV9ORVhULCBFVkVOVF9OQU1FX1BSRVYgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvZXZlbnRzJzsKaW1wb3J0IHsgQ09ERV9ET1dOLCBDT0RFX0VORCwgQ09ERV9IT01FLCBDT0RFX0xFRlQsIENPREVfUklHSFQsIENPREVfU1BBQ0UsIENPREVfVVAgfSBmcm9tICcuLi8uLi9jb25zdGFudHMva2V5LWNvZGVzJzsKaW1wb3J0IHsgUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcsIFBST1BfVFlQRV9CT09MRUFOLCBQUk9QX1RZUEVfTlVNQkVSLCBQUk9QX1RZUEVfU1RSSU5HIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL3Byb3BzJzsKaW1wb3J0IHsgU0xPVF9OQU1FX0VNUFRZLCBTTE9UX05BTUVfVEFCU19FTkQsIFNMT1RfTkFNRV9UQUJTX1NUQVJULCBTTE9UX05BTUVfVElUTEUgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvc2xvdHMnOwppbXBvcnQgeyBhcnJheUluY2x1ZGVzIH0gZnJvbSAnLi4vLi4vdXRpbHMvYXJyYXknOwppbXBvcnQgeyBCdkV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvYnYtZXZlbnQuY2xhc3MnOwppbXBvcnQgeyBhdHRlbXB0Rm9jdXMsIHNlbGVjdEFsbCwgcmVxdWVzdEFGIH0gZnJvbSAnLi4vLi4vdXRpbHMvZG9tJzsKaW1wb3J0IHsgc3RvcEV2ZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvZXZlbnRzJzsKaW1wb3J0IHsgaWRlbnRpdHkgfSBmcm9tICcuLi8uLi91dGlscy9pZGVudGl0eSc7CmltcG9ydCB7IGlzRXZlbnQgfSBmcm9tICcuLi8uLi91dGlscy9pbnNwZWN0JzsKaW1wb3J0IHsgbG9vc2VFcXVhbCB9IGZyb20gJy4uLy4uL3V0aWxzL2xvb3NlLWVxdWFsJzsKaW1wb3J0IHsgbWF0aE1heCB9IGZyb20gJy4uLy4uL3V0aWxzL21hdGgnOwppbXBvcnQgeyBtYWtlTW9kZWxNaXhpbiB9IGZyb20gJy4uLy4uL3V0aWxzL21vZGVsJzsKaW1wb3J0IHsgdG9JbnRlZ2VyIH0gZnJvbSAnLi4vLi4vdXRpbHMvbnVtYmVyJzsKaW1wb3J0IHsgb21pdCwgc29ydEtleXMgfSBmcm9tICcuLi8uLi91dGlscy9vYmplY3QnOwppbXBvcnQgeyBvYnNlcnZlRG9tIH0gZnJvbSAnLi4vLi4vdXRpbHMvb2JzZXJ2ZS1kb20nOwppbXBvcnQgeyBtYWtlUHJvcCwgbWFrZVByb3BzQ29uZmlndXJhYmxlIH0gZnJvbSAnLi4vLi4vdXRpbHMvcHJvcHMnOwppbXBvcnQgeyBzdGFibGVTb3J0IH0gZnJvbSAnLi4vLi4vdXRpbHMvc3RhYmxlLXNvcnQnOwppbXBvcnQgeyBpZE1peGluLCBwcm9wcyBhcyBpZFByb3BzIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2lkJzsKaW1wb3J0IHsgbm9ybWFsaXplU2xvdE1peGluIH0gZnJvbSAnLi4vLi4vbWl4aW5zL25vcm1hbGl6ZS1zbG90JzsKaW1wb3J0IHsgQkxpbmsgfSBmcm9tICcuLi9saW5rL2xpbmsnOwppbXBvcnQgeyBCTmF2LCBwcm9wcyBhcyBCTmF2UHJvcHMgfSBmcm9tICcuLi9uYXYvbmF2JzsgLy8gLS0tIENvbnN0YW50cyAtLS0KCnZhciBfbWFrZU1vZGVsTWl4aW4gPSBtYWtlTW9kZWxNaXhpbigndmFsdWUnLCB7CiAgdHlwZTogUFJPUF9UWVBFX05VTUJFUgp9KSwKICAgIG1vZGVsTWl4aW4gPSBfbWFrZU1vZGVsTWl4aW4ubWl4aW4sCiAgICBtb2RlbFByb3BzID0gX21ha2VNb2RlbE1peGluLnByb3BzLAogICAgTU9ERUxfUFJPUF9OQU1FID0gX21ha2VNb2RlbE1peGluLnByb3AsCiAgICBNT0RFTF9FVkVOVF9OQU1FID0gX21ha2VNb2RlbE1peGluLmV2ZW50OyAvLyAtLS0gSGVscGVyIG1ldGhvZHMgLS0tCi8vIEZpbHRlciBmdW5jdGlvbiB0byBmaWx0ZXIgb3V0IGRpc2FibGVkIHRhYnMKCgp2YXIgbm90RGlzYWJsZWQgPSBmdW5jdGlvbiBub3REaXNhYmxlZCh0YWIpIHsKICByZXR1cm4gIXRhYi5kaXNhYmxlZDsKfTsgLy8gLS0tIEhlbHBlciBjb21wb25lbnRzIC0tLQovLyBAdnVlL2NvbXBvbmVudAoKCnZhciBCVlRhYkJ1dHRvbiA9IC8qI19fUFVSRV9fKi9WdWUuZXh0ZW5kKHsKICBuYW1lOiBOQU1FX1RBQl9CVVRUT05fSEVMUEVSLAogIGluamVjdDogewogICAgYnZUYWJzOiB7CiAgICAgICJkZWZhdWx0IjoKICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICAgICAgZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwKICBwcm9wczogewogICAgY29udHJvbHM6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogICAgaWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcpLAogICAgbm9LZXlOYXY6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgICBwb3NJblNldDogbWFrZVByb3AoUFJPUF9UWVBFX05VTUJFUiksCiAgICBzZXRTaXplOiBtYWtlUHJvcChQUk9QX1RZUEVfTlVNQkVSKSwKICAgIC8vIFJlZmVyZW5jZSB0byB0aGUgY2hpbGQgPGItdGFiPiBpbnN0YW5jZQogICAgdGFiOiBtYWtlUHJvcCgpLAogICAgdGFiSW5kZXg6IG1ha2VQcm9wKFBST1BfVFlQRV9OVU1CRVIpCiAgfSwKICBtZXRob2RzOiB7CiAgICBmb2N1czogZnVuY3Rpb24gZm9jdXMoKSB7CiAgICAgIGF0dGVtcHRGb2N1cyh0aGlzLiRyZWZzLmxpbmspOwogICAgfSwKICAgIGhhbmRsZUV2dDogZnVuY3Rpb24gaGFuZGxlRXZ0KGV2ZW50KSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgIGlmICh0aGlzLnRhYi5kaXNhYmxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHR5cGUgPSBldmVudC50eXBlLAogICAgICAgICAga2V5Q29kZSA9IGV2ZW50LmtleUNvZGUsCiAgICAgICAgICBzaGlmdEtleSA9IGV2ZW50LnNoaWZ0S2V5OwoKICAgICAgaWYgKHR5cGUgPT09ICdjbGljaycpIHsKICAgICAgICBzdG9wRXZlbnQoZXZlbnQpOwogICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9DTElDSywgZXZlbnQpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdrZXlkb3duJyAmJiBrZXlDb2RlID09PSBDT0RFX1NQQUNFKSB7CiAgICAgICAgLy8gRm9yIEFSSUEgdGFicyB0aGUgU1BBQ0Uga2V5IHdpbGwgYWxzbyB0cmlnZ2VyIGEgY2xpY2svc2VsZWN0CiAgICAgICAgLy8gRXZlbiB3aXRoIGtleWJvYXJkIG5hdmlnYXRpb24gZGlzYWJsZWQsIFNQQUNFIHNob3VsZCAiY2xpY2siIHRoZSBidXR0b24KICAgICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9ib290c3RyYXAtdnVlL2Jvb3RzdHJhcC12dWUvaXNzdWVzLzQzMjMKICAgICAgICBzdG9wRXZlbnQoZXZlbnQpOwogICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9DTElDSywgZXZlbnQpOwogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdrZXlkb3duJyAmJiAhdGhpcy5ub0tleU5hdikgewogICAgICAgIC8vIEZvciBrZXlib2FyZCBuYXZpZ2F0aW9uCiAgICAgICAgaWYgKFtDT0RFX1VQLCBDT0RFX0xFRlQsIENPREVfSE9NRV0uaW5kZXhPZihrZXlDb2RlKSAhPT0gLTEpIHsKICAgICAgICAgIHN0b3BFdmVudChldmVudCk7CgogICAgICAgICAgaWYgKHNoaWZ0S2V5IHx8IGtleUNvZGUgPT09IENPREVfSE9NRSkgewogICAgICAgICAgICB0aGlzLiRlbWl0KEVWRU5UX05BTUVfRklSU1QsIGV2ZW50KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9QUkVWLCBldmVudCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChbQ09ERV9ET1dOLCBDT0RFX1JJR0hULCBDT0RFX0VORF0uaW5kZXhPZihrZXlDb2RlKSAhPT0gLTEpIHsKICAgICAgICAgIHN0b3BFdmVudChldmVudCk7CgogICAgICAgICAgaWYgKHNoaWZ0S2V5IHx8IGtleUNvZGUgPT09IENPREVfRU5EKSB7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9MQVNULCBldmVudCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRlbWl0KEVWRU5UX05BTUVfTkVYVCwgZXZlbnQpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgdmFyIGlkID0gdGhpcy5pZCwKICAgICAgICB0YWJJbmRleCA9IHRoaXMudGFiSW5kZXgsCiAgICAgICAgc2V0U2l6ZSA9IHRoaXMuc2V0U2l6ZSwKICAgICAgICBwb3NJblNldCA9IHRoaXMucG9zSW5TZXQsCiAgICAgICAgY29udHJvbHMgPSB0aGlzLmNvbnRyb2xzLAogICAgICAgIGhhbmRsZUV2dCA9IHRoaXMuaGFuZGxlRXZ0OwogICAgdmFyIF90aGlzJHRhYiA9IHRoaXMudGFiLAogICAgICAgIHRpdGxlID0gX3RoaXMkdGFiLnRpdGxlLAogICAgICAgIGxvY2FsQWN0aXZlID0gX3RoaXMkdGFiLmxvY2FsQWN0aXZlLAogICAgICAgIGRpc2FibGVkID0gX3RoaXMkdGFiLmRpc2FibGVkLAogICAgICAgIHRpdGxlSXRlbUNsYXNzID0gX3RoaXMkdGFiLnRpdGxlSXRlbUNsYXNzLAogICAgICAgIHRpdGxlTGlua0NsYXNzID0gX3RoaXMkdGFiLnRpdGxlTGlua0NsYXNzLAogICAgICAgIHRpdGxlTGlua0F0dHJpYnV0ZXMgPSBfdGhpcyR0YWIudGl0bGVMaW5rQXR0cmlidXRlczsKICAgIHZhciAkbGluayA9IGgoQkxpbmssIHsKICAgICAgc3RhdGljQ2xhc3M6ICduYXYtbGluaycsCiAgICAgICJjbGFzcyI6IFt7CiAgICAgICAgYWN0aXZlOiBsb2NhbEFjdGl2ZSAmJiAhZGlzYWJsZWQsCiAgICAgICAgZGlzYWJsZWQ6IGRpc2FibGVkCiAgICAgIH0sIHRpdGxlTGlua0NsYXNzLCAvLyBBcHBseSA8Yi10YWJzPiBgYWN0aXZlTmF2SXRlbUNsYXNzYCBzdHlsZXMgd2hlbiB0aGUgdGFiIGlzIGFjdGl2ZQogICAgICBsb2NhbEFjdGl2ZSA/IHRoaXMuYnZUYWJzLmFjdGl2ZU5hdkl0ZW1DbGFzcyA6IG51bGxdLAogICAgICBwcm9wczogewogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZAogICAgICB9LAogICAgICBhdHRyczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aXRsZUxpbmtBdHRyaWJ1dGVzKSwge30sIHsKICAgICAgICBpZDogaWQsCiAgICAgICAgcm9sZTogJ3RhYicsCiAgICAgICAgLy8gUm92aW5nIHRhYiBpbmRleCB3aGVuIGtleW5hdiBlbmFibGVkCiAgICAgICAgdGFiaW5kZXg6IHRhYkluZGV4LAogICAgICAgICdhcmlhLXNlbGVjdGVkJzogbG9jYWxBY3RpdmUgJiYgIWRpc2FibGVkID8gJ3RydWUnIDogJ2ZhbHNlJywKICAgICAgICAnYXJpYS1zZXRzaXplJzogc2V0U2l6ZSwKICAgICAgICAnYXJpYS1wb3NpbnNldCc6IHBvc0luU2V0LAogICAgICAgICdhcmlhLWNvbnRyb2xzJzogY29udHJvbHMKICAgICAgfSksCiAgICAgIG9uOiB7CiAgICAgICAgY2xpY2s6IGhhbmRsZUV2dCwKICAgICAgICBrZXlkb3duOiBoYW5kbGVFdnQKICAgICAgfSwKICAgICAgcmVmOiAnbGluaycKICAgIH0sIFt0aGlzLnRhYi5ub3JtYWxpemVTbG90KFNMT1RfTkFNRV9USVRMRSkgfHwgdGl0bGVdKTsKICAgIHJldHVybiBoKCdsaScsIHsKICAgICAgc3RhdGljQ2xhc3M6ICduYXYtaXRlbScsCiAgICAgICJjbGFzcyI6IFt0aXRsZUl0ZW1DbGFzc10sCiAgICAgIGF0dHJzOiB7CiAgICAgICAgcm9sZTogJ3ByZXNlbnRhdGlvbicKICAgICAgfQogICAgfSwgWyRsaW5rXSk7CiAgfQp9KTsgLy8gLS0tIFByb3BzIC0tLQoKdmFyIG5hdlByb3BzID0gb21pdChCTmF2UHJvcHMsIFsndGFicycsICdpc05hdkJhcicsICdjYXJkSGVhZGVyJ10pOwpleHBvcnQgdmFyIHByb3BzID0gbWFrZVByb3BzQ29uZmlndXJhYmxlKHNvcnRLZXlzKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlkUHJvcHMpLCBtb2RlbFByb3BzKSwgbmF2UHJvcHMpLCB7fSwgewogIC8vIE9ubHkgYXBwbGllZCB0byB0aGUgY3VycmVudGx5IGFjdGl2ZSBgPGItbmF2LWl0ZW0+YAogIGFjdGl2ZU5hdkl0ZW1DbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIC8vIE9ubHkgYXBwbGllZCB0byB0aGUgY3VycmVudGx5IGFjdGl2ZSBgPGItdGFiPmAKICAvLyBUaGlzIHByb3AgaXMgc25pZmZlZCBieSB0aGUgYDxiLXRhYj5gIGNoaWxkCiAgYWN0aXZlVGFiQ2xhc3M6IG1ha2VQcm9wKFBST1BfVFlQRV9BUlJBWV9PQkpFQ1RfU1RSSU5HKSwKICBjYXJkOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIGNvbnRlbnRDbGFzczogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX09CSkVDVF9TVFJJTkcpLAogIC8vIFN5bm9ueW0gZm9yICdib3R0b20nCiAgZW5kOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIFRoaXMgcHJvcCBpcyBzbmlmZmVkIGJ5IHRoZSBgPGItdGFiPmAgY2hpbGQKICBsYXp5OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG5hdkNsYXNzOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORyksCiAgbmF2V3JhcHBlckNsYXNzOiBtYWtlUHJvcChQUk9QX1RZUEVfQVJSQVlfT0JKRUNUX1NUUklORyksCiAgbm9GYWRlOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG5vS2V5TmF2OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIG5vTmF2U3R5bGU6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgdGFnOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnZGl2JykKfSkpLCBOQU1FX1RBQlMpOyAvLyAtLS0gTWFpbiBjb21wb25lbnQgLS0tCi8vIEB2dWUvY29tcG9uZW50CgpleHBvcnQgdmFyIEJUYWJzID0gLyojX19QVVJFX18qL1Z1ZS5leHRlbmQoewogIG5hbWU6IE5BTUVfVEFCUywKICBtaXhpbnM6IFtpZE1peGluLCBtb2RlbE1peGluLCBub3JtYWxpemVTbG90TWl4aW5dLAogIHByb3ZpZGU6IGZ1bmN0aW9uIHByb3ZpZGUoKSB7CiAgICByZXR1cm4gewogICAgICBidlRhYnM6IHRoaXMKICAgIH07CiAgfSwKICBwcm9wczogcHJvcHMsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIC8vIEluZGV4IG9mIGN1cnJlbnQgdGFiCiAgICAgIGN1cnJlbnRUYWI6IHRvSW50ZWdlcih0aGlzW01PREVMX1BST1BfTkFNRV0sIC0xKSwKICAgICAgLy8gQXJyYXkgb2YgZGlyZWN0IGNoaWxkIGA8Yi10YWI+YCBpbnN0YW5jZXMsIGluIERPTSBvcmRlcgogICAgICB0YWJzOiBbXSwKICAgICAgLy8gQXJyYXkgb2YgY2hpbGQgaW5zdGFuY2VzIHJlZ2lzdGVyZWQgKGZvciB0cmlnZ2VyaW5nIHJlYWN0aXZlIHVwZGF0ZXMpCiAgICAgIHJlZ2lzdGVyZWRUYWJzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmYWRlOiBmdW5jdGlvbiBmYWRlKCkgewogICAgICAvLyBUaGlzIGNvbXB1dGVkIHByb3AgaXMgc25pZmZlZCBieSB0aGUgdGFiIGNoaWxkCiAgICAgIHJldHVybiAhdGhpcy5ub0ZhZGU7CiAgICB9LAogICAgbG9jYWxOYXZDbGFzczogZnVuY3Rpb24gbG9jYWxOYXZDbGFzcygpIHsKICAgICAgdmFyIGNsYXNzZXMgPSBbXTsKCiAgICAgIGlmICh0aGlzLmNhcmQgJiYgdGhpcy52ZXJ0aWNhbCkgewogICAgICAgIGNsYXNzZXMucHVzaCgnY2FyZC1oZWFkZXInLCAnaC0xMDAnLCAnYm9yZGVyLWJvdHRvbS0wJywgJ3JvdW5kZWQtMCcpOwogICAgICB9CgogICAgICByZXR1cm4gW10uY29uY2F0KGNsYXNzZXMsIFt0aGlzLm5hdkNsYXNzXSk7CiAgICB9CiAgfSwKICB3YXRjaDogKF93YXRjaCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCBNT0RFTF9QUk9QX05BTUUsIGZ1bmN0aW9uIChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgbmV3VmFsdWUgPSB0b0ludGVnZXIobmV3VmFsdWUsIC0xKTsKICAgICAgb2xkVmFsdWUgPSB0b0ludGVnZXIob2xkVmFsdWUsIDApOwogICAgICB2YXIgJHRhYiA9IHRoaXMudGFic1tuZXdWYWx1ZV07CgogICAgICBpZiAoJHRhYiAmJiAhJHRhYi5kaXNhYmxlZCkgewogICAgICAgIHRoaXMuYWN0aXZhdGVUYWIoJHRhYik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gVHJ5IG5leHQgb3IgcHJldiB0YWJzCiAgICAgICAgaWYgKG5ld1ZhbHVlIDwgb2xkVmFsdWUpIHsKICAgICAgICAgIHRoaXMucHJldmlvdXNUYWIoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5uZXh0VGFiKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICJjdXJyZW50VGFiIiwgZnVuY3Rpb24gY3VycmVudFRhYihuZXdWYWx1ZSkgewogICAgdmFyIGluZGV4ID0gLTE7IC8vIEVuc3VyZSBvbmx5IG9uZSB0YWIgaXMgYWN0aXZlIGF0IG1vc3QKCiAgICB0aGlzLnRhYnMuZm9yRWFjaChmdW5jdGlvbiAoJHRhYiwgaSkgewogICAgICBpZiAoaSA9PT0gbmV3VmFsdWUgJiYgISR0YWIuZGlzYWJsZWQpIHsKICAgICAgICAkdGFiLmxvY2FsQWN0aXZlID0gdHJ1ZTsKICAgICAgICBpbmRleCA9IGk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHRhYi5sb2NhbEFjdGl2ZSA9IGZhbHNlOwogICAgICB9CiAgICB9KTsgLy8gVXBkYXRlIHRoZSB2LW1vZGVsCgogICAgdGhpcy4kZW1pdChNT0RFTF9FVkVOVF9OQU1FLCBpbmRleCk7CiAgfSksIF9kZWZpbmVQcm9wZXJ0eShfd2F0Y2gsICJ0YWJzIiwgZnVuY3Rpb24gdGFicyhuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7IC8vIFdlIHVzZSBgX3VpZGAgaW5zdGVhZCBvZiBgc2FmZUlkKClgLCBhcyB0aGUgbGF0ZXIgaXMgY2hhbmdlZCBpbiBhIGAkbmV4dFRpY2soKWAKICAgIC8vIGlmIG5vIGV4cGxpY2l0IElEIGlzIHByb3ZpZGVkLCBjYXVzaW5nIGR1cGxpY2F0ZSBlbWl0cwoKCiAgICBpZiAoIWxvb3NlRXF1YWwobmV3VmFsdWUubWFwKGZ1bmN0aW9uICgkdGFiKSB7CiAgICAgIHJldHVybiAkdGFiW0NPTVBPTkVOVF9VSURfS0VZXTsKICAgIH0pLCBvbGRWYWx1ZS5tYXAoZnVuY3Rpb24gKCR0YWIpIHsKICAgICAgcmV0dXJuICR0YWJbQ09NUE9ORU5UX1VJRF9LRVldOwogICAgfSkpKSB7CiAgICAgIC8vIEluIGEgYCRuZXh0VGljaygpYCB0byBlbnN1cmUgYGN1cnJlbnRUYWJgIGhhcyBiZWVuIHNldCBmaXJzdAogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gV2UgZW1pdCBzaGFsbG93IGNvcGllcyBvZiB0aGUgbmV3IGFuZCBvbGQgYXJyYXlzIG9mIHRhYnMsCiAgICAgICAgLy8gdG8gcHJldmVudCB1c2VycyBmcm9tIHBvdGVudGlhbGx5IG11dGF0aW5nIHRoZSBpbnRlcm5hbCBhcnJheXMKICAgICAgICBfdGhpcy4kZW1pdChFVkVOVF9OQU1FX0NIQU5HRUQsIG5ld1ZhbHVlLnNsaWNlKCksIG9sZFZhbHVlLnNsaWNlKCkpOwogICAgICB9KTsKICAgIH0KICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgInJlZ2lzdGVyZWRUYWJzIiwgZnVuY3Rpb24gcmVnaXN0ZXJlZFRhYnMoKSB7CiAgICB0aGlzLnVwZGF0ZVRhYnMoKTsKICB9KSwgX3dhdGNoKSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8gQ3JlYXRlIHByaXZhdGUgbm9uLXJlYWN0aXZlIHByb3BzCiAgICB0aGlzLiRfb2JzZXJ2ZXIgPSBudWxsOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuc2V0T2JzZXJ2ZXIodHJ1ZSk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5zZXRPYnNlcnZlcihmYWxzZSk7IC8vIEVuc3VyZSBubyByZWZlcmVuY2VzIHRvIGNoaWxkIGluc3RhbmNlcyBleGlzdAoKICAgIHRoaXMudGFicyA9IFtdOwogIH0sCiAgbWV0aG9kczogewogICAgcmVnaXN0ZXJUYWI6IGZ1bmN0aW9uIHJlZ2lzdGVyVGFiKCR0YWIpIHsKICAgICAgaWYgKCFhcnJheUluY2x1ZGVzKHRoaXMucmVnaXN0ZXJlZFRhYnMsICR0YWIpKSB7CiAgICAgICAgdGhpcy5yZWdpc3RlcmVkVGFicy5wdXNoKCR0YWIpOwogICAgICB9CiAgICB9LAogICAgdW5yZWdpc3RlclRhYjogZnVuY3Rpb24gdW5yZWdpc3RlclRhYigkdGFiKSB7CiAgICAgIHRoaXMucmVnaXN0ZXJlZFRhYnMgPSB0aGlzLnJlZ2lzdGVyZWRUYWJzLnNsaWNlKCkuZmlsdGVyKGZ1bmN0aW9uICgkdCkgewogICAgICAgIHJldHVybiAkdCAhPT0gJHRhYjsKICAgICAgfSk7CiAgICB9LAogICAgLy8gRE9NIG9ic2VydmVyIGlzIG5lZWRlZCB0byBkZXRlY3QgY2hhbmdlcyBpbiBvcmRlciBvZiB0YWJzCiAgICBzZXRPYnNlcnZlcjogZnVuY3Rpb24gc2V0T2JzZXJ2ZXIoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIG9uID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0cnVlOwogICAgICB0aGlzLiRfb2JzZXJ2ZXIgJiYgdGhpcy4kX29ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgdGhpcy4kX29ic2VydmVyID0gbnVsbDsKCiAgICAgIGlmIChvbikgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0OiBkaWZmaWN1bHQgdG8gdGVzdCBtdXRhdGlvbiBvYnNlcnZlciBpbiBKU0RPTSAqLwogICAgICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcigpIHsKICAgICAgICAgIF90aGlzMi4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgICByZXF1ZXN0QUYoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzMi51cGRhdGVUYWJzKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfTsgLy8gV2F0Y2ggZm9yIGNoYW5nZXMgdG8gYDxiLXRhYj5gIHN1YiBjb21wb25lbnRzCgoKICAgICAgICB0aGlzLiRfb2JzZXJ2ZXIgPSBvYnNlcnZlRG9tKHRoaXMuJHJlZnMuY29udGVudCwgaGFuZGxlciwgewogICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLAogICAgICAgICAgc3VidHJlZTogZmFsc2UsCiAgICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLAogICAgICAgICAgYXR0cmlidXRlRmlsdGVyOiBbJ2lkJ10KICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGdldFRhYnM6IGZ1bmN0aW9uIGdldFRhYnMoKSB7CiAgICAgIHZhciAkdGFicyA9IHRoaXMucmVnaXN0ZXJlZFRhYnMuZmlsdGVyKGZ1bmN0aW9uICgkdGFiKSB7CiAgICAgICAgcmV0dXJuICR0YWIuJGNoaWxkcmVuLmZpbHRlcihmdW5jdGlvbiAoJHQpIHsKICAgICAgICAgIHJldHVybiAkdC5faXNUYWI7CiAgICAgICAgfSkubGVuZ3RoID09PSAwOwogICAgICB9KTsgLy8gRE9NIE9yZGVyIG9mIFRhYnMKCiAgICAgIHZhciBvcmRlciA9IFtdOwogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogdG9vIGRpZmZpY3VsdCB0byB0ZXN0ICovCgogICAgICBpZiAoSVNfQlJPV1NFUiAmJiAkdGFicy5sZW5ndGggPiAwKSB7CiAgICAgICAgLy8gV2UgcmVseSBvbiB0aGUgRE9NIHdoZW4gbW91bnRlZCB0byBnZXQgdGhlICJ0cnVlIiBvcmRlciBvZiB0aGUgYDxiLXRhYj5gIGNoaWxkcmVuCiAgICAgICAgLy8gYHF1ZXJ5U2VsZWN0b3JBbGwoKWAgYWx3YXlzIHJldHVybnMgZWxlbWVudHMgaW4gZG9jdW1lbnQgb3JkZXIsIHJlZ2FyZGxlc3Mgb2YKICAgICAgICAvLyBvcmRlciBzcGVjaWZpZWQgaW4gdGhlIHNlbGVjdG9yCiAgICAgICAgdmFyIHNlbGVjdG9yID0gJHRhYnMubWFwKGZ1bmN0aW9uICgkdGFiKSB7CiAgICAgICAgICByZXR1cm4gIiMiLmNvbmNhdCgkdGFiLnNhZmVJZCgpKTsKICAgICAgICB9KS5qb2luKCcsICcpOwogICAgICAgIG9yZGVyID0gc2VsZWN0QWxsKHNlbGVjdG9yLCB0aGlzLiRlbCkubWFwKGZ1bmN0aW9uICgkZWwpIHsKICAgICAgICAgIHJldHVybiAkZWwuaWQ7CiAgICAgICAgfSkuZmlsdGVyKGlkZW50aXR5KTsKICAgICAgfSAvLyBTdGFibGUgc29ydCBrZWVwcyB0aGUgb3JpZ2luYWwgb3JkZXIgaWYgbm90IGZvdW5kIGluIHRoZSBgb3JkZXJgIGFycmF5LAogICAgICAvLyB3aGljaCB3aWxsIGJlIGFuIGVtcHR5IGFycmF5IGJlZm9yZSBtb3VudAoKCiAgICAgIHJldHVybiBzdGFibGVTb3J0KCR0YWJzLCBmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiBvcmRlci5pbmRleE9mKGEuc2FmZUlkKCkpIC0gb3JkZXIuaW5kZXhPZihiLnNhZmVJZCgpKTsKICAgICAgfSk7CiAgICB9LAogICAgdXBkYXRlVGFiczogZnVuY3Rpb24gdXBkYXRlVGFicygpIHsKICAgICAgdmFyICR0YWJzID0gdGhpcy5nZXRUYWJzKCk7IC8vIEZpbmQgbGFzdCBhY3RpdmUgbm9uLWRpc2FibGVkIHRhYiBpbiBjdXJyZW50IHRhYnMKICAgICAgLy8gV2UgdHJ1c3QgdGFiIHN0YXRlIG92ZXIgYGN1cnJlbnRUYWJgLCBpbiBjYXNlIHRhYnMgd2VyZSBhZGRlZC9yZW1vdmVkL3JlLW9yZGVyZWQKCiAgICAgIHZhciB0YWJJbmRleCA9ICR0YWJzLmluZGV4T2YoJHRhYnMuc2xpY2UoKS5yZXZlcnNlKCkuZmluZChmdW5jdGlvbiAoJHRhYikgewogICAgICAgIHJldHVybiAkdGFiLmxvY2FsQWN0aXZlICYmICEkdGFiLmRpc2FibGVkOwogICAgICB9KSk7IC8vIEVsc2UgdHJ5IHNldHRpbmcgdG8gYGN1cnJlbnRUYWJgCgogICAgICBpZiAodGFiSW5kZXggPCAwKSB7CiAgICAgICAgdmFyIGN1cnJlbnRUYWIgPSB0aGlzLmN1cnJlbnRUYWI7CgogICAgICAgIGlmIChjdXJyZW50VGFiID49ICR0YWJzLmxlbmd0aCkgewogICAgICAgICAgLy8gSGFuZGxlIGxhc3QgdGFiIGJlaW5nIHJlbW92ZWQsIHNvIGZpbmQgdGhlIGxhc3Qgbm9uLWRpc2FibGVkIHRhYgogICAgICAgICAgdGFiSW5kZXggPSAkdGFicy5pbmRleE9mKCR0YWJzLnNsaWNlKCkucmV2ZXJzZSgpLmZpbmQobm90RGlzYWJsZWQpKTsKICAgICAgICB9IGVsc2UgaWYgKCR0YWJzW2N1cnJlbnRUYWJdICYmICEkdGFic1tjdXJyZW50VGFiXS5kaXNhYmxlZCkgewogICAgICAgICAgLy8gQ3VycmVudCB0YWIgaXMgbm90IGRpc2FibGVkCiAgICAgICAgICB0YWJJbmRleCA9IGN1cnJlbnRUYWI7CiAgICAgICAgfQogICAgICB9IC8vIEVsc2UgZmluZCBmaXJzdCBub24tZGlzYWJsZWQgdGFiIGluIGN1cnJlbnQgdGFicwoKCiAgICAgIGlmICh0YWJJbmRleCA8IDApIHsKICAgICAgICB0YWJJbmRleCA9ICR0YWJzLmluZGV4T2YoJHRhYnMuZmluZChub3REaXNhYmxlZCkpOwogICAgICB9IC8vIEVuc3VyZSBvbmx5IG9uZSB0YWIgaXMgYWN0aXZlIGF0IGEgdGltZQoKCiAgICAgICR0YWJzLmZvckVhY2goZnVuY3Rpb24gKCR0YWIsIGluZGV4KSB7CiAgICAgICAgJHRhYi5sb2NhbEFjdGl2ZSA9IGluZGV4ID09PSB0YWJJbmRleDsKICAgICAgfSk7CiAgICAgIHRoaXMudGFicyA9ICR0YWJzOwogICAgICB0aGlzLmN1cnJlbnRUYWIgPSB0YWJJbmRleDsKICAgIH0sCiAgICAvLyBGaW5kIGEgYnV0dG9uIHRoYXQgY29udHJvbHMgYSB0YWIsIGdpdmVuIHRoZSB0YWIgcmVmZXJlbmNlCiAgICAvLyBSZXR1cm5zIHRoZSBidXR0b24gdm0gaW5zdGFuY2UKICAgIGdldEJ1dHRvbkZvclRhYjogZnVuY3Rpb24gZ2V0QnV0dG9uRm9yVGFiKCR0YWIpIHsKICAgICAgcmV0dXJuICh0aGlzLiRyZWZzLmJ1dHRvbnMgfHwgW10pLmZpbmQoZnVuY3Rpb24gKCRidG4pIHsKICAgICAgICByZXR1cm4gJGJ0bi50YWIgPT09ICR0YWI7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIEZvcmNlIGEgYnV0dG9uIHRvIHJlLXJlbmRlciBpdHMgY29udGVudCwgZ2l2ZW4gYSBgPGItdGFiPmAgaW5zdGFuY2UKICAgIC8vIENhbGxlZCBieSBgPGItdGFiPmAgb24gYHVwZGF0ZSgpYAogICAgdXBkYXRlQnV0dG9uOiBmdW5jdGlvbiB1cGRhdGVCdXR0b24oJHRhYikgewogICAgICB2YXIgJGJ1dHRvbiA9IHRoaXMuZ2V0QnV0dG9uRm9yVGFiKCR0YWIpOwoKICAgICAgaWYgKCRidXR0b24gJiYgJGJ1dHRvbi4kZm9yY2VVcGRhdGUpIHsKICAgICAgICAkYnV0dG9uLiRmb3JjZVVwZGF0ZSgpOwogICAgICB9CiAgICB9LAogICAgLy8gQWN0aXZhdGUgYSB0YWIgZ2l2ZW4gYSBgPGItdGFiPmAgaW5zdGFuY2UKICAgIC8vIEFsc28gYWNjZXNzZWQgYnkgYDxiLXRhYj5gCiAgICBhY3RpdmF0ZVRhYjogZnVuY3Rpb24gYWN0aXZhdGVUYWIoJHRhYikgewogICAgICB2YXIgY3VycmVudFRhYiA9IHRoaXMuY3VycmVudFRhYiwKICAgICAgICAgICR0YWJzID0gdGhpcy50YWJzOwogICAgICB2YXIgcmVzdWx0ID0gZmFsc2U7CgogICAgICBpZiAoJHRhYikgewogICAgICAgIHZhciBpbmRleCA9ICR0YWJzLmluZGV4T2YoJHRhYik7CgogICAgICAgIGlmIChpbmRleCAhPT0gY3VycmVudFRhYiAmJiBpbmRleCA+IC0xICYmICEkdGFiLmRpc2FibGVkKSB7CiAgICAgICAgICB2YXIgdGFiRXZlbnQgPSBuZXcgQnZFdmVudChFVkVOVF9OQU1FX0FDVElWQVRFX1RBQiwgewogICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlLAogICAgICAgICAgICB2dWVUYXJnZXQ6IHRoaXMsCiAgICAgICAgICAgIGNvbXBvbmVudElkOiB0aGlzLnNhZmVJZCgpCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuJGVtaXQodGFiRXZlbnQudHlwZSwgaW5kZXgsIGN1cnJlbnRUYWIsIHRhYkV2ZW50KTsKCiAgICAgICAgICBpZiAoIXRhYkV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHsKICAgICAgICAgICAgdGhpcy5jdXJyZW50VGFiID0gaW5kZXg7CiAgICAgICAgICAgIHJlc3VsdCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IC8vIENvdWxkbid0IHNldCB0YWIsIHNvIGVuc3VyZSB2LW1vZGVsIGlzIHVwIHRvIGRhdGUKCiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0OiBzaG91bGQgcmFyZWx5IGhhcHBlbiAqLwoKCiAgICAgIGlmICghcmVzdWx0ICYmIHRoaXNbTU9ERUxfUFJPUF9OQU1FXSAhPT0gY3VycmVudFRhYikgewogICAgICAgIHRoaXMuJGVtaXQoTU9ERUxfRVZFTlRfTkFNRSwgY3VycmVudFRhYik7CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAogICAgLy8gRGVhY3RpdmF0ZSBhIHRhYiBnaXZlbiBhIGA8Yi10YWI+YCBpbnN0YW5jZQogICAgLy8gQWNjZXNzZWQgYnkgYDxiLXRhYj5gCiAgICBkZWFjdGl2YXRlVGFiOiBmdW5jdGlvbiBkZWFjdGl2YXRlVGFiKCR0YWIpIHsKICAgICAgaWYgKCR0YWIpIHsKICAgICAgICAvLyBGaW5kIGZpcnN0IG5vbi1kaXNhYmxlZCB0YWIgdGhhdCBpc24ndCB0aGUgb25lIGJlaW5nIGRlYWN0aXZhdGVkCiAgICAgICAgLy8gSWYgbm8gdGFicyBhcmUgYXZhaWxhYmxlLCB0aGVuIGRvbid0IGRlYWN0aXZhdGUgY3VycmVudCB0YWIKICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmF0ZVRhYih0aGlzLnRhYnMuZmlsdGVyKGZ1bmN0aW9uICgkdCkgewogICAgICAgICAgcmV0dXJuICR0ICE9PSAkdGFiOwogICAgICAgIH0pLmZpbmQobm90RGlzYWJsZWQpKTsKICAgICAgfQogICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogc2hvdWxkIG5ldmVyL3JhcmVseSBoYXBwZW4gKi8KCgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgLy8gRm9jdXMgYSB0YWIgYnV0dG9uIGdpdmVuIGl0cyBgPGItdGFiPmAgaW5zdGFuY2UKICAgIGZvY3VzQnV0dG9uOiBmdW5jdGlvbiBmb2N1c0J1dHRvbigkdGFiKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOyAvLyBXcmFwIGluIGAkbmV4dFRpY2soKWAgdG8gZW5zdXJlIERPTSBoYXMgY29tcGxldGVkIHJlbmRlcmluZwoKCiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBhdHRlbXB0Rm9jdXMoX3RoaXMzLmdldEJ1dHRvbkZvclRhYigkdGFiKSk7CiAgICAgIH0pOwogICAgfSwKICAgIC8vIEVtaXQgYSBjbGljayBldmVudCBvbiBhIHNwZWNpZmllZCBgPGItdGFiPmAgY29tcG9uZW50IGluc3RhbmNlCiAgICBlbWl0VGFiQ2xpY2s6IGZ1bmN0aW9uIGVtaXRUYWJDbGljayh0YWIsIGV2ZW50KSB7CiAgICAgIGlmIChpc0V2ZW50KGV2ZW50KSAmJiB0YWIgJiYgdGFiLiRlbWl0ICYmICF0YWIuZGlzYWJsZWQpIHsKICAgICAgICB0YWIuJGVtaXQoRVZFTlRfTkFNRV9DTElDSywgZXZlbnQpOwogICAgICB9CiAgICB9LAogICAgLy8gQ2xpY2sgaGFuZGxlcgogICAgY2xpY2tUYWI6IGZ1bmN0aW9uIGNsaWNrVGFiKCR0YWIsIGV2ZW50KSB7CiAgICAgIHRoaXMuYWN0aXZhdGVUYWIoJHRhYik7CiAgICAgIHRoaXMuZW1pdFRhYkNsaWNrKCR0YWIsIGV2ZW50KTsKICAgIH0sCiAgICAvLyBNb3ZlIHRvIGZpcnN0IG5vbi1kaXNhYmxlZCB0YWIKICAgIGZpcnN0VGFiOiBmdW5jdGlvbiBmaXJzdFRhYihmb2N1cykgewogICAgICB2YXIgJHRhYiA9IHRoaXMudGFicy5maW5kKG5vdERpc2FibGVkKTsKCiAgICAgIGlmICh0aGlzLmFjdGl2YXRlVGFiKCR0YWIpICYmIGZvY3VzKSB7CiAgICAgICAgdGhpcy5mb2N1c0J1dHRvbigkdGFiKTsKICAgICAgICB0aGlzLmVtaXRUYWJDbGljaygkdGFiLCBmb2N1cyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBNb3ZlIHRvIHByZXZpb3VzIG5vbi1kaXNhYmxlZCB0YWIKICAgIHByZXZpb3VzVGFiOiBmdW5jdGlvbiBwcmV2aW91c1RhYihmb2N1cykgewogICAgICB2YXIgY3VycmVudEluZGV4ID0gbWF0aE1heCh0aGlzLmN1cnJlbnRUYWIsIDApOwogICAgICB2YXIgJHRhYiA9IHRoaXMudGFicy5zbGljZSgwLCBjdXJyZW50SW5kZXgpLnJldmVyc2UoKS5maW5kKG5vdERpc2FibGVkKTsKCiAgICAgIGlmICh0aGlzLmFjdGl2YXRlVGFiKCR0YWIpICYmIGZvY3VzKSB7CiAgICAgICAgdGhpcy5mb2N1c0J1dHRvbigkdGFiKTsKICAgICAgICB0aGlzLmVtaXRUYWJDbGljaygkdGFiLCBmb2N1cyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBNb3ZlIHRvIG5leHQgbm9uLWRpc2FibGVkIHRhYgogICAgbmV4dFRhYjogZnVuY3Rpb24gbmV4dFRhYihmb2N1cykgewogICAgICB2YXIgY3VycmVudEluZGV4ID0gbWF0aE1heCh0aGlzLmN1cnJlbnRUYWIsIC0xKTsKICAgICAgdmFyICR0YWIgPSB0aGlzLnRhYnMuc2xpY2UoY3VycmVudEluZGV4ICsgMSkuZmluZChub3REaXNhYmxlZCk7CgogICAgICBpZiAodGhpcy5hY3RpdmF0ZVRhYigkdGFiKSAmJiBmb2N1cykgewogICAgICAgIHRoaXMuZm9jdXNCdXR0b24oJHRhYik7CiAgICAgICAgdGhpcy5lbWl0VGFiQ2xpY2soJHRhYiwgZm9jdXMpOwogICAgICB9CiAgICB9LAogICAgLy8gTW92ZSB0byBsYXN0IG5vbi1kaXNhYmxlZCB0YWIKICAgIGxhc3RUYWI6IGZ1bmN0aW9uIGxhc3RUYWIoZm9jdXMpIHsKICAgICAgdmFyICR0YWIgPSB0aGlzLnRhYnMuc2xpY2UoKS5yZXZlcnNlKCkuZmluZChub3REaXNhYmxlZCk7CgogICAgICBpZiAodGhpcy5hY3RpdmF0ZVRhYigkdGFiKSAmJiBmb2N1cykgewogICAgICAgIHRoaXMuZm9jdXNCdXR0b24oJHRhYik7CiAgICAgICAgdGhpcy5lbWl0VGFiQ2xpY2soJHRhYiwgZm9jdXMpOwogICAgICB9CiAgICB9CiAgfSwKICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoKSB7CiAgICB2YXIgX3RoaXM0ID0gdGhpczsKCiAgICB2YXIgYWxpZ24gPSB0aGlzLmFsaWduLAogICAgICAgIGNhcmQgPSB0aGlzLmNhcmQsCiAgICAgICAgZW5kID0gdGhpcy5lbmQsCiAgICAgICAgZmlsbCA9IHRoaXMuZmlsbCwKICAgICAgICBmaXJzdFRhYiA9IHRoaXMuZmlyc3RUYWIsCiAgICAgICAganVzdGlmaWVkID0gdGhpcy5qdXN0aWZpZWQsCiAgICAgICAgbGFzdFRhYiA9IHRoaXMubGFzdFRhYiwKICAgICAgICBuZXh0VGFiID0gdGhpcy5uZXh0VGFiLAogICAgICAgIG5vS2V5TmF2ID0gdGhpcy5ub0tleU5hdiwKICAgICAgICBub05hdlN0eWxlID0gdGhpcy5ub05hdlN0eWxlLAogICAgICAgIHBpbGxzID0gdGhpcy5waWxscywKICAgICAgICBwcmV2aW91c1RhYiA9IHRoaXMucHJldmlvdXNUYWIsCiAgICAgICAgc21hbGwgPSB0aGlzLnNtYWxsLAogICAgICAgICR0YWJzID0gdGhpcy50YWJzLAogICAgICAgIHZlcnRpY2FsID0gdGhpcy52ZXJ0aWNhbDsgLy8gQ3VycmVudGx5IGFjdGl2ZSB0YWIKCiAgICB2YXIgJGFjdGl2ZVRhYiA9ICR0YWJzLmZpbmQoZnVuY3Rpb24gKCR0YWIpIHsKICAgICAgcmV0dXJuICR0YWIubG9jYWxBY3RpdmUgJiYgISR0YWIuZGlzYWJsZWQ7CiAgICB9KTsgLy8gVGFiIGJ1dHRvbiB0byBhbGxvdyBmb2N1c2luZyB3aGVuIG5vIGFjdGl2ZSB0YWIgZm91bmQgKGtleW5hdiBvbmx5KQoKICAgIHZhciAkZmFsbGJhY2tUYWIgPSAkdGFicy5maW5kKGZ1bmN0aW9uICgkdGFiKSB7CiAgICAgIHJldHVybiAhJHRhYi5kaXNhYmxlZDsKICAgIH0pOyAvLyBGb3IgZWFjaCBgPGItdGFiPmAgZm91bmQgY3JlYXRlIHRoZSB0YWIgYnV0dG9ucwoKICAgIHZhciAkYnV0dG9ucyA9ICR0YWJzLm1hcChmdW5jdGlvbiAoJHRhYiwgaW5kZXgpIHsKICAgICAgdmFyIF9vbjsKCiAgICAgIHZhciBzYWZlSWQgPSAkdGFiLnNhZmVJZDsgLy8gRW5zdXJlIGF0IGxlYXN0IG9uZSB0YWIgYnV0dG9uIGlzIGZvY3VzYWJsZSB3aGVuIGtleW5hdiBlbmFibGVkIChpZiBwb3NzaWJsZSkKCiAgICAgIHZhciB0YWJJbmRleCA9IG51bGw7CgogICAgICBpZiAoIW5vS2V5TmF2KSB7CiAgICAgICAgLy8gQnV0dG9ucyBhcmUgbm90IGluIHRhYiBpbmRleCB1bmxlc3MgYWN0aXZlLCBvciBhIGZhbGxiYWNrIHRhYgogICAgICAgIHRhYkluZGV4ID0gLTE7CgogICAgICAgIGlmICgkdGFiID09PSAkYWN0aXZlVGFiIHx8ICEkYWN0aXZlVGFiICYmICR0YWIgPT09ICRmYWxsYmFja1RhYikgewogICAgICAgICAgLy8gUGxhY2UgdGFiIGJ1dHRvbiBpbiB0YWIgc2VxdWVuY2UKICAgICAgICAgIHRhYkluZGV4ID0gbnVsbDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBoKEJWVGFiQnV0dG9uLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIGNvbnRyb2xzOiBzYWZlSWQgPyBzYWZlSWQoKSA6IG51bGwsCiAgICAgICAgICBpZDogJHRhYi5jb250cm9sbGVkQnkgfHwgKHNhZmVJZCA/IHNhZmVJZCgiX0JWX3RhYl9idXR0b25fIikgOiBudWxsKSwKICAgICAgICAgIG5vS2V5TmF2OiBub0tleU5hdiwKICAgICAgICAgIHBvc0luU2V0OiBpbmRleCArIDEsCiAgICAgICAgICBzZXRTaXplOiAkdGFicy5sZW5ndGgsCiAgICAgICAgICB0YWI6ICR0YWIsCiAgICAgICAgICB0YWJJbmRleDogdGFiSW5kZXgKICAgICAgICB9LAogICAgICAgIG9uOiAoX29uID0ge30sIF9kZWZpbmVQcm9wZXJ0eShfb24sIEVWRU5UX05BTUVfQ0xJQ0ssIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgX3RoaXM0LmNsaWNrVGFiKCR0YWIsIGV2ZW50KTsKICAgICAgICB9KSwgX2RlZmluZVByb3BlcnR5KF9vbiwgRVZFTlRfTkFNRV9GSVJTVCwgZmlyc3RUYWIpLCBfZGVmaW5lUHJvcGVydHkoX29uLCBFVkVOVF9OQU1FX1BSRVYsIHByZXZpb3VzVGFiKSwgX2RlZmluZVByb3BlcnR5KF9vbiwgRVZFTlRfTkFNRV9ORVhULCBuZXh0VGFiKSwgX2RlZmluZVByb3BlcnR5KF9vbiwgRVZFTlRfTkFNRV9MQVNULCBsYXN0VGFiKSwgX29uKSwKICAgICAgICBrZXk6ICR0YWJbQ09NUE9ORU5UX1VJRF9LRVldIHx8IGluZGV4LAogICAgICAgIHJlZjogJ2J1dHRvbnMnLAogICAgICAgIC8vIE5lZWRlZCB0byBtYWtlIGB0aGlzLiRyZWZzLmJ1dHRvbnNgIGFuIGFycmF5CiAgICAgICAgcmVmSW5Gb3I6IHRydWUKICAgICAgfSk7CiAgICB9KTsKICAgIHZhciAkbmF2ID0gaChCTmF2LCB7CiAgICAgICJjbGFzcyI6IHRoaXMubG9jYWxOYXZDbGFzcywKICAgICAgYXR0cnM6IHsKICAgICAgICByb2xlOiAndGFibGlzdCcsCiAgICAgICAgaWQ6IHRoaXMuc2FmZUlkKCdfQlZfdGFiX2NvbnRyb2xzXycpCiAgICAgIH0sCiAgICAgIHByb3BzOiB7CiAgICAgICAgZmlsbDogZmlsbCwKICAgICAgICBqdXN0aWZpZWQ6IGp1c3RpZmllZCwKICAgICAgICBhbGlnbjogYWxpZ24sCiAgICAgICAgdGFiczogIW5vTmF2U3R5bGUgJiYgIXBpbGxzLAogICAgICAgIHBpbGxzOiAhbm9OYXZTdHlsZSAmJiBwaWxscywKICAgICAgICB2ZXJ0aWNhbDogdmVydGljYWwsCiAgICAgICAgc21hbGw6IHNtYWxsLAogICAgICAgIGNhcmRIZWFkZXI6IGNhcmQgJiYgIXZlcnRpY2FsCiAgICAgIH0sCiAgICAgIHJlZjogJ25hdicKICAgIH0sIFt0aGlzLm5vcm1hbGl6ZVNsb3QoU0xPVF9OQU1FX1RBQlNfU1RBUlQpIHx8IGgoKSwgJGJ1dHRvbnMsIHRoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfVEFCU19FTkQpIHx8IGgoKV0pOwogICAgJG5hdiA9IGgoJ2RpdicsIHsKICAgICAgImNsYXNzIjogW3sKICAgICAgICAnY2FyZC1oZWFkZXInOiBjYXJkICYmICF2ZXJ0aWNhbCAmJiAhZW5kLAogICAgICAgICdjYXJkLWZvb3Rlcic6IGNhcmQgJiYgIXZlcnRpY2FsICYmIGVuZCwKICAgICAgICAnY29sLWF1dG8nOiB2ZXJ0aWNhbAogICAgICB9LCB0aGlzLm5hdldyYXBwZXJDbGFzc10sCiAgICAgIGtleTogJ2J2LXRhYnMtbmF2JwogICAgfSwgWyRuYXZdKTsKICAgIHZhciAkY2hpbGRyZW4gPSB0aGlzLm5vcm1hbGl6ZVNsb3QoKSB8fCBbXTsKICAgIHZhciAkZW1wdHkgPSBoKCk7CgogICAgaWYgKCRjaGlsZHJlbi5sZW5ndGggPT09IDApIHsKICAgICAgJGVtcHR5ID0gaCgnZGl2JywgewogICAgICAgICJjbGFzcyI6IFsndGFiLXBhbmUnLCAnYWN0aXZlJywgewogICAgICAgICAgJ2NhcmQtYm9keSc6IGNhcmQKICAgICAgICB9XSwKICAgICAgICBrZXk6ICdidi1lbXB0eS10YWInCiAgICAgIH0sIHRoaXMubm9ybWFsaXplU2xvdChTTE9UX05BTUVfRU1QVFkpKTsKICAgIH0KCiAgICB2YXIgJGNvbnRlbnQgPSBoKCdkaXYnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAndGFiLWNvbnRlbnQnLAogICAgICAiY2xhc3MiOiBbewogICAgICAgIGNvbDogdmVydGljYWwKICAgICAgfSwgdGhpcy5jb250ZW50Q2xhc3NdLAogICAgICBhdHRyczogewogICAgICAgIGlkOiB0aGlzLnNhZmVJZCgnX0JWX3RhYl9jb250YWluZXJfJykKICAgICAgfSwKICAgICAga2V5OiAnYnYtY29udGVudCcsCiAgICAgIHJlZjogJ2NvbnRlbnQnCiAgICB9LCBbJGNoaWxkcmVuLCAkZW1wdHldKTsgLy8gUmVuZGVyIGZpbmFsIG91dHB1dAoKICAgIHJldHVybiBoKHRoaXMudGFnLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAndGFicycsCiAgICAgICJjbGFzcyI6IHsKICAgICAgICByb3c6IHZlcnRpY2FsLAogICAgICAgICduby1ndXR0ZXJzJzogdmVydGljYWwgJiYgY2FyZAogICAgICB9LAogICAgICBhdHRyczogewogICAgICAgIGlkOiB0aGlzLnNhZmVJZCgpCiAgICAgIH0KICAgIH0sIFtlbmQgPyAkY29udGVudCA6IGgoKSwgJG5hdiwgZW5kID8gaCgpIDogJGNvbnRlbnRdKTsKICB9Cn0pOw=="},null]}