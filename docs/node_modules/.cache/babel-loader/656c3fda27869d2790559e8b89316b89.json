{"remainingRequest":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js!/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js!/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/form-rating/form-rating.js","dependencies":[{"path":"/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/components/form-rating/form-rating.js","mtime":1610263603568},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/cache-loader/dist/cjs.js","mtime":1582363961748},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js","mtime":1582363962038},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js","mtime":1585275399303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0aWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7Cgp2YXIgX3dhdGNoOwoKZnVuY3Rpb24gb3duS2V5cyhvYmplY3QsIGVudW1lcmFibGVPbmx5KSB7CiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpOwoKICBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgewogICAgdmFyIHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG9iamVjdCk7CiAgICBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7CiAgICAgIHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOwogICAgfSk7CiAgICBrZXlzLnB1c2guYXBwbHkoa2V5cywgc3ltYm9scyk7CiAgfQoKICByZXR1cm4ga2V5czsKfQoKZnVuY3Rpb24gX29iamVjdFNwcmVhZCh0YXJnZXQpIHsKICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXSAhPSBudWxsID8gYXJndW1lbnRzW2ldIDoge307CgogICAgaWYgKGkgJSAyKSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIF9kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgc291cmNlW2tleV0pOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsKICAgIH0gZWxzZSB7CiAgICAgIG93bktleXMoT2JqZWN0KHNvdXJjZSkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOwogICAgICB9KTsKICAgIH0KICB9CgogIHJldHVybiB0YXJnZXQ7Cn0KCmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsKICBpZiAoa2V5IGluIG9iaikgewogICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7CiAgICAgIHZhbHVlOiB2YWx1ZSwKICAgICAgZW51bWVyYWJsZTogdHJ1ZSwKICAgICAgY29uZmlndXJhYmxlOiB0cnVlLAogICAgICB3cml0YWJsZTogdHJ1ZQogICAgfSk7CiAgfSBlbHNlIHsKICAgIG9ialtrZXldID0gdmFsdWU7CiAgfQoKICByZXR1cm4gb2JqOwp9CgppbXBvcnQgeyBWdWUgfSBmcm9tICcuLi8uLi92dWUnOwppbXBvcnQgeyBOQU1FX0ZPUk1fUkFUSU5HLCBOQU1FX0ZPUk1fUkFUSU5HX1NUQVIgfSBmcm9tICcuLi8uLi9jb25zdGFudHMvY29tcG9uZW50cyc7CmltcG9ydCB7IEVWRU5UX05BTUVfQ0hBTkdFLCBFVkVOVF9OQU1FX1NFTEVDVEVEIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2V2ZW50cyc7CmltcG9ydCB7IFBST1BfVFlQRV9BUlJBWV9TVFJJTkcsIFBST1BfVFlQRV9CT09MRUFOLCBQUk9QX1RZUEVfTlVNQkVSLCBQUk9QX1RZUEVfTlVNQkVSX1NUUklORywgUFJPUF9UWVBFX1NUUklORyB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9wcm9wcyc7CmltcG9ydCB7IENPREVfTEVGVCwgQ09ERV9SSUdIVCwgQ09ERV9VUCwgQ09ERV9ET1dOIH0gZnJvbSAnLi4vLi4vY29uc3RhbnRzL2tleS1jb2Rlcyc7CmltcG9ydCB7IFNMT1RfTkFNRV9JQ09OX0NMRUFSLCBTTE9UX05BTUVfSUNPTl9FTVBUWSwgU0xPVF9OQU1FX0lDT05fRlVMTCwgU0xPVF9OQU1FX0lDT05fSEFMRiB9IGZyb20gJy4uLy4uL2NvbnN0YW50cy9zbG90cyc7CmltcG9ydCB7IGFycmF5SW5jbHVkZXMsIGNvbmNhdCB9IGZyb20gJy4uLy4uL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgYXR0ZW1wdEJsdXIsIGF0dGVtcHRGb2N1cyB9IGZyb20gJy4uLy4uL3V0aWxzL2RvbSc7CmltcG9ydCB7IHN0b3BFdmVudCB9IGZyb20gJy4uLy4uL3V0aWxzL2V2ZW50cyc7CmltcG9ydCB7IGlkZW50aXR5IH0gZnJvbSAnLi4vLi4vdXRpbHMvaWRlbnRpdHknOwppbXBvcnQgeyBpc051bGwgfSBmcm9tICcuLi8uLi91dGlscy9pbnNwZWN0JzsKaW1wb3J0IHsgaXNMb2NhbGVSVEwgfSBmcm9tICcuLi8uLi91dGlscy9sb2NhbGUnOwppbXBvcnQgeyBtYXRoTWF4LCBtYXRoTWluIH0gZnJvbSAnLi4vLi4vdXRpbHMvbWF0aCc7CmltcG9ydCB7IG1ha2VNb2RlbE1peGluIH0gZnJvbSAnLi4vLi4vdXRpbHMvbW9kZWwnOwppbXBvcnQgeyB0b0ludGVnZXIsIHRvRmxvYXQgfSBmcm9tICcuLi8uLi91dGlscy9udW1iZXInOwppbXBvcnQgeyBvbWl0LCBzb3J0S2V5cyB9IGZyb20gJy4uLy4uL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IG1ha2VQcm9wLCBtYWtlUHJvcHNDb25maWd1cmFibGUgfSBmcm9tICcuLi8uLi91dGlscy9wcm9wcyc7CmltcG9ydCB7IHRvU3RyaW5nIH0gZnJvbSAnLi4vLi4vdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgZm9ybVNpemVNaXhpbiwgcHJvcHMgYXMgZm9ybVNpemVQcm9wcyB9IGZyb20gJy4uLy4uL21peGlucy9mb3JtLXNpemUnOwppbXBvcnQgeyBpZE1peGluLCBwcm9wcyBhcyBpZFByb3BzIH0gZnJvbSAnLi4vLi4vbWl4aW5zL2lkJzsKaW1wb3J0IHsgbm9ybWFsaXplU2xvdE1peGluIH0gZnJvbSAnLi4vLi4vbWl4aW5zL25vcm1hbGl6ZS1zbG90JzsKaW1wb3J0IHsgcHJvcHMgYXMgZm9ybUNvbnRyb2xQcm9wcyB9IGZyb20gJy4uLy4uL21peGlucy9mb3JtLWNvbnRyb2wnOwppbXBvcnQgeyBCSWNvbiB9IGZyb20gJy4uLy4uL2ljb25zL2ljb24nOwppbXBvcnQgeyBCSWNvblN0YXIsIEJJY29uU3RhckhhbGYsIEJJY29uU3RhckZpbGwsIEJJY29uWCB9IGZyb20gJy4uLy4uL2ljb25zL2ljb25zJzsgLy8gLS0tIENvbnN0YW50cyAtLS0KCnZhciBfbWFrZU1vZGVsTWl4aW4gPSBtYWtlTW9kZWxNaXhpbigndmFsdWUnLCB7CiAgdHlwZTogUFJPUF9UWVBFX05VTUJFUl9TVFJJTkcsCiAgZXZlbnQ6IEVWRU5UX05BTUVfQ0hBTkdFCn0pLAogICAgbW9kZWxNaXhpbiA9IF9tYWtlTW9kZWxNaXhpbi5taXhpbiwKICAgIG1vZGVsUHJvcHMgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcHMsCiAgICBNT0RFTF9QUk9QX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4ucHJvcCwKICAgIE1PREVMX0VWRU5UX05BTUUgPSBfbWFrZU1vZGVsTWl4aW4uZXZlbnQ7Cgp2YXIgTUlOX1NUQVJTID0gMzsKdmFyIERFRkFVTFRfU1RBUlMgPSA1OyAvLyAtLS0gSGVscGVyIG1ldGhvZHMgLS0tCgp2YXIgY29tcHV0ZVN0YXJzID0gZnVuY3Rpb24gY29tcHV0ZVN0YXJzKHN0YXJzKSB7CiAgcmV0dXJuIG1hdGhNYXgoTUlOX1NUQVJTLCB0b0ludGVnZXIoc3RhcnMsIERFRkFVTFRfU1RBUlMpKTsKfTsKCnZhciBjbGFtcFZhbHVlID0gZnVuY3Rpb24gY2xhbXBWYWx1ZSh2YWx1ZSwgbWluLCBtYXgpIHsKICByZXR1cm4gbWF0aE1heChtYXRoTWluKHZhbHVlLCBtYXgpLCBtaW4pOwp9OyAvLyAtLS0gSGVscGVyIGNvbXBvbmVudHMgLS0tCi8vIEB2dWUvY29tcG9uZW50CgoKdmFyIEJWRm9ybVJhdGluZ1N0YXIgPSBWdWUuZXh0ZW5kKHsKICBuYW1lOiBOQU1FX0ZPUk1fUkFUSU5HX1NUQVIsCiAgbWl4aW5zOiBbbm9ybWFsaXplU2xvdE1peGluXSwKICBwcm9wczogewogICAgZGlzYWJsZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgICAvLyBJZiBwYXJlbnQgaXMgZm9jdXNlZAogICAgZm9jdXNlZDogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICAgIGhhc0NsZWFyOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogICAgcmF0aW5nOiBtYWtlUHJvcChQUk9QX1RZUEVfTlVNQkVSLCAwKSwKICAgIHJlYWRvbmx5OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogICAgc3RhcjogbWFrZVByb3AoUFJPUF9UWVBFX05VTUJFUiwgMCksCiAgICB2YXJpYW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKQogIH0sCiAgbWV0aG9kczogewogICAgb25DbGljazogZnVuY3Rpb24gb25DbGljayhldmVudCkgewogICAgICBpZiAoIXRoaXMuZGlzYWJsZWQgJiYgIXRoaXMucmVhZG9ubHkpIHsKICAgICAgICBzdG9wRXZlbnQoZXZlbnQsIHsKICAgICAgICAgIHByb3BhZ2F0aW9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9TRUxFQ1RFRCwgdGhpcy5zdGFyKTsKICAgICAgfQogICAgfQogIH0sCiAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCkgewogICAgdmFyIHJhdGluZyA9IHRoaXMucmF0aW5nLAogICAgICAgIHN0YXIgPSB0aGlzLnN0YXIsCiAgICAgICAgZm9jdXNlZCA9IHRoaXMuZm9jdXNlZCwKICAgICAgICBoYXNDbGVhciA9IHRoaXMuaGFzQ2xlYXIsCiAgICAgICAgdmFyaWFudCA9IHRoaXMudmFyaWFudCwKICAgICAgICBkaXNhYmxlZCA9IHRoaXMuZGlzYWJsZWQsCiAgICAgICAgcmVhZG9ubHkgPSB0aGlzLnJlYWRvbmx5OwogICAgdmFyIG1pblN0YXIgPSBoYXNDbGVhciA/IDAgOiAxOwogICAgdmFyIHR5cGUgPSByYXRpbmcgPj0gc3RhciA/ICdmdWxsJyA6IHJhdGluZyA+PSBzdGFyIC0gMC41ID8gJ2hhbGYnIDogJ2VtcHR5JzsKICAgIHZhciBzbG90U2NvcGUgPSB7CiAgICAgIHZhcmlhbnQ6IHZhcmlhbnQsCiAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgcmVhZG9ubHk6IHJlYWRvbmx5CiAgICB9OwogICAgcmV0dXJuIGgoJ3NwYW4nLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnYi1yYXRpbmctc3RhcicsCiAgICAgICJjbGFzcyI6IHsKICAgICAgICAvLyBXaGVuIG5vdCBob3ZlcmVkLCB3ZSB1c2UgdGhpcyBjbGFzcyB0byBmb2N1cyB0aGUgY3VycmVudCAob3IgZmlyc3QpIHN0YXIKICAgICAgICBmb2N1c2VkOiBmb2N1c2VkICYmIHJhdGluZyA9PT0gc3RhciB8fCAhdG9JbnRlZ2VyKHJhdGluZykgJiYgc3RhciA9PT0gbWluU3RhciwKICAgICAgICAvLyBXZSBhZGQgdHlwZSBjbGFzc2VzIHRvIHdlIGNhbiBoYW5kbGUgUlRMIHN0eWxpbmcKICAgICAgICAnYi1yYXRpbmctc3Rhci1lbXB0eSc6IHR5cGUgPT09ICdlbXB0eScsCiAgICAgICAgJ2ItcmF0aW5nLXN0YXItaGFsZic6IHR5cGUgPT09ICdoYWxmJywKICAgICAgICAnYi1yYXRpbmctc3Rhci1mdWxsJzogdHlwZSA9PT0gJ2Z1bGwnCiAgICAgIH0sCiAgICAgIGF0dHJzOiB7CiAgICAgICAgdGFiaW5kZXg6ICFkaXNhYmxlZCAmJiAhcmVhZG9ubHkgPyAnLTEnIDogbnVsbAogICAgICB9LAogICAgICBvbjogewogICAgICAgIGNsaWNrOiB0aGlzLm9uQ2xpY2sKICAgICAgfQogICAgfSwgW2goJ3NwYW4nLCB7CiAgICAgIHN0YXRpY0NsYXNzOiAnYi1yYXRpbmctaWNvbicKICAgIH0sIFt0aGlzLm5vcm1hbGl6ZVNsb3QodHlwZSwgc2xvdFNjb3BlKV0pXSk7CiAgfQp9KTsgLy8gLS0tIFByb3BzIC0tLQoKZXhwb3J0IHZhciBwcm9wcyA9IG1ha2VQcm9wc0NvbmZpZ3VyYWJsZShzb3J0S2V5cyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlkUHJvcHMpLCBtb2RlbFByb3BzKSwgb21pdChmb3JtQ29udHJvbFByb3BzLCBbJ3JlcXVpcmVkJywgJ2F1dG9mb2N1cyddKSksIGZvcm1TaXplUHJvcHMpLCB7fSwgewogIC8vIENTUyBjb2xvciBzdHJpbmcgKG92ZXJyaWRlcyB2YXJpYW50KQogIGNvbG9yOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKSwKICBpY29uQ2xlYXI6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICd4JyksCiAgaWNvbkVtcHR5OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnc3RhcicpLAogIGljb25GdWxsOiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HLCAnc3Rhci1maWxsJyksCiAgaWNvbkhhbGY6IG1ha2VQcm9wKFBST1BfVFlQRV9TVFJJTkcsICdzdGFyLWhhbGYnKSwKICBpbmxpbmU6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gTG9jYWxlIGZvciB0aGUgZm9ybWF0dGVkIHZhbHVlIChpZiBzaG93bikKICAvLyBEZWZhdWx0cyB0byB0aGUgYnJvd3NlciBsb2NhbGUuIEZhbGxzIGJhY2sgdG8gYGVuYAogIGxvY2FsZTogbWFrZVByb3AoUFJPUF9UWVBFX0FSUkFZX1NUUklORyksCiAgbm9Cb3JkZXI6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgcHJlY2lzaW9uOiBtYWtlUHJvcChQUk9QX1RZUEVfTlVNQkVSX1NUUklORyksCiAgcmVhZG9ubHk6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgc2hvd0NsZWFyOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIHNob3dWYWx1ZTogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICBzaG93VmFsdWVNYXg6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgc3RhcnM6IG1ha2VQcm9wKFBST1BfVFlQRV9OVU1CRVJfU1RSSU5HLCBERUZBVUxUX1NUQVJTLCBmdW5jdGlvbiAodmFsdWUpIHsKICAgIHJldHVybiB0b0ludGVnZXIodmFsdWUpID49IE1JTl9TVEFSUzsKICB9KSwKICB2YXJpYW50OiBtYWtlUHJvcChQUk9QX1RZUEVfU1RSSU5HKQp9KSksIE5BTUVfRk9STV9SQVRJTkcpOyAvLyAtLS0gTWFpbiBjb21wb25lbnQgLS0tCi8vIEB2dWUvY29tcG9uZW50CgpleHBvcnQgdmFyIEJGb3JtUmF0aW5nID0gLyojX19QVVJFX18qL1Z1ZS5leHRlbmQoewogIG5hbWU6IE5BTUVfRk9STV9SQVRJTkcsCiAgY29tcG9uZW50czogewogICAgQkljb25TdGFyOiBCSWNvblN0YXIsCiAgICBCSWNvblN0YXJIYWxmOiBCSWNvblN0YXJIYWxmLAogICAgQkljb25TdGFyRmlsbDogQkljb25TdGFyRmlsbCwKICAgIEJJY29uWDogQkljb25YCiAgfSwKICBtaXhpbnM6IFtpZE1peGluLCBtb2RlbE1peGluLCBmb3JtU2l6ZU1peGluXSwKICBwcm9wczogcHJvcHMsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciB2YWx1ZSA9IHRvRmxvYXQodGhpc1tNT0RFTF9QUk9QX05BTUVdLCBudWxsKTsKICAgIHZhciBzdGFycyA9IGNvbXB1dGVTdGFycyh0aGlzLnN0YXJzKTsKICAgIHJldHVybiB7CiAgICAgIGxvY2FsVmFsdWU6IGlzTnVsbCh2YWx1ZSkgPyBudWxsIDogY2xhbXBWYWx1ZSh2YWx1ZSwgMCwgc3RhcnMpLAogICAgICBoYXNGb2N1czogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgY29tcHV0ZWRTdGFyczogZnVuY3Rpb24gY29tcHV0ZWRTdGFycygpIHsKICAgICAgcmV0dXJuIGNvbXB1dGVTdGFycyh0aGlzLnN0YXJzKTsKICAgIH0sCiAgICBjb21wdXRlZFJhdGluZzogZnVuY3Rpb24gY29tcHV0ZWRSYXRpbmcoKSB7CiAgICAgIHZhciB2YWx1ZSA9IHRvRmxvYXQodGhpcy5sb2NhbFZhbHVlLCAwKTsKICAgICAgdmFyIHByZWNpc2lvbiA9IHRvSW50ZWdlcih0aGlzLnByZWNpc2lvbiwgMyk7IC8vIFdlIGNsYW1wIHRoZSB2YWx1ZSBiZXR3ZWVuIGAwYCBhbmQgc3RhcnMKCiAgICAgIHJldHVybiBjbGFtcFZhbHVlKHRvRmxvYXQodmFsdWUudG9GaXhlZChwcmVjaXNpb24pKSwgMCwgdGhpcy5jb21wdXRlZFN0YXJzKTsKICAgIH0sCiAgICBjb21wdXRlZExvY2FsZTogZnVuY3Rpb24gY29tcHV0ZWRMb2NhbGUoKSB7CiAgICAgIHZhciBsb2NhbGVzID0gY29uY2F0KHRoaXMubG9jYWxlKS5maWx0ZXIoaWRlbnRpdHkpOwogICAgICB2YXIgbmYgPSBuZXcgSW50bC5OdW1iZXJGb3JtYXQobG9jYWxlcyk7CiAgICAgIHJldHVybiBuZi5yZXNvbHZlZE9wdGlvbnMoKS5sb2NhbGU7CiAgICB9LAogICAgaXNJbnRlcmFjdGl2ZTogZnVuY3Rpb24gaXNJbnRlcmFjdGl2ZSgpIHsKICAgICAgcmV0dXJuICF0aGlzLmRpc2FibGVkICYmICF0aGlzLnJlYWRvbmx5OwogICAgfSwKICAgIGlzUlRMOiBmdW5jdGlvbiBpc1JUTCgpIHsKICAgICAgcmV0dXJuIGlzTG9jYWxlUlRMKHRoaXMuY29tcHV0ZWRMb2NhbGUpOwogICAgfSwKICAgIGZvcm1hdHRlZFJhdGluZzogZnVuY3Rpb24gZm9ybWF0dGVkUmF0aW5nKCkgewogICAgICB2YXIgcHJlY2lzaW9uID0gdG9JbnRlZ2VyKHRoaXMucHJlY2lzaW9uKTsKICAgICAgdmFyIHNob3dWYWx1ZU1heCA9IHRoaXMuc2hvd1ZhbHVlTWF4OwogICAgICB2YXIgbG9jYWxlID0gdGhpcy5jb21wdXRlZExvY2FsZTsKICAgICAgdmFyIGZvcm1hdE9wdGlvbnMgPSB7CiAgICAgICAgbm90YXRpb246ICdzdGFuZGFyZCcsCiAgICAgICAgbWluaW11bUZyYWN0aW9uRGlnaXRzOiBpc05hTihwcmVjaXNpb24pID8gMCA6IHByZWNpc2lvbiwKICAgICAgICBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IGlzTmFOKHByZWNpc2lvbikgPyAzIDogcHJlY2lzaW9uCiAgICAgIH07CiAgICAgIHZhciBzdGFycyA9IHRoaXMuY29tcHV0ZWRTdGFycy50b0xvY2FsZVN0cmluZyhsb2NhbGUpOwogICAgICB2YXIgdmFsdWUgPSB0aGlzLmxvY2FsVmFsdWU7CiAgICAgIHZhbHVlID0gaXNOdWxsKHZhbHVlKSA/IHNob3dWYWx1ZU1heCA/ICctJyA6ICcnIDogdmFsdWUudG9Mb2NhbGVTdHJpbmcobG9jYWxlLCBmb3JtYXRPcHRpb25zKTsKICAgICAgcmV0dXJuIHNob3dWYWx1ZU1heCA/ICIiLmNvbmNhdCh2YWx1ZSwgIi8iKS5jb25jYXQoc3RhcnMpIDogdmFsdWU7CiAgICB9CiAgfSwKICB3YXRjaDogKF93YXRjaCA9IHt9LCBfZGVmaW5lUHJvcGVydHkoX3dhdGNoLCBNT0RFTF9QUk9QX05BTUUsIGZ1bmN0aW9uIChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgdmFyIHZhbHVlID0gdG9GbG9hdChuZXdWYWx1ZSwgbnVsbCk7CiAgICAgIHRoaXMubG9jYWxWYWx1ZSA9IGlzTnVsbCh2YWx1ZSkgPyBudWxsIDogY2xhbXBWYWx1ZSh2YWx1ZSwgMCwgdGhpcy5jb21wdXRlZFN0YXJzKTsKICAgIH0KICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgImxvY2FsVmFsdWUiLCBmdW5jdGlvbiBsb2NhbFZhbHVlKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgewogICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSAmJiBuZXdWYWx1ZSAhPT0gKHRoaXMudmFsdWUgfHwgMCkpIHsKICAgICAgdGhpcy4kZW1pdChNT0RFTF9FVkVOVF9OQU1FLCBuZXdWYWx1ZSB8fCBudWxsKTsKICAgIH0KICB9KSwgX2RlZmluZVByb3BlcnR5KF93YXRjaCwgImRpc2FibGVkIiwgZnVuY3Rpb24gZGlzYWJsZWQobmV3VmFsdWUpIHsKICAgIGlmIChuZXdWYWx1ZSkgewogICAgICB0aGlzLmhhc0ZvY3VzID0gZmFsc2U7CiAgICAgIHRoaXMuYmx1cigpOwogICAgfQogIH0pLCBfd2F0Y2gpLAogIG1ldGhvZHM6IHsKICAgIC8vIC0tLSBQdWJsaWMgbWV0aG9kcyAtLS0KICAgIGZvY3VzOiBmdW5jdGlvbiBmb2N1cygpIHsKICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgYXR0ZW1wdEZvY3VzKHRoaXMuJGVsKTsKICAgICAgfQogICAgfSwKICAgIGJsdXI6IGZ1bmN0aW9uIGJsdXIoKSB7CiAgICAgIGlmICghdGhpcy5kaXNhYmxlZCkgewogICAgICAgIGF0dGVtcHRCbHVyKHRoaXMuJGVsKTsKICAgICAgfQogICAgfSwKICAgIC8vIC0tLSBQcml2YXRlIG1ldGhvZHMgLS0tCiAgICBvbktleWRvd246IGZ1bmN0aW9uIG9uS2V5ZG93bihldmVudCkgewogICAgICB2YXIga2V5Q29kZSA9IGV2ZW50LmtleUNvZGU7CgogICAgICBpZiAodGhpcy5pc0ludGVyYWN0aXZlICYmIGFycmF5SW5jbHVkZXMoW0NPREVfTEVGVCwgQ09ERV9ET1dOLCBDT0RFX1JJR0hULCBDT0RFX1VQXSwga2V5Q29kZSkpIHsKICAgICAgICBzdG9wRXZlbnQoZXZlbnQsIHsKICAgICAgICAgIHByb3BhZ2F0aW9uOiBmYWxzZQogICAgICAgIH0pOwogICAgICAgIHZhciB2YWx1ZSA9IHRvSW50ZWdlcih0aGlzLmxvY2FsVmFsdWUsIDApOwogICAgICAgIHZhciBtaW4gPSB0aGlzLnNob3dDbGVhciA/IDAgOiAxOwogICAgICAgIHZhciBzdGFycyA9IHRoaXMuY29tcHV0ZWRTdGFyczsgLy8gSW4gUlRMIG1vZGUsIExFRlQvUklHSFQgYXJlIHN3YXBwZWQKCiAgICAgICAgdmFyIGFtb3VudFJ0bCA9IHRoaXMuaXNSVEwgPyAtMSA6IDE7CgogICAgICAgIGlmIChrZXlDb2RlID09PSBDT0RFX0xFRlQpIHsKICAgICAgICAgIHRoaXMubG9jYWxWYWx1ZSA9IGNsYW1wVmFsdWUodmFsdWUgLSBhbW91bnRSdGwsIG1pbiwgc3RhcnMpIHx8IG51bGw7CiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBDT0RFX1JJR0hUKSB7CiAgICAgICAgICB0aGlzLmxvY2FsVmFsdWUgPSBjbGFtcFZhbHVlKHZhbHVlICsgYW1vdW50UnRsLCBtaW4sIHN0YXJzKTsKICAgICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IENPREVfRE9XTikgewogICAgICAgICAgdGhpcy5sb2NhbFZhbHVlID0gY2xhbXBWYWx1ZSh2YWx1ZSAtIDEsIG1pbiwgc3RhcnMpIHx8IG51bGw7CiAgICAgICAgfSBlbHNlIGlmIChrZXlDb2RlID09PSBDT0RFX1VQKSB7CiAgICAgICAgICB0aGlzLmxvY2FsVmFsdWUgPSBjbGFtcFZhbHVlKHZhbHVlICsgMSwgbWluLCBzdGFycyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgb25TZWxlY3RlZDogZnVuY3Rpb24gb25TZWxlY3RlZCh2YWx1ZSkgewogICAgICBpZiAodGhpcy5pc0ludGVyYWN0aXZlKSB7CiAgICAgICAgdGhpcy5sb2NhbFZhbHVlID0gdmFsdWU7CiAgICAgIH0KICAgIH0sCiAgICBvbkZvY3VzOiBmdW5jdGlvbiBvbkZvY3VzKGV2ZW50KSB7CiAgICAgIHRoaXMuaGFzRm9jdXMgPSAhdGhpcy5pc0ludGVyYWN0aXZlID8gZmFsc2UgOiBldmVudC50eXBlID09PSAnZm9jdXMnOwogICAgfSwKICAgIC8vIC0tLSBSZW5kZXIgbWV0aG9kcyAtLS0KICAgIHJlbmRlckljb246IGZ1bmN0aW9uIHJlbmRlckljb24oaWNvbikgewogICAgICByZXR1cm4gdGhpcy4kY3JlYXRlRWxlbWVudChCSWNvbiwgewogICAgICAgIHByb3BzOiB7CiAgICAgICAgICBpY29uOiBpY29uLAogICAgICAgICAgdmFyaWFudDogdGhpcy5kaXNhYmxlZCB8fCB0aGlzLmNvbG9yID8gbnVsbCA6IHRoaXMudmFyaWFudCB8fCBudWxsCiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBpY29uRW1wdHlGbjogZnVuY3Rpb24gaWNvbkVtcHR5Rm4oKSB7CiAgICAgIHJldHVybiB0aGlzLnJlbmRlckljb24odGhpcy5pY29uRW1wdHkpOwogICAgfSwKICAgIGljb25IYWxmRm46IGZ1bmN0aW9uIGljb25IYWxmRm4oKSB7CiAgICAgIHJldHVybiB0aGlzLnJlbmRlckljb24odGhpcy5pY29uSGFsZik7CiAgICB9LAogICAgaWNvbkZ1bGxGbjogZnVuY3Rpb24gaWNvbkZ1bGxGbigpIHsKICAgICAgcmV0dXJuIHRoaXMucmVuZGVySWNvbih0aGlzLmljb25GdWxsKTsKICAgIH0sCiAgICBpY29uQ2xlYXJGbjogZnVuY3Rpb24gaWNvbkNsZWFyRm4oKSB7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KEJJY29uLCB7CiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIGljb246IHRoaXMuaWNvbkNsZWFyCiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LAogIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGRpc2FibGVkID0gdGhpcy5kaXNhYmxlZCwKICAgICAgICByZWFkb25seSA9IHRoaXMucmVhZG9ubHksCiAgICAgICAgbmFtZSA9IHRoaXMubmFtZSwKICAgICAgICBmb3JtID0gdGhpcy5mb3JtLAogICAgICAgIGlubGluZSA9IHRoaXMuaW5saW5lLAogICAgICAgIHZhcmlhbnQgPSB0aGlzLnZhcmlhbnQsCiAgICAgICAgY29sb3IgPSB0aGlzLmNvbG9yLAogICAgICAgIG5vQm9yZGVyID0gdGhpcy5ub0JvcmRlciwKICAgICAgICBoYXNGb2N1cyA9IHRoaXMuaGFzRm9jdXMsCiAgICAgICAgY29tcHV0ZWRSYXRpbmcgPSB0aGlzLmNvbXB1dGVkUmF0aW5nLAogICAgICAgIGNvbXB1dGVkU3RhcnMgPSB0aGlzLmNvbXB1dGVkU3RhcnMsCiAgICAgICAgZm9ybWF0dGVkUmF0aW5nID0gdGhpcy5mb3JtYXR0ZWRSYXRpbmcsCiAgICAgICAgc2hvd0NsZWFyID0gdGhpcy5zaG93Q2xlYXIsCiAgICAgICAgaXNSVEwgPSB0aGlzLmlzUlRMLAogICAgICAgIGlzSW50ZXJhY3RpdmUgPSB0aGlzLmlzSW50ZXJhY3RpdmUsCiAgICAgICAgJHNjb3BlZFNsb3RzID0gdGhpcy4kc2NvcGVkU2xvdHM7CiAgICB2YXIgJGNvbnRlbnQgPSBbXTsKCiAgICBpZiAoc2hvd0NsZWFyICYmICFkaXNhYmxlZCAmJiAhcmVhZG9ubHkpIHsKICAgICAgdmFyICRpY29uID0gaCgnc3BhbicsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2ItcmF0aW5nLWljb24nCiAgICAgIH0sIFsoJHNjb3BlZFNsb3RzW1NMT1RfTkFNRV9JQ09OX0NMRUFSXSB8fCB0aGlzLmljb25DbGVhckZuKSgpXSk7CiAgICAgICRjb250ZW50LnB1c2goaCgnc3BhbicsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ2ItcmF0aW5nLXN0YXIgYi1yYXRpbmctc3Rhci1jbGVhciBmbGV4LWdyb3ctMScsCiAgICAgICAgImNsYXNzIjogewogICAgICAgICAgZm9jdXNlZDogaGFzRm9jdXMgJiYgY29tcHV0ZWRSYXRpbmcgPT09IDAKICAgICAgICB9LAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICB0YWJpbmRleDogaXNJbnRlcmFjdGl2ZSA/ICctMScgOiBudWxsCiAgICAgICAgfSwKICAgICAgICBvbjogewogICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkgewogICAgICAgICAgICByZXR1cm4gX3RoaXMub25TZWxlY3RlZChudWxsKTsKICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGtleTogJ2NsZWFyJwogICAgICB9LCBbJGljb25dKSk7CiAgICB9CgogICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGNvbXB1dGVkU3RhcnM7IGluZGV4KyspIHsKICAgICAgdmFyIHZhbHVlID0gaW5kZXggKyAxOwogICAgICAkY29udGVudC5wdXNoKGgoQlZGb3JtUmF0aW5nU3RhciwgewogICAgICAgIHN0YXRpY0NsYXNzOiAnZmxleC1ncm93LTEnLAogICAgICAgIHN0eWxlOiBjb2xvciAmJiAhZGlzYWJsZWQgPyB7CiAgICAgICAgICBjb2xvcjogY29sb3IKICAgICAgICB9IDoge30sCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHJhdGluZzogY29tcHV0ZWRSYXRpbmcsCiAgICAgICAgICBzdGFyOiB2YWx1ZSwKICAgICAgICAgIHZhcmlhbnQ6IGRpc2FibGVkID8gbnVsbCA6IHZhcmlhbnQgfHwgbnVsbCwKICAgICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICAgIHJlYWRvbmx5OiByZWFkb25seSwKICAgICAgICAgIGZvY3VzZWQ6IGhhc0ZvY3VzLAogICAgICAgICAgaGFzQ2xlYXI6IHNob3dDbGVhcgogICAgICAgIH0sCiAgICAgICAgb246IHsKICAgICAgICAgIHNlbGVjdGVkOiB0aGlzLm9uU2VsZWN0ZWQKICAgICAgICB9LAogICAgICAgIHNjb3BlZFNsb3RzOiB7CiAgICAgICAgICBlbXB0eTogJHNjb3BlZFNsb3RzW1NMT1RfTkFNRV9JQ09OX0VNUFRZXSB8fCB0aGlzLmljb25FbXB0eUZuLAogICAgICAgICAgaGFsZjogJHNjb3BlZFNsb3RzW1NMT1RfTkFNRV9JQ09OX0hBTEZdIHx8IHRoaXMuaWNvbkhhbGZGbiwKICAgICAgICAgIGZ1bGw6ICRzY29wZWRTbG90c1tTTE9UX05BTUVfSUNPTl9GVUxMXSB8fCB0aGlzLmljb25GdWxsRm4KICAgICAgICB9LAogICAgICAgIGtleTogaW5kZXgKICAgICAgfSkpOwogICAgfQoKICAgIGlmIChuYW1lKSB7CiAgICAgICRjb250ZW50LnB1c2goaCgnaW5wdXQnLCB7CiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgIHR5cGU6ICdoaWRkZW4nLAogICAgICAgICAgdmFsdWU6IGlzTnVsbCh0aGlzLmxvY2FsVmFsdWUpID8gJycgOiBjb21wdXRlZFJhdGluZywKICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICBmb3JtOiBmb3JtIHx8IG51bGwKICAgICAgICB9LAogICAgICAgIGtleTogJ2hpZGRlbicKICAgICAgfSkpOwogICAgfQoKICAgIGlmICh0aGlzLnNob3dWYWx1ZSkgewogICAgICAkY29udGVudC5wdXNoKGgoJ2InLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdiLXJhdGluZy12YWx1ZSBmbGV4LWdyb3ctMScsCiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJwogICAgICAgIH0sCiAgICAgICAga2V5OiAndmFsdWUnCiAgICAgIH0sIHRvU3RyaW5nKGZvcm1hdHRlZFJhdGluZykpKTsKICAgIH0KCiAgICByZXR1cm4gaCgnb3V0cHV0JywgewogICAgICBzdGF0aWNDbGFzczogJ2ItcmF0aW5nIGZvcm0tY29udHJvbCBhbGlnbi1pdGVtcy1jZW50ZXInLAogICAgICAiY2xhc3MiOiBbewogICAgICAgICdkLWlubGluZS1mbGV4JzogaW5saW5lLAogICAgICAgICdkLWZsZXgnOiAhaW5saW5lLAogICAgICAgICdib3JkZXItMCc6IG5vQm9yZGVyLAogICAgICAgIGRpc2FibGVkOiBkaXNhYmxlZCwKICAgICAgICByZWFkb25seTogIWRpc2FibGVkICYmIHJlYWRvbmx5CiAgICAgIH0sIHRoaXMuc2l6ZUZvcm1DbGFzc10sCiAgICAgIGF0dHJzOiB7CiAgICAgICAgaWQ6IHRoaXMuc2FmZUlkKCksCiAgICAgICAgZGlyOiBpc1JUTCA/ICdydGwnIDogJ2x0cicsCiAgICAgICAgdGFiaW5kZXg6IGRpc2FibGVkID8gbnVsbCA6ICcwJywKICAgICAgICBkaXNhYmxlZDogZGlzYWJsZWQsCiAgICAgICAgcm9sZTogJ3NsaWRlcicsCiAgICAgICAgJ2FyaWEtZGlzYWJsZWQnOiBkaXNhYmxlZCA/ICd0cnVlJyA6IG51bGwsCiAgICAgICAgJ2FyaWEtcmVhZG9ubHknOiAhZGlzYWJsZWQgJiYgcmVhZG9ubHkgPyAndHJ1ZScgOiBudWxsLAogICAgICAgICdhcmlhLWxpdmUnOiAnb2ZmJywKICAgICAgICAnYXJpYS12YWx1ZW1pbic6IHNob3dDbGVhciA/ICcwJyA6ICcxJywKICAgICAgICAnYXJpYS12YWx1ZW1heCc6IHRvU3RyaW5nKGNvbXB1dGVkU3RhcnMpLAogICAgICAgICdhcmlhLXZhbHVlbm93JzogY29tcHV0ZWRSYXRpbmcgPyB0b1N0cmluZyhjb21wdXRlZFJhdGluZykgOiBudWxsCiAgICAgIH0sCiAgICAgIG9uOiB7CiAgICAgICAga2V5ZG93bjogdGhpcy5vbktleWRvd24sCiAgICAgICAgZm9jdXM6IHRoaXMub25Gb2N1cywKICAgICAgICBibHVyOiB0aGlzLm9uRm9jdXMKICAgICAgfQogICAgfSwgJGNvbnRlbnQpOwogIH0KfSk7"},null]}