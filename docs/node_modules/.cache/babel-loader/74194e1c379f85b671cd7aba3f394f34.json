{"remainingRequest":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js!/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js!/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/mixins/dropdown.js","dependencies":[{"path":"/Users/zzou/Downloads/backup_sample/node_modules/bootstrap-vue/esm/mixins/dropdown.js","mtime":1610263603568},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/cache-loader/dist/cjs.js","mtime":1582363961748},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/thread-loader/dist/cjs.js","mtime":1582363962038},{"path":"/Users/zzou/Downloads/backup_sample/node_modules/babel-loader/lib/index.js","mtime":1585275399303}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0aWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmRlZmluZS1wcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycyI7CgpmdW5jdGlvbiBvd25LZXlzKG9iamVjdCwgZW51bWVyYWJsZU9ubHkpIHsKICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7CgogIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7CiAgICB2YXIgc3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMob2JqZWN0KTsKICAgIGlmIChlbnVtZXJhYmxlT25seSkgc3ltYm9scyA9IHN5bWJvbHMuZmlsdGVyKGZ1bmN0aW9uIChzeW0pIHsKICAgICAgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBzeW0pLmVudW1lcmFibGU7CiAgICB9KTsKICAgIGtleXMucHVzaC5hcHBseShrZXlzLCBzeW1ib2xzKTsKICB9CgogIHJldHVybiBrZXlzOwp9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgewogIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsKCiAgICBpZiAoaSAlIDIpIHsKICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSwgdHJ1ZSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgX2RlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBzb3VyY2Vba2V5XSk7CiAgICAgIH0pOwogICAgfSBlbHNlIGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycykgewogICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHNvdXJjZSkpOwogICAgfSBlbHNlIHsKICAgICAgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwga2V5KSk7CiAgICAgIH0pOwogICAgfQogIH0KCiAgcmV0dXJuIHRhcmdldDsKfQoKZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgewogIGlmIChrZXkgaW4gb2JqKSB7CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsKICAgICAgdmFsdWU6IHZhbHVlLAogICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICBjb25maWd1cmFibGU6IHRydWUsCiAgICAgIHdyaXRhYmxlOiB0cnVlCiAgICB9KTsKICB9IGVsc2UgewogICAgb2JqW2tleV0gPSB2YWx1ZTsKICB9CgogIHJldHVybiBvYmo7Cn0KCmltcG9ydCBQb3BwZXIgZnJvbSAncG9wcGVyLmpzJzsKaW1wb3J0IHsgVnVlIH0gZnJvbSAnLi4vdnVlJzsKaW1wb3J0IHsgTkFNRV9EUk9QRE9XTiB9IGZyb20gJy4uL2NvbnN0YW50cy9jb21wb25lbnRzJzsKaW1wb3J0IHsgRVZFTlRfTkFNRV9DTElDSywgRVZFTlRfTkFNRV9ISURERU4sIEVWRU5UX05BTUVfSElERSwgRVZFTlRfTkFNRV9TSE9XLCBFVkVOVF9OQU1FX1NIT1dOLCBFVkVOVF9OQU1FX1RPR0dMRSB9IGZyb20gJy4uL2NvbnN0YW50cy9ldmVudHMnOwppbXBvcnQgeyBDT0RFX0RPV04sIENPREVfRU5URVIsIENPREVfRVNDLCBDT0RFX1NQQUNFLCBDT0RFX1VQIH0gZnJvbSAnLi4vY29uc3RhbnRzL2tleS1jb2Rlcyc7CmltcG9ydCB7IFBMQUNFTUVOVF9UT1BfU1RBUlQsIFBMQUNFTUVOVF9UT1BfRU5ELCBQTEFDRU1FTlRfQk9UVE9NX1NUQVJULCBQTEFDRU1FTlRfQk9UVE9NX0VORCwgUExBQ0VNRU5UX1JJR0hUX1NUQVJULCBQTEFDRU1FTlRfTEVGVF9TVEFSVCB9IGZyb20gJy4uL2NvbnN0YW50cy9wb3BwZXInOwppbXBvcnQgeyBQUk9QX1RZUEVfQk9PTEVBTiwgUFJPUF9UWVBFX05VTUJFUl9TVFJJTkcsIFBST1BfVFlQRV9PQkpFQ1QsIFBST1BfVFlQRV9TVFJJTkcgfSBmcm9tICcuLi9jb25zdGFudHMvcHJvcHMnOwppbXBvcnQgeyBIVE1MRWxlbWVudCB9IGZyb20gJy4uL2NvbnN0YW50cy9zYWZlLXR5cGVzJzsKaW1wb3J0IHsgQnZFdmVudCB9IGZyb20gJy4uL3V0aWxzL2J2LWV2ZW50LmNsYXNzJzsKaW1wb3J0IHsgYXR0ZW1wdEZvY3VzLCBjbG9zZXN0LCBjb250YWlucywgaXNWaXNpYmxlLCByZXF1ZXN0QUYsIHNlbGVjdEFsbCB9IGZyb20gJy4uL3V0aWxzL2RvbSc7CmltcG9ydCB7IGdldFJvb3RFdmVudE5hbWUsIHN0b3BFdmVudCB9IGZyb20gJy4uL3V0aWxzL2V2ZW50cyc7CmltcG9ydCB7IGlzTnVsbCB9IGZyb20gJy4uL3V0aWxzL2luc3BlY3QnOwppbXBvcnQgeyBtZXJnZURlZXAsIHNvcnRLZXlzIH0gZnJvbSAnLi4vdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgbWFrZVByb3AsIG1ha2VQcm9wc0NvbmZpZ3VyYWJsZSB9IGZyb20gJy4uL3V0aWxzL3Byb3BzJzsKaW1wb3J0IHsgd2FybiB9IGZyb20gJy4uL3V0aWxzL3dhcm4nOwppbXBvcnQgeyBjbGlja091dE1peGluIH0gZnJvbSAnLi9jbGljay1vdXQnOwppbXBvcnQgeyBmb2N1c0luTWl4aW4gfSBmcm9tICcuL2ZvY3VzLWluJzsKaW1wb3J0IHsgaWRNaXhpbiwgcHJvcHMgYXMgaWRQcm9wcyB9IGZyb20gJy4vaWQnOwppbXBvcnQgeyBsaXN0ZW5PblJvb3RNaXhpbiB9IGZyb20gJy4vbGlzdGVuLW9uLXJvb3QnOyAvLyAtLS0gQ29uc3RhbnRzIC0tLQoKdmFyIFJPT1RfRVZFTlRfTkFNRV9TSE9XTiA9IGdldFJvb3RFdmVudE5hbWUoTkFNRV9EUk9QRE9XTiwgRVZFTlRfTkFNRV9TSE9XTik7CnZhciBST09UX0VWRU5UX05BTUVfSElEREVOID0gZ2V0Um9vdEV2ZW50TmFtZShOQU1FX0RST1BET1dOLCBFVkVOVF9OQU1FX0hJRERFTik7IC8vIENTUyBzZWxlY3RvcnMKCnZhciBTRUxFQ1RPUl9GT1JNX0NISUxEID0gJy5kcm9wZG93biBmb3JtJzsKdmFyIFNFTEVDVE9SX0lURU0gPSBbJy5kcm9wZG93bi1pdGVtJywgJy5iLWRyb3Bkb3duLWZvcm0nXS5tYXAoZnVuY3Rpb24gKHNlbGVjdG9yKSB7CiAgcmV0dXJuICIiLmNvbmNhdChzZWxlY3RvciwgIjpub3QoLmRpc2FibGVkKTpub3QoW2Rpc2FibGVkXSkiKTsKfSkuam9pbignLCAnKTsgLy8gLS0tIEhlbHBlciBtZXRob2RzIC0tLQovLyBSZXR1cm4gYW4gYXJyYXkgb2YgdmlzaWJsZSBpdGVtcwoKdmFyIGZpbHRlclZpc2libGVzID0gZnVuY3Rpb24gZmlsdGVyVmlzaWJsZXMoZWxzKSB7CiAgcmV0dXJuIChlbHMgfHwgW10pLmZpbHRlcihpc1Zpc2libGUpOwp9OyAvLyAtLS0gUHJvcHMgLS0tCgoKZXhwb3J0IHZhciBwcm9wcyA9IG1ha2VQcm9wc0NvbmZpZ3VyYWJsZShzb3J0S2V5cyhfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGlkUHJvcHMpLCB7fSwgewogIC8vIFN0cmluZzogYHNjcm9sbFBhcmVudGAsIGB3aW5kb3dgIG9yIGB2aWV3cG9ydGAKICAvLyBIVE1MRWxlbWVudDogSFRNTCBFbGVtZW50IHJlZmVyZW5jZQogIGJvdW5kYXJ5OiBtYWtlUHJvcChbSFRNTEVsZW1lbnQsIFBST1BfVFlQRV9TVFJJTkddLCAnc2Nyb2xsUGFyZW50JyksCiAgZGlzYWJsZWQ6IG1ha2VQcm9wKFBST1BfVFlQRV9CT09MRUFOLCBmYWxzZSksCiAgLy8gUGxhY2UgbGVmdCBpZiBwb3NzaWJsZQogIGRyb3BsZWZ0OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIFBsYWNlIHJpZ2h0IGlmIHBvc3NpYmxlCiAgZHJvcHJpZ2h0OiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIFBsYWNlIG9uIHRvcCBpZiBwb3NzaWJsZQogIGRyb3B1cDogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKSwKICAvLyBEaXNhYmxlIGF1dG8tZmxpcHBpbmcgb2YgbWVudSBmcm9tIGJvdHRvbSA8PT4gdG9wCiAgbm9GbGlwOiBtYWtlUHJvcChQUk9QX1RZUEVfQk9PTEVBTiwgZmFsc2UpLAogIC8vIE51bWJlciBvZiBwaXhlbHMgb3IgYSBDU1MgdW5pdCB2YWx1ZSB0byBvZmZzZXQgbWVudQogIC8vIChpLmUuIGAxcHhgLCBgMXJlbWAsIGV0Yy4pCiAgb2Zmc2V0OiBtYWtlUHJvcChQUk9QX1RZUEVfTlVNQkVSX1NUUklORywgMCksCiAgcG9wcGVyT3B0czogbWFrZVByb3AoUFJPUF9UWVBFX09CSkVDVCwge30pLAogIC8vIFJpZ2h0IGFsaWduIG1lbnUgKGRlZmF1bHQgaXMgbGVmdCBhbGlnbikKICByaWdodDogbWFrZVByb3AoUFJPUF9UWVBFX0JPT0xFQU4sIGZhbHNlKQp9KSksIE5BTUVfRFJPUERPV04pOyAvLyAtLS0gTWl4aW4gLS0tCi8vIEB2dWUvY29tcG9uZW50CgpleHBvcnQgdmFyIGRyb3Bkb3duTWl4aW4gPSBWdWUuZXh0ZW5kKHsKICBtaXhpbnM6IFtpZE1peGluLCBsaXN0ZW5PblJvb3RNaXhpbiwgY2xpY2tPdXRNaXhpbiwgZm9jdXNJbk1peGluXSwKICBwcm92aWRlOiBmdW5jdGlvbiBwcm92aWRlKCkgewogICAgcmV0dXJuIHsKICAgICAgYnZEcm9wZG93bjogdGhpcwogICAgfTsKICB9LAogIGluamVjdDogewogICAgYnZOYXZiYXI6IHsKICAgICAgImRlZmF1bHQiOiBudWxsCiAgICB9CiAgfSwKICBwcm9wczogcHJvcHMsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZpc2libGU6IGZhbHNlLAogICAgICB2aXNpYmxlQ2hhbmdlUHJldmVudGVkOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpbk5hdmJhcjogZnVuY3Rpb24gaW5OYXZiYXIoKSB7CiAgICAgIHJldHVybiAhaXNOdWxsKHRoaXMuYnZOYXZiYXIpOwogICAgfSwKICAgIHRvZ2dsZXI6IGZ1bmN0aW9uIHRvZ2dsZXIoKSB7CiAgICAgIHZhciB0b2dnbGUgPSB0aGlzLiRyZWZzLnRvZ2dsZTsKICAgICAgcmV0dXJuIHRvZ2dsZSA/IHRvZ2dsZS4kZWwgfHwgdG9nZ2xlIDogbnVsbDsKICAgIH0sCiAgICBkaXJlY3Rpb25DbGFzczogZnVuY3Rpb24gZGlyZWN0aW9uQ2xhc3MoKSB7CiAgICAgIGlmICh0aGlzLmRyb3B1cCkgewogICAgICAgIHJldHVybiAnZHJvcHVwJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLmRyb3ByaWdodCkgewogICAgICAgIHJldHVybiAnZHJvcHJpZ2h0JzsKICAgICAgfSBlbHNlIGlmICh0aGlzLmRyb3BsZWZ0KSB7CiAgICAgICAgcmV0dXJuICdkcm9wbGVmdCc7CiAgICAgIH0KCiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICBib3VuZGFyeUNsYXNzOiBmdW5jdGlvbiBib3VuZGFyeUNsYXNzKCkgewogICAgICAvLyBQb3NpdGlvbiBgc3RhdGljYCBpcyBuZWVkZWQgdG8gYWxsb3cgbWVudSB0byAiYnJlYWtvdXQiIG9mIHRoZSBgc2Nyb2xsUGFyZW50YAogICAgICAvLyBib3VuZGFyaWVzIHdoZW4gYm91bmRhcnkgaXMgYW55dGhpbmcgb3RoZXIgdGhhbiBgc2Nyb2xsUGFyZW50YAogICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS90d2JzL2Jvb3RzdHJhcC9pc3N1ZXMvMjQyNTEjaXNzdWVjb21tZW50LTM0MTQxMzc4NgogICAgICByZXR1cm4gdGhpcy5ib3VuZGFyeSAhPT0gJ3Njcm9sbFBhcmVudCcgJiYgIXRoaXMuaW5OYXZiYXIgPyAncG9zaXRpb24tc3RhdGljJyA6ICcnOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHZpc2libGU6IGZ1bmN0aW9uIHZpc2libGUobmV3VmFsdWUsIG9sZFZhbHVlKSB7CiAgICAgIGlmICh0aGlzLnZpc2libGVDaGFuZ2VQcmV2ZW50ZWQpIHsKICAgICAgICB0aGlzLnZpc2libGVDaGFuZ2VQcmV2ZW50ZWQgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmIChuZXdWYWx1ZSAhPT0gb2xkVmFsdWUpIHsKICAgICAgICB2YXIgZXZlbnROYW1lID0gbmV3VmFsdWUgPyBFVkVOVF9OQU1FX1NIT1cgOiBFVkVOVF9OQU1FX0hJREU7CiAgICAgICAgdmFyIGJ2RXZlbnQgPSBuZXcgQnZFdmVudChldmVudE5hbWUsIHsKICAgICAgICAgIGNhbmNlbGFibGU6IHRydWUsCiAgICAgICAgICB2dWVUYXJnZXQ6IHRoaXMsCiAgICAgICAgICB0YXJnZXQ6IHRoaXMuJHJlZnMubWVudSwKICAgICAgICAgIHJlbGF0ZWRUYXJnZXQ6IG51bGwsCiAgICAgICAgICBjb21wb25lbnRJZDogdGhpcy5zYWZlSWQgPyB0aGlzLnNhZmVJZCgpIDogdGhpcy5pZCB8fCBudWxsCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5lbWl0RXZlbnQoYnZFdmVudCk7CgogICAgICAgIGlmIChidkV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHsKICAgICAgICAgIC8vIFJlc2V0IHZhbHVlIGFuZCBleGl0IGlmIGNhbmNlbGVkCiAgICAgICAgICB0aGlzLnZpc2libGVDaGFuZ2VQcmV2ZW50ZWQgPSB0cnVlOwogICAgICAgICAgdGhpcy52aXNpYmxlID0gb2xkVmFsdWU7IC8vIEp1c3QgaW4gY2FzZSBhIGNoaWxkIGVsZW1lbnQgdHJpZ2dlcmVkIGB0aGlzLmhpZGUodHJ1ZSlgCgogICAgICAgICAgdGhpcy4kb2ZmKEVWRU5UX05BTUVfSElEREVOLCB0aGlzLmZvY3VzVG9nZ2xlcik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAobmV3VmFsdWUpIHsKICAgICAgICAgIHRoaXMuc2hvd01lbnUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5oaWRlTWVudSgpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGRpc2FibGVkOiBmdW5jdGlvbiBkaXNhYmxlZChuZXdWYWx1ZSwgb2xkVmFsdWUpIHsKICAgICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSAmJiBuZXdWYWx1ZSAmJiB0aGlzLnZpc2libGUpIHsKICAgICAgICAvLyBIaWRlIGRyb3Bkb3duIGlmIGRpc2FibGVkIGNoYW5nZXMgdG8gdHJ1ZQogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgLy8gQ3JlYXRlIHByaXZhdGUgbm9uLXJlYWN0aXZlIHByb3BzCiAgICB0aGlzLiRfcG9wcGVyID0gbnVsbDsKICAgIHRoaXMuJF9oaWRlVGltZW91dCA9IG51bGw7CiAgfSwKCiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8KICBkZWFjdGl2YXRlZDogZnVuY3Rpb24gZGVhY3RpdmF0ZWQoKSB7CiAgICAvLyBJbiBjYXNlIHdlIGFyZSBpbnNpZGUgYSBgPGtlZXAtYWxpdmU+YAogICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICB0aGlzLndoaWxlT3Blbkxpc3RlbihmYWxzZSk7CiAgICB0aGlzLmRlc3Ryb3lQb3BwZXIoKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsKICAgIHRoaXMud2hpbGVPcGVuTGlzdGVuKGZhbHNlKTsKICAgIHRoaXMuZGVzdHJveVBvcHBlcigpOwogICAgdGhpcy5jbGVhckhpZGVUaW1lb3V0KCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyBFdmVudCBlbWl0dGVyCiAgICBlbWl0RXZlbnQ6IGZ1bmN0aW9uIGVtaXRFdmVudChidkV2ZW50KSB7CiAgICAgIHZhciB0eXBlID0gYnZFdmVudC50eXBlOwogICAgICB0aGlzLmVtaXRPblJvb3QoZ2V0Um9vdEV2ZW50TmFtZShOQU1FX0RST1BET1dOLCB0eXBlKSwgYnZFdmVudCk7CiAgICAgIHRoaXMuJGVtaXQodHlwZSwgYnZFdmVudCk7CiAgICB9LAogICAgc2hvd01lbnU6IGZ1bmN0aW9uIHNob3dNZW51KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLwogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBPbmx5IGluc3RhbnRpYXRlIFBvcHBlci5qcyB3aGVuIGRyb3Bkb3duIGlzIG5vdCBpbiBgPGItbmF2YmFyPmAKCgogICAgICBpZiAoIXRoaXMuaW5OYXZiYXIpIHsKICAgICAgICBpZiAodHlwZW9mIFBvcHBlciA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgICB3YXJuKCdQb3BwZXIuanMgbm90IGZvdW5kLiBGYWxsaW5nIGJhY2sgdG8gQ1NTIHBvc2l0aW9uaW5nJywgTkFNRV9EUk9QRE9XTik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIEZvciBkcm9wdXAgd2l0aCBhbGlnbm1lbnQgd2UgdXNlIHRoZSBwYXJlbnQgZWxlbWVudCBhcyBwb3BwZXIgY29udGFpbmVyCiAgICAgICAgICB2YXIgZWwgPSB0aGlzLmRyb3B1cCAmJiB0aGlzLnJpZ2h0IHx8IHRoaXMuc3BsaXQgPyB0aGlzLiRlbCA6IHRoaXMuJHJlZnMudG9nZ2xlOyAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBhIHJlZmVyZW5jZSB0byBhbiBlbGVtZW50LCBub3QgYSBjb21wb25lbnQhCgogICAgICAgICAgZWwgPSBlbC4kZWwgfHwgZWw7IC8vIEluc3RhbnRpYXRlIFBvcHBlci5qcwoKICAgICAgICAgIHRoaXMuY3JlYXRlUG9wcGVyKGVsKTsKICAgICAgICB9CiAgICAgIH0gLy8gRW5zdXJlIG90aGVyIG1lbnVzIGFyZSBjbG9zZWQKCgogICAgICB0aGlzLmVtaXRPblJvb3QoUk9PVF9FVkVOVF9OQU1FX1NIT1dOLCB0aGlzKTsgLy8gRW5hYmxlIGxpc3RlbmVycwoKICAgICAgdGhpcy53aGlsZU9wZW5MaXN0ZW4odHJ1ZSk7IC8vIFdyYXAgaW4gYCRuZXh0VGljaygpYCB0byBlbnN1cmUgbWVudSBpcyBmdWxseSByZW5kZXJlZC9zaG93bgoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIC8vIEZvY3VzIG9uIHRoZSBtZW51IGNvbnRhaW5lciBvbiBzaG93CiAgICAgICAgX3RoaXMuZm9jdXNNZW51KCk7IC8vIEVtaXQgdGhlIHNob3duIGV2ZW50CgoKICAgICAgICBfdGhpcy4kZW1pdChFVkVOVF9OQU1FX1NIT1dOKTsKICAgICAgfSk7CiAgICB9LAogICAgaGlkZU1lbnU6IGZ1bmN0aW9uIGhpZGVNZW51KCkgewogICAgICB0aGlzLndoaWxlT3Blbkxpc3RlbihmYWxzZSk7CiAgICAgIHRoaXMuZW1pdE9uUm9vdChST09UX0VWRU5UX05BTUVfSElEREVOLCB0aGlzKTsKICAgICAgdGhpcy4kZW1pdChFVkVOVF9OQU1FX0hJRERFTik7CiAgICAgIHRoaXMuZGVzdHJveVBvcHBlcigpOwogICAgfSwKICAgIGNyZWF0ZVBvcHBlcjogZnVuY3Rpb24gY3JlYXRlUG9wcGVyKGVsZW1lbnQpIHsKICAgICAgdGhpcy5kZXN0cm95UG9wcGVyKCk7CiAgICAgIHRoaXMuJF9wb3BwZXIgPSBuZXcgUG9wcGVyKGVsZW1lbnQsIHRoaXMuJHJlZnMubWVudSwgdGhpcy5nZXRQb3BwZXJDb25maWcoKSk7CiAgICB9LAogICAgLy8gRW5zdXJlIHBvcHBlciBldmVudCBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQgY2xlYW5seQogICAgZGVzdHJveVBvcHBlcjogZnVuY3Rpb24gZGVzdHJveVBvcHBlcigpIHsKICAgICAgdGhpcy4kX3BvcHBlciAmJiB0aGlzLiRfcG9wcGVyLmRlc3Ryb3koKTsKICAgICAgdGhpcy4kX3BvcHBlciA9IG51bGw7CiAgICB9LAogICAgLy8gSW5zdHJ1Y3RzIHBvcHBlciB0byByZS1jb21wdXRlcyB0aGUgZHJvcGRvd24gcG9zaXRpb24KICAgIC8vIHVzZWZ1bCBpZiB0aGUgY29udGVudCBjaGFuZ2VzIHNpemUKICAgIHVwZGF0ZVBvcHBlcjogZnVuY3Rpb24gdXBkYXRlUG9wcGVyKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuJF9wb3BwZXIuc2NoZWR1bGVVcGRhdGUoKTsKICAgICAgfSBjYXRjaCAoX3VudXNlZCkge30KICAgIH0sCiAgICBjbGVhckhpZGVUaW1lb3V0OiBmdW5jdGlvbiBjbGVhckhpZGVUaW1lb3V0KCkgewogICAgICBjbGVhclRpbWVvdXQodGhpcy4kX2hpZGVUaW1lb3V0KTsKICAgICAgdGhpcy4kX2hpZGVUaW1lb3V0ID0gbnVsbDsKICAgIH0sCiAgICBnZXRQb3BwZXJDb25maWc6IGZ1bmN0aW9uIGdldFBvcHBlckNvbmZpZygpIHsKICAgICAgdmFyIHBsYWNlbWVudCA9IFBMQUNFTUVOVF9CT1RUT01fU1RBUlQ7CgogICAgICBpZiAodGhpcy5kcm9wdXApIHsKICAgICAgICBwbGFjZW1lbnQgPSB0aGlzLnJpZ2h0ID8gUExBQ0VNRU5UX1RPUF9FTkQgOiBQTEFDRU1FTlRfVE9QX1NUQVJUOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZHJvcHJpZ2h0KSB7CiAgICAgICAgcGxhY2VtZW50ID0gUExBQ0VNRU5UX1JJR0hUX1NUQVJUOwogICAgICB9IGVsc2UgaWYgKHRoaXMuZHJvcGxlZnQpIHsKICAgICAgICBwbGFjZW1lbnQgPSBQTEFDRU1FTlRfTEVGVF9TVEFSVDsKICAgICAgfSBlbHNlIGlmICh0aGlzLnJpZ2h0KSB7CiAgICAgICAgcGxhY2VtZW50ID0gUExBQ0VNRU5UX0JPVFRPTV9FTkQ7CiAgICAgIH0KCiAgICAgIHZhciBwb3BwZXJDb25maWcgPSB7CiAgICAgICAgcGxhY2VtZW50OiBwbGFjZW1lbnQsCiAgICAgICAgbW9kaWZpZXJzOiB7CiAgICAgICAgICBvZmZzZXQ6IHsKICAgICAgICAgICAgb2Zmc2V0OiB0aGlzLm9mZnNldCB8fCAwCiAgICAgICAgICB9LAogICAgICAgICAgZmxpcDogewogICAgICAgICAgICBlbmFibGVkOiAhdGhpcy5ub0ZsaXAKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICAgIHZhciBib3VuZGFyaWVzRWxlbWVudCA9IHRoaXMuYm91bmRhcnk7CgogICAgICBpZiAoYm91bmRhcmllc0VsZW1lbnQpIHsKICAgICAgICBwb3BwZXJDb25maWcubW9kaWZpZXJzLnByZXZlbnRPdmVyZmxvdyA9IHsKICAgICAgICAgIGJvdW5kYXJpZXNFbGVtZW50OiBib3VuZGFyaWVzRWxlbWVudAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIHJldHVybiBtZXJnZURlZXAocG9wcGVyQ29uZmlnLCB0aGlzLnBvcHBlck9wdHMgfHwge30pOwogICAgfSwKICAgIC8vIFR1cm4gbGlzdGVuZXJzIG9uL29mZiB3aGlsZSBvcGVuCiAgICB3aGlsZU9wZW5MaXN0ZW46IGZ1bmN0aW9uIHdoaWxlT3Blbkxpc3Rlbihpc09wZW4pIHsKICAgICAgLy8gSGlkZSB0aGUgZHJvcGRvd24gd2hlbiBjbGlja2VkIG91dHNpZGUKICAgICAgdGhpcy5saXN0ZW5Gb3JDbGlja091dCA9IGlzT3BlbjsgLy8gSGlkZSB0aGUgZHJvcGRvd24gd2hlbiBpdCBsb3NlcyBmb2N1cwoKICAgICAgdGhpcy5saXN0ZW5Gb3JGb2N1c0luID0gaXNPcGVuOyAvLyBIaWRlIHRoZSBkcm9wZG93biB3aGVuIGFub3RoZXIgZHJvcGRvd24gaXMgb3BlbmVkCgogICAgICB2YXIgbWV0aG9kID0gaXNPcGVuID8gJyRvbicgOiAnJG9mZic7CiAgICAgIHRoaXMuJHJvb3RbbWV0aG9kXShST09UX0VWRU5UX05BTUVfU0hPV04sIHRoaXMucm9vdENsb3NlTGlzdGVuZXIpOwogICAgfSwKICAgIHJvb3RDbG9zZUxpc3RlbmVyOiBmdW5jdGlvbiByb290Q2xvc2VMaXN0ZW5lcih2bSkgewogICAgICBpZiAodm0gIT09IHRoaXMpIHsKICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIFB1YmxpYyBtZXRob2QgdG8gc2hvdyBkcm9wZG93bgogICAgc2hvdzogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBpZiAodGhpcy5kaXNhYmxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfSAvLyBXcmFwIGluIGEgYHJlcXVlc3RBRigpYCB0byBhbGxvdyBhbnkgcHJldmlvdXMKICAgICAgLy8gY2xpY2sgaGFuZGxpbmcgdG8gb2NjdXIgZmlyc3QKCgogICAgICByZXF1ZXN0QUYoZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi52aXNpYmxlID0gdHJ1ZTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gUHVibGljIG1ldGhvZCB0byBoaWRlIGRyb3Bkb3duCiAgICBoaWRlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB2YXIgcmVmb2N1cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogZmFsc2U7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgogICAgICBpZiAodGhpcy5kaXNhYmxlZCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CgogICAgICBpZiAocmVmb2N1cykgewogICAgICAgIC8vIENoaWxkIGVsZW1lbnQgaXMgY2xvc2luZyB0aGUgZHJvcGRvd24gb24gY2xpY2sKICAgICAgICB0aGlzLiRvbmNlKEVWRU5UX05BTUVfSElEREVOLCB0aGlzLmZvY3VzVG9nZ2xlcik7CiAgICAgIH0KICAgIH0sCiAgICAvLyBDYWxsZWQgb25seSBieSBhIGJ1dHRvbiB0aGF0IHRvZ2dsZXMgdGhlIG1lbnUKICAgIHRvZ2dsZTogZnVuY3Rpb24gdG9nZ2xlKGV2ZW50KSB7CiAgICAgIGV2ZW50ID0gZXZlbnQgfHwge307IC8vIEVhcmx5IGV4aXQgd2hlbiBub3QgYSBjbGljayBldmVudCBvciBFTlRFUiwgU1BBQ0Ugb3IgRE9XTiB3ZXJlIHByZXNzZWQKCiAgICAgIHZhciBfZXZlbnQgPSBldmVudCwKICAgICAgICAgIHR5cGUgPSBfZXZlbnQudHlwZSwKICAgICAgICAgIGtleUNvZGUgPSBfZXZlbnQua2V5Q29kZTsKCiAgICAgIGlmICh0eXBlICE9PSAnY2xpY2snICYmICEodHlwZSA9PT0gJ2tleWRvd24nICYmIFtDT0RFX0VOVEVSLCBDT0RFX1NQQUNFLCBDT0RFX0RPV05dLmluZGV4T2Yoa2V5Q29kZSkgIT09IC0xKSkgewogICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCgoKICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHsKICAgICAgICB0aGlzLnZpc2libGUgPSBmYWxzZTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoRVZFTlRfTkFNRV9UT0dHTEUsIGV2ZW50KTsKICAgICAgc3RvcEV2ZW50KGV2ZW50KTsgLy8gVG9nZ2xlIHZpc2liaWxpdHkKCiAgICAgIGlmICh0aGlzLnZpc2libGUpIHsKICAgICAgICB0aGlzLmhpZGUodHJ1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zaG93KCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBNb3VzZWRvd24gaGFuZGxlciBmb3IgdGhlIHRvZ2dsZQoKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICBvbk1vdXNlZG93bjogZnVuY3Rpb24gb25Nb3VzZWRvd24oZXZlbnQpIHsKICAgICAgLy8gV2UgcHJldmVudCB0aGUgJ21vdXNlZG93bicgZXZlbnQgZm9yIHRoZSB0b2dnbGUgdG8gc3RvcCB0aGUKICAgICAgLy8gJ2ZvY3VzaW4nIGV2ZW50IGZyb20gYmVpbmcgZmlyZWQKICAgICAgLy8gVGhlIGV2ZW50IHdvdWxkIG90aGVyd2lzZSBiZSBwaWNrZWQgdXAgYnkgdGhlIGdsb2JhbCAnZm9jdXNpbicKICAgICAgLy8gbGlzdGVuZXIgYW5kIHRoZXJlIGlzIG5vIGNyb3NzLWJyb3dzZXIgc29sdXRpb24gdG8gZGV0ZWN0IGl0CiAgICAgIC8vIHJlbGF0ZXMgdG8gdGhlIHRvZ2dsZSBjbGljawogICAgICAvLyBUaGUgJ2NsaWNrJyBldmVudCB3aWxsIHN0aWxsIGJlIGZpcmVkIGFuZCB3ZSBoYW5kbGUgY2xvc2luZwogICAgICAvLyBvdGhlciBkcm9wZG93bnMgdGhlcmUgdG9vCiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vYm9vdHN0cmFwLXZ1ZS9ib290c3RyYXAtdnVlL2lzc3Vlcy80MzI4CiAgICAgIHN0b3BFdmVudChldmVudCwgewogICAgICAgIHByb3BhZ2F0aW9uOiBmYWxzZQogICAgICB9KTsKICAgIH0sCiAgICAvLyBDYWxsZWQgZnJvbSBkcm9wZG93biBtZW51IGNvbnRleHQKICAgIG9uS2V5ZG93bjogZnVuY3Rpb24gb25LZXlkb3duKGV2ZW50KSB7CiAgICAgIHZhciBrZXlDb2RlID0gZXZlbnQua2V5Q29kZTsKCiAgICAgIGlmIChrZXlDb2RlID09PSBDT0RFX0VTQykgewogICAgICAgIC8vIENsb3NlIG9uIEVTQwogICAgICAgIHRoaXMub25Fc2MoZXZlbnQpOwogICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IENPREVfRE9XTikgewogICAgICAgIC8vIERvd24gQXJyb3cKICAgICAgICB0aGlzLmZvY3VzTmV4dChldmVudCwgZmFsc2UpOwogICAgICB9IGVsc2UgaWYgKGtleUNvZGUgPT09IENPREVfVVApIHsKICAgICAgICAvLyBVcCBBcnJvdwogICAgICAgIHRoaXMuZm9jdXNOZXh0KGV2ZW50LCB0cnVlKTsKICAgICAgfQogICAgfSwKICAgIC8vIElmIHVzZXIgcHJlc3NlcyBFU0MsIGNsb3NlIHRoZSBtZW51CiAgICBvbkVzYzogZnVuY3Rpb24gb25Fc2MoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMudmlzaWJsZSkgewogICAgICAgIHRoaXMudmlzaWJsZSA9IGZhbHNlOwogICAgICAgIHN0b3BFdmVudChldmVudCk7IC8vIFJldHVybiBmb2N1cyB0byBvcmlnaW5hbCB0cmlnZ2VyIGJ1dHRvbgoKICAgICAgICB0aGlzLiRvbmNlKEVWRU5UX05BTUVfSElEREVOLCB0aGlzLmZvY3VzVG9nZ2xlcik7CiAgICAgIH0KICAgIH0sCiAgICAvLyBDYWxsZWQgb25seSBpbiBzcGxpdCBidXR0b24gbW9kZSwgZm9yIHRoZSBzcGxpdCBidXR0b24KICAgIG9uU3BsaXRDbGljazogZnVuY3Rpb24gb25TcGxpdENsaWNrKGV2ZW50KSB7CiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovCiAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7CiAgICAgICAgdGhpcy52aXNpYmxlID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiRlbWl0KEVWRU5UX05BTUVfQ0xJQ0ssIGV2ZW50KTsKICAgIH0sCiAgICAvLyBTaGFyZWQgaGlkZSBoYW5kbGVyIGJldHdlZW4gY2xpY2stb3V0IGFuZCBmb2N1cy1pbiBldmVudHMKICAgIGhpZGVIYW5kbGVyOiBmdW5jdGlvbiBoaWRlSGFuZGxlcihldmVudCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7CgogICAgICBpZiAodGhpcy52aXNpYmxlICYmICFjb250YWlucyh0aGlzLiRyZWZzLm1lbnUsIHRhcmdldCkgJiYgIWNvbnRhaW5zKHRoaXMudG9nZ2xlciwgdGFyZ2V0KSkgewogICAgICAgIHRoaXMuY2xlYXJIaWRlVGltZW91dCgpOwogICAgICAgIHRoaXMuJF9oaWRlVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgcmV0dXJuIF90aGlzMy5oaWRlKCk7CiAgICAgICAgfSwgdGhpcy5pbk5hdmJhciA/IDMwMCA6IDApOwogICAgICB9CiAgICB9LAogICAgLy8gRG9jdW1lbnQgY2xpY2stb3V0IGxpc3RlbmVyCiAgICBjbGlja091dEhhbmRsZXI6IGZ1bmN0aW9uIGNsaWNrT3V0SGFuZGxlcihldmVudCkgewogICAgICB0aGlzLmhpZGVIYW5kbGVyKGV2ZW50KTsKICAgIH0sCiAgICAvLyBEb2N1bWVudCBmb2N1cy1pbiBsaXN0ZW5lcgogICAgZm9jdXNJbkhhbmRsZXI6IGZ1bmN0aW9uIGZvY3VzSW5IYW5kbGVyKGV2ZW50KSB7CiAgICAgIHRoaXMuaGlkZUhhbmRsZXIoZXZlbnQpOwogICAgfSwKICAgIC8vIEtleWJvYXJkIG5hdgogICAgZm9jdXNOZXh0OiBmdW5jdGlvbiBmb2N1c05leHQoZXZlbnQsIHVwKSB7CiAgICAgIHZhciBfdGhpczQgPSB0aGlzOyAvLyBJZ25vcmUga2V5IHVwL2Rvd24gb24gZm9ybSBlbGVtZW50cwoKCiAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7CgogICAgICBpZiAoIXRoaXMudmlzaWJsZSB8fCBldmVudCAmJiBjbG9zZXN0KFNFTEVDVE9SX0ZPUk1fQ0hJTEQsIHRhcmdldCkpIHsKICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogc2hvdWxkIG5ldmVyIGhhcHBlbiAqLwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgc3RvcEV2ZW50KGV2ZW50KTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBpdGVtcyA9IF90aGlzNC5nZXRJdGVtcygpOwoKICAgICAgICBpZiAoaXRlbXMubGVuZ3RoIDwgMSkgewogICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQ6IHNob3VsZCBuZXZlciBoYXBwZW4gKi8KICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHZhciBpbmRleCA9IGl0ZW1zLmluZGV4T2YodGFyZ2V0KTsKCiAgICAgICAgaWYgKHVwICYmIGluZGV4ID4gMCkgewogICAgICAgICAgaW5kZXgtLTsKICAgICAgICB9IGVsc2UgaWYgKCF1cCAmJiBpbmRleCA8IGl0ZW1zLmxlbmd0aCAtIDEpIHsKICAgICAgICAgIGluZGV4Kys7CiAgICAgICAgfQoKICAgICAgICBpZiAoaW5kZXggPCAwKSB7CiAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dDogc2hvdWxkIG5ldmVyIGhhcHBlbiAqLwogICAgICAgICAgaW5kZXggPSAwOwogICAgICAgIH0KCiAgICAgICAgX3RoaXM0LmZvY3VzSXRlbShpbmRleCwgaXRlbXMpOwogICAgICB9KTsKICAgIH0sCiAgICBmb2N1c0l0ZW06IGZ1bmN0aW9uIGZvY3VzSXRlbShpbmRleCwgaXRlbXMpIHsKICAgICAgdmFyIGVsID0gaXRlbXMuZmluZChmdW5jdGlvbiAoZWwsIGkpIHsKICAgICAgICByZXR1cm4gaSA9PT0gaW5kZXg7CiAgICAgIH0pOwogICAgICBhdHRlbXB0Rm9jdXMoZWwpOwogICAgfSwKICAgIGdldEl0ZW1zOiBmdW5jdGlvbiBnZXRJdGVtcygpIHsKICAgICAgLy8gR2V0IGFsbCBpdGVtcwogICAgICByZXR1cm4gZmlsdGVyVmlzaWJsZXMoc2VsZWN0QWxsKFNFTEVDVE9SX0lURU0sIHRoaXMuJHJlZnMubWVudSkpOwogICAgfSwKICAgIGZvY3VzTWVudTogZnVuY3Rpb24gZm9jdXNNZW51KCkgewogICAgICBhdHRlbXB0Rm9jdXModGhpcy4kcmVmcy5tZW51KTsKICAgIH0sCiAgICBmb2N1c1RvZ2dsZXI6IGZ1bmN0aW9uIGZvY3VzVG9nZ2xlcigpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgYXR0ZW1wdEZvY3VzKF90aGlzNS50b2dnbGVyKTsKICAgICAgfSk7CiAgICB9CiAgfQp9KTs="},null]}